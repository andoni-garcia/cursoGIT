(function(e){function t(t){for(var n,o,r=t[0],l=t[1],c=t[2],u=0,m=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&m.push(i[o][0]),i[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);d&&d(t);while(m.length)m.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(n=!1)}n&&(s.splice(t--,1),e=r(r.s=a[0]))}return e}var n={},i={2:0},s=[];function o(e){return r.p+"js/workplace/quotation/"+({}[e]||e)+".js"}function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.e=function(e){var t=[],a=i[e];if(0!==a)if(a)t.push(a[2]);else{var n=new Promise((function(t,n){a=i[e]=[t,n]}));t.push(a[2]=n);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.src=o(e);var c=new Error;s=function(t){l.onerror=l.onload=null,clearTimeout(u);var a=i[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+n+": "+s+")",c.name="ChunkLoadError",c.type=n,c.request=s,a[1](c)}i[e]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},r.m=e,r.c=n,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var d=c;s.push([195,1]),a()})({100:function(e,t,a){},101:function(e,t,a){},102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){},195:function(e,t,a){e.exports=a(272)},218:function(e,t,a){"use strict";var n=a(81),i=a.n(n);i.a},219:function(e,t,a){"use strict";var n=a(82),i=a.n(n);i.a},220:function(e,t,a){"use strict";var n=a(83),i=a.n(n);i.a},221:function(e,t,a){"use strict";var n=a(84),i=a.n(n);i.a},222:function(e,t,a){"use strict";var n=a(85),i=a.n(n);i.a},223:function(e,t,a){"use strict";var n=a(86),i=a.n(n);i.a},243:function(e,t,a){"use strict";var n=a(87),i=a.n(n);i.a},247:function(e,t,a){"use strict";var n=a(88),i=a.n(n);i.a},248:function(e,t,a){"use strict";var n=a(89),i=a.n(n);i.a},249:function(e,t,a){"use strict";var n=a(90),i=a.n(n);i.a},252:function(e,t,a){"use strict";var n=a(91),i=a.n(n);i.a},253:function(e,t,a){"use strict";var n=a(92),i=a.n(n);i.a},254:function(e,t,a){"use strict";var n=a(93),i=a.n(n);i.a},255:function(e,t,a){"use strict";var n=a(94),i=a.n(n);i.a},256:function(e,t,a){"use strict";var n=a(95),i=a.n(n);i.a},257:function(e,t,a){"use strict";var n=a(96),i=a.n(n);i.a},258:function(e,t,a){"use strict";var n=a(97),i=a.n(n);i.a},259:function(e,t,a){"use strict";var n=a(98),i=a.n(n);i.a},260:function(e,t,a){"use strict";var n=a(99),i=a.n(n);i.a},262:function(e,t,a){"use strict";var n=a(100),i=a.n(n);i.a},263:function(e,t,a){"use strict";var n=a(101),i=a.n(n);i.a},264:function(e,t,a){"use strict";var n=a(102),i=a.n(n);i.a},265:function(e,t,a){"use strict";var n=a(103),i=a.n(n);i.a},266:function(e,t,a){"use strict";var n=a(104),i=a.n(n);i.a},267:function(e,t,a){"use strict";var n=a(105),i=a.n(n);i.a},268:function(e,t,a){"use strict";var n=a(106),i=a.n(n);i.a},269:function(e,t,a){"use strict";var n=a(107),i=a.n(n);i.a},270:function(e,t,a){"use strict";var n=a(108),i=a.n(n);i.a},271:function(e,t,a){},272:function(e,t,a){"use strict";a.r(t);a(146),a(200),a(204),a(206);var n=a(18),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("ApplicationLauncher"),a("WpInstances",{attrs:{onAddInstance:e.onAddInstance},on:{"selected-instance-changed":e.handleSelectedInstanceChange,"instances-changed":e.handleInstanceChanged}}),a("WpSpinner",{attrs:{visible:e.showLoading}}),a("router-view")],1)},s=[];i._withStripped=!0;a(23),a(28),a(26),a(42);var o=a(9),r=a(2),l=a(3),c=a(5),u=a(4),d=a(1),m=a(0),p=a(8),b="modulePDInstance",h={getters:{SELECTED_INSTANCE:"SELECTED_INSTANCE",INSTANCES:"INSTANCES"},mutations:{SET_INSTANCES:"SET_INSTANCES",CREATE_INSTANCES:"CREATE_INSTANCES",DELETE_INSTANCE:"DELETE_INSTANCE",NULLIFY_SELECTED:"NULLIFY_SELECTED",UPDATE_PROPERTY:"UPDATE_PROPERTY",UPDATE_INSTANCE:"UPDATE_INSTANCE",UPDATE_SUMMARY:"UPDATE_SUMMARY",SET_SELECTED_INSTANCE_ID:"SET_SELECTED_INSTANCE_ID"},actions:{FETCH_INSTANCES:"FETCH_INSTANCES",UPDATE_INSTANCE:"UPDATE_INSTANCE",UPDATE_SUMMARY:"UPDATE_SUMMARY",CREATE_INSTANCE:"CREATE_INSTANCE",DELETE_INSTANCE:"DELETE_INSTANCE"}},v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"workspace-global-nav",attrs:{id:"global-nav"}},[a("div",{staticClass:"container"},[a("div",{attrs:{id:"breadcrumbs"}},[a("ol",{staticClass:"breadcrumbs",attrs:{"data-swiftype-index":"false"}},[a("li",{},[a("a",{attrs:{href:e.homeUrl}},[e._v("Home")])]),e._m(0),a("li",[e._v(e._s(this.currentAppLabel))])]),e._m(1)]),a("div",{attrs:{id:"environment"}},[a("ul",{staticClass:"environment"},[e._l(e.apps,(function(t){return[a("li",{key:t,class:e.wpApps.getWpClassStyle(t)},[a("a",{class:{active:e.selectedApp==t},attrs:{href:e.wpApps.getWpUrl(t),"data-toggle":"tooltip","data-placement":"top",title:"","data-original-title":e.selectedApp!=t?e.wpApps.getWpLabel(t):""}},[a("span",[e._v(e._s(e.wpApps.getWpLabel(t)))])])])]}))],2)])])])},f=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{},[a("a",{attrs:{href:"#"}},[e._v("Workspace")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"swiftype-category hidden"},[a("span",{attrs:{"data-swiftype-name":"swiftype_page_submenu","data-swiftype-type":"string"}})])}];v._withStripped=!0;a(24),a(213),a(21),a(49),a(63);var g,C,y,O,w,I=a(6),N=(a(137),a(61),function(){function e(){Object(r["a"])(this,e)}return Object(l["a"])(e,null,[{key:"getEnumKeyByEnumValue",value:function(e,t){var a=Object.keys(e).filter((function(a){return e[a]==t}));return a.length>0?a[0]:null}},{key:"getEnumKeyByEnumValueNotNull",value:function(t,a){return e.getEnumKeyByEnumValue(t,a)||""}}]),e}()),j=function(){function e(){Object(r["a"])(this,e)}return Object(l["a"])(e,null,[{key:"camelCaseToKebab",value:function(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z])([A-Z])(?=[a-z])/g,"$1-$2").toLowerCase()}}]),e}();(function(e){e["OrderStatus"]="ORST",e["PriceDelivery"]="PRDE",e["Quotation"]="QUOT",e["CustomerOrderEntry"]="OREN"})(y||(y={})),function(e){e["OrderStatus"]="orderStatus",e["PriceDelivery"]="priceAndDelivery",e["Quotation"]="quotation",e["CustomerOrderEntry"]="customerOrderEntry"}(O||(O={})),function(e){e["OrderStatus"]="list-order-status",e["PriceDelivery"]="list-price-delivery",e["Quotation"]="list-quotation",e["CustomerOrderEntry"]="list-customer-entry"}(w||(w={}));var S=(g={},Object(I["a"])(g,y.OrderStatus,O.OrderStatus),Object(I["a"])(g,y.PriceDelivery,O.PriceDelivery),Object(I["a"])(g,y.Quotation,O.Quotation),Object(I["a"])(g,y.CustomerOrderEntry,O.CustomerOrderEntry),g),_=(C={},Object(I["a"])(C,y.OrderStatus,window.smc.workplace.urls.orderStatusSite),Object(I["a"])(C,y.PriceDelivery,window.smc.workplace.urls.priceAndDeliverySite),Object(I["a"])(C,y.Quotation,window.smc.workplace.urls.quotationSite),Object(I["a"])(C,y.CustomerOrderEntry,window.smc.workplace.urls.customerOrderEntrySite),C),E=function(){function e(t,a,n,i){Object(r["a"])(this,e),this._name=t,this._label=a,this._classStyle=n,this._url=i}return Object(l["a"])(e,[{key:"name",get:function(){return this._name}},{key:"label",get:function(){return this._label}},{key:"classStyle",get:function(){return this._classStyle}},{key:"url",get:function(){return this._url}}]),e}(),k=function(){function e(t){for(var a in Object(r["a"])(this,e),this.map=new Map,y){var n=a,i=y[n],s=S[i],o=t[s],l=_[i],c=N.getEnumKeyByEnumValueNotNull(y,i),u="list-"+j.camelCaseToKebab(c),d=new E(a,o,u,l);this.map.set(a,d)}}return Object(l["a"])(e,[{key:"getWpApplication",value:function(e){var t=N.getEnumKeyByEnumValueNotNull(y,e);return this.map.get(t)}},{key:"getWpLabel",value:function(e){var t,a=N.getEnumKeyByEnumValueNotNull(y,e),n=null===(t=this.map.get(a))||void 0===t?void 0:t.label;return void 0!==n&&null!==n?n:""}},{key:"getWpClassStyle",value:function(e){var t,a=N.getEnumKeyByEnumValueNotNull(y,e),n=null===(t=this.map.get(a))||void 0===t?void 0:t.classStyle;return void 0!==n?n:null}},{key:"getWpUrl",value:function(e){var t,a=N.getEnumKeyByEnumValueNotNull(y,e),n=null===(t=this.map.get(a))||void 0===t?void 0:t.url;return void 0!==n?n:null}}]),e}(),L=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.apps=[],e.selectedApp="",e.currentAppLabel="",e.homeUrl=window.smc.workplace.channel,e}return Object(l["a"])(a,[{key:"created",value:function(){console.log("ApplicationLauncher created")}},{key:"mounted",value:function(){console.log("ApplicationLauncher mounted"),this.apps=this.$store.getters["moduleStoreShared/getCurrentApps"],this.selectedApp=this.$store.getters["moduleStoreShared/getSelectedApp"],this.labels=this.$store.getters["moduleCommonLabels/getLabels"](),this.wpApps=new k(this.labels),this.currentAppLabel=this.wpApps.getWpLabel(this.selectedApp)}}]),a}(m["d"]);L=Object(d["a"])([Object(m["a"])({name:"ApplicationLauncher"})],L);var P=L,x=P,T=(a(218),a(7)),D=Object(T["a"])(x,v,f,!1,null,"2cf37f64",null);D.options.__file="shared/src/components/ApplicationLauncher.vue";var R=D.exports,A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.visible?a("div",{attrs:{id:e.id}},[a("div",{staticClass:"overlay-inside eshop-box-rounded"}),e._m(0)]):e._e()},q=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"spinner-inside"},[a("div",{staticClass:"bounce"}),a("div",{staticClass:"bounce1"}),a("div",{staticClass:"bounce2"})])}];A._withStripped=!0;var U=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){return Object(r["a"])(this,a),t.apply(this,arguments)}return a}(m["d"]);Object(d["a"])([Object(m["c"])()],U.prototype,"id",void 0),Object(d["a"])([Object(m["c"])()],U.prototype,"visible",void 0),U=Object(d["a"])([Object(m["a"])({name:"WpSpinner"})],U);var M=U,Q=M,F=(a(219),Object(T["a"])(Q,A,q,!1,null,"6c17d052",null));F.options.__file="shared/src/components/commons/WpSpinner.vue";var W=F.exports,B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("WpConfirmModal",{ref:"modalChild",attrs:{id:"instance-wpmodal",modalTitle:"label:deleteInstanceModalTitle",message:"label:deleteInstanceModalMessage",acceptButtonLabel:"label:accept",cancelButtonLabel:"label:cancel"},on:{accepted:e.onConfirmModalAccept,"close-modal":e.onConfirmModalClose}}),a("section",{staticClass:"workspace-instance-tabs",attrs:{id:"instance-tabs"}},[a("div",{staticClass:"container"},[a("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light nav-instances"},[e._l(e.instances,(function(t){return a("WpInstance",{directives:[{name:"show",rawName:"v-show",value:e.selectedInstance.id===t.id,expression:"selectedInstance.id === instance.id"}],key:t.id,attrs:{id:t.id,name:t.name,visualType:e.visualType.MOBILE,selectedInstance:e.selectedInstance},on:{"select-instance":function(t){return e.selectInstance(t)},"update-instance":function(t){return e.updateInstance(t)},"delete-instance":function(t){return e.deleteInstance(t)}}})})),e._m(0),a("button",{staticClass:"btn-basic btn-link",attrs:{"data-toggle":"modal"},on:{click:e.addInstance}},[e._m(1)]),a("div",{staticClass:"navbar-collapse collapse",attrs:{id:"navbarNav"}},e._l(e.instances,(function(t){return a("ul",{key:t.id,staticClass:"navbar-nav"},[a("li",{staticClass:"nav-item"},[a("WpInstance",{attrs:{id:t.id,name:t.name,visualType:e.visualType.MOBILEDROP,selectedInstance:e.selectedInstance},on:{"select-instance":function(t){return e.selectInstance(t)},"update-instance":function(t){return e.updateInstance(t)},"delete-instance":function(t){return e.deleteInstance(t)}}})],1)])})),0)],2),a("div",{staticClass:"flex-container wrap"},[a("div",{staticClass:"instances flex-item col-lg-11 col-sm-11"},[a("div",{staticClass:"flex-group instances-group nowrap",staticStyle:{overflow:"hidden"}},e._l(e.instances,(function(t){return a("WpInstance",{key:t.id,attrs:{id:t.id,name:t.name,visualType:e.visualType.FULLSCREEN,selectedInstance:e.selectedInstance},on:{"select-instance":function(t){return e.selectInstance(t)},"update-instance":function(t){return e.updateInstance(t)},"delete-instance":function(t){return e.deleteInstance(t)}}})})),1),a("div",{staticClass:"instance-overlay"})]),a("div",{staticClass:"list-instances flex-item col-lg-1 col-sm-1"},[a("div",{staticClass:"dropdown-wp"},[e._m(2),a("div",{staticClass:"dropdown-menu dropdown-menu-right shadow animated--grow-in",staticStyle:{position:"absolute",transform:"translate3d(47px, 40px, 0px)",top:"0px",left:"0px","will-change":"transform"},attrs:{"aria-labelledby":"dropdownMenuButton","x-placement":"bottom-end"}},[a("h6",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:"+e.appName,expression:"'label:' + appName"}]}),e._l(e.instances,(function(t){return a("div",{key:t.id},[a("WpInstance",{attrs:{id:t.id,name:t.name,visualType:e.visualType.FULLSCREENDROP,selectedInstance:e.selectedInstance},on:{"select-instance":function(t){return e.selectInstance(t)},"update-instance":function(t){return e.updateInstance(t)},"delete-instance":function(t){return e.deleteInstance(t)}}})],1)}))],2)]),a("div",{staticClass:"add-instances"},[a("button",{staticClass:"btn-basic btn-link",attrs:{"data-toggle":"modal"},on:{click:e.addInstance}},[e._m(3)])])])])])])],1)},V=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"navbar-toggler collapsed",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"fas fa-caret-up rotate-icon"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{attrs:{"data-toggle":"tooltip","data-placement":"top",title:"","data-original-title":"Add Instance"}},[a("i",{staticClass:"fas fa-plus"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"btn-basic btn-link dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[a("span",{attrs:{"data-toggle":"tooltip","data-placement":"top",title:"","data-original-title":"All Instances"}},[a("i",{staticClass:"fas fa-list"})])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{attrs:{"data-toggle":"tooltip","data-placement":"top",title:"","data-original-title":"Add Instance"}},[a("i",{staticClass:"fas fa-plus"})])}];B._withStripped=!0;a(79),a(80),a(140);function G(e,t){var a;return null===(a=t.context)||void 0===a?void 0:a.$store.getters["moduleCommonLabels/getLabel"](e.replace("label:",""))}function H(e,t,a){var n=t.value||"";n.startsWith("label:")&&(n=G(n,a)),e.innerHTML=n}var Y={bind:H,update:H},J=Y,z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.showModal?a("transition",{attrs:{name:"modal"}},[a("div",{directives:[{name:"outside-click",rawName:"v-outside-click",value:e.onClose,expression:"onClose"}],ref:"wpModal",staticClass:"modal modal-mask",attrs:{id:e.id,role:"dialog"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h4",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.modalTitle,expression:"modalTitle"}],staticClass:"modal-title"}),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}},[e._v("×")])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"modal-search col-md-8"},[a("WpInput",{attrs:{id:e.id+"-wpinput",required:e.required,iconClass:e.iconClass,isNumeric:e.isNumeric,label:e.label},on:{clicked:e.onIconClicked,pressedEnter:e.onEnterPressed,input:e.onValueChanged},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1)]),a("div",{staticClass:"modal-footer"},[a("button",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.cancelButtonLabel,expression:"cancelButtonLabel"}],staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}}),a("button",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.acceptButtonLabel,expression:"acceptButtonLabel"}],staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal",disabled:e.required&&""===e.searchValue},on:{click:e.onAccept}})])])])])]):e._e()},K=[];z._withStripped=!0;var Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"inputGroup"},[a("input",{directives:[{name:"pressed-enter",rawName:"v-pressed-enter"}],class:e.iconClass?"form-control modalpadding":"form-control non-modalpadding",attrs:{id:e.id,disabled:e.disabled,maxlength:e.maxlength,type:"text",autocomplete:"off"},domProps:{value:e.value},on:{input:e.onChanged,keypress:e.onIsNumeric,blur:e.onBlur}}),e.iconClass&&!e.disabled||e.iconClass&&e.modalWhenDisabled?a("button",{staticClass:"btn btn-input",attrs:{type:"button",tabindex:"-1"},on:{click:e.onClickButton}},[a("i",{class:e.iconClass})]):e._e(),a("label",{attrs:{title:e.translatedLabel}},[a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.label,expression:"label"}]}),e.required?a("span",{staticClass:"requerido"},[e._v(" *")]):e._e()])])},X=[];Z._withStripped=!0;a(64);var ee={bind:function(e,t,a){var n=function(e){var t,n=e.charCode?e.charCode:e.keyCode?e.keyCode:e.witch?e.witch:0;13===n&&(e.stopPropagation(),null===(t=a.context)||void 0===t||t.$emit("enter-pressed",e.target.value))};e.addEventListener("keypress",n)},unbind:function(e){e.removeEventListener("keypress",e.keyPressedEvent)}},te=ee,ae=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.translatedLabel="",e}return Object(l["a"])(a,[{key:"created",value:function(){this.$parent.$on("validation-changed",this.onValidationChanged)}},{key:"mounted",value:function(){this.translatedLabel=this.label&&this.label.startsWith("label:")?this.$store.getters["moduleCommonLabels/getLabel"](this.label.slice(6)):this.label}},{key:"onChanged",value:function(e){this.$emit("input",e.target.value)}},{key:"onIsNumeric",value:function(e){e=e||window.event;var t=e.which?e.which:e.keyCode;if(!(this.isNumeric&&t>31&&(t<48||t>57)&&46!==t&&44!==t&&13===t))return!0;e.preventDefault()}},{key:"onClickButton",value:function(){this.$emit("clicked")}},{key:"onBlur",value:function(){}},{key:"onValidationChanged",value:function(e){if(void 0!==e&&null!==e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var a=e[t];void 0!==a&&null!==a&&""!==a||!1}}}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])()],ae.prototype,"id",void 0),Object(d["a"])([Object(m["c"])()],ae.prototype,"required",void 0),Object(d["a"])([Object(m["c"])()],ae.prototype,"iconClass",void 0),Object(d["a"])([Object(m["c"])()],ae.prototype,"maxlength",void 0),Object(d["a"])([Object(m["c"])()],ae.prototype,"disabled",void 0),Object(d["a"])([Object(m["c"])()],ae.prototype,"modalWhenDisabled",void 0),Object(d["a"])([Object(m["c"])({default:!1})],ae.prototype,"isNumeric",void 0),Object(d["a"])([Object(m["c"])()],ae.prototype,"label",void 0),Object(d["a"])([Object(m["c"])()],ae.prototype,"value",void 0),Object(d["a"])([Object(m["b"])("blur")],ae.prototype,"onBlur",null),ae=Object(d["a"])([Object(m["a"])({name:"WpInput",directives:{LabelTranslate:J,PressedEnter:te}})],ae);var ne=ae,ie=ne,se=(a(220),Object(T["a"])(ie,Z,X,!1,null,"188064ee",null));se.options.__file="shared/src/components/forms/basic/WpInput.vue";var oe,re=se.exports,le=function(e,t,a){t==e.target&&a&&a()},ce={bind:function(e,t,a){var n=t.value;oe=function(t){le(t,e,n)},document.body.addEventListener("click",oe)},unbind:function(e){document.body.removeEventListener("click",oe)}},ue=ce,de=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.searchValue="",e.showModal=!1,e}return Object(l["a"])(a,[{key:"created",value:function(){this.$parent.$on("show-modal",this.onShowModal)}},{key:"onShowModal",value:function(){this.showModal=!0}},{key:"onAccept",value:function(){var e=this.searchValue;return this.onClose(),e}},{key:"onClose",value:function(){this.showModal=!1,this.searchValue=""}},{key:"onIconClicked",value:function(){}},{key:"onEnterPressed",value:function(){}},{key:"onValueChanged",value:function(){}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])()],de.prototype,"modalTitle",void 0),Object(d["a"])([Object(m["c"])()],de.prototype,"id",void 0),Object(d["a"])([Object(m["c"])()],de.prototype,"required",void 0),Object(d["a"])([Object(m["c"])({default:""})],de.prototype,"iconClass",void 0),Object(d["a"])([Object(m["c"])({default:!1})],de.prototype,"isNumeric",void 0),Object(d["a"])([Object(m["c"])()],de.prototype,"label",void 0),Object(d["a"])([Object(m["c"])()],de.prototype,"acceptButtonLabel",void 0),Object(d["a"])([Object(m["c"])()],de.prototype,"cancelButtonLabel",void 0),Object(d["a"])([Object(m["b"])("accepted")],de.prototype,"onAccept",null),Object(d["a"])([Object(m["b"])("close-modal")],de.prototype,"onClose",null),de=Object(d["a"])([Object(m["a"])({name:"WpInputBasicModal",components:{WpInput:re},directives:{OutsideClick:ue,LabelTranslate:J}})],de);var me=de,pe=me,be=(a(221),Object(T["a"])(pe,z,K,!1,null,"6641640e",null));be.options.__file="shared/src/components/modals/WpInputBasicModal.vue";var he=be.exports,ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:this.getRootElementstyle()},["mobile"==e.visualType?[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isEdited,expression:"isEdited"}],staticClass:"flex-group nowrap item-tab navbar-brand"},[a("div",{staticClass:"flex-group-item navbar-brand"},[a("div",{staticClass:"inputGroup-tabs"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.inputEditingText,expression:"inputEditingText"}],staticClass:"form-control",attrs:{id:e.id+"-input-mobile",type:"text",placeholder:e.name,autocomplete:"off"},domProps:{value:e.inputEditingText},on:{blur:function(t){return e.updateInstance(e.id,e.inputEditingText)},keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enterPressed()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.toggleEditMode()}],input:function(t){t.target.composing||(e.inputEditingText=t.target.value)}}}),e._m(0)])])]),a("h2",{directives:[{name:"show",rawName:"v-show",value:!e.isEdited,expression:"!isEdited"}]},[e._v(" "+e._s(e.name)+" ")]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.isSelected()&&!e.isEdited,expression:"isSelected() && !isEdited"}],staticClass:"btn-basic btn-link btn-close",attrs:{type:"button","data-toggle":"modal","data-placement":"top",title:"","data-original-title":"Close Instance"},on:{click:function(t){return e.openConfirmModal()}}},[e._m(1)]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.isSelected()&&!e.isEdited,expression:"isSelected() && !isEdited"}],staticClass:"btn-basic btn-link right",attrs:{"data-toggle":"modal","data-target":"#editInstance",title:"","data-original-title":"Edit instance name"},on:{click:function(t){return e.clickEditInstance(e.id,"input-mobile",e.name)}}},[a("i",{staticClass:"far fa-edit"})])]:e._e(),"mobiledrop"==e.visualType?[a("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:function(t){return e.selectInstance(e.id,t)}}},[e._v(" "+e._s(e.name)+" ")])]:e._e(),"fullscreen"==e.visualType?[a("Button",{directives:[{name:"show",rawName:"v-show",value:e.isSelected(),expression:"isSelected()"}],staticClass:"btn-basic btn-link",attrs:{"data-toggle":"tooltip","data-placement":"top",title:"Edit instance name"},on:{click:function(t){return e.clickEditInstance(e.id,"input",e.name)}}},[a("i",{staticClass:"far fa-edit"})]),a("div",{staticClass:"flex-group-item"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isEdited,expression:"isEdited"}],staticClass:"inputGroup-tabs"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.inputEditingText,expression:"inputEditingText"}],staticClass:"form-control",attrs:{id:e.id+"-input",type:"text",placeholder:e.name,autocomplete:"off"},domProps:{value:e.inputEditingText},on:{blur:function(t){return e.updateInstance(e.id,e.inputEditingText)},keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enterPressed()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.toggleEditMode()}],input:function(t){t.target.composing||(e.inputEditingText=t.target.value)}}}),e._m(2)]),a("h2",{directives:[{name:"show",rawName:"v-show",value:!e.isEdited,expression:"!isEdited"}],attrs:{id:e.id+"-tab"}},[a("a",{attrs:{href:"#"},on:{click:function(t){return e.selectInstance(e.id,t)}}},[e._v(" "+e._s(e.name)+" ")])])]),a("button",{directives:[{name:"show",rawName:"v-show",value:!e.isEdited,expression:"!isEdited"}],staticClass:"btn-basic btn-link btn-close",attrs:{type:"button",title:"","data-original-title":"Close Instance","data-toggle":"modal","data-placement":"top"},on:{click:function(t){return e.openConfirmModal()}}},[e._m(3)])]:e._e(),"fullscreendrop"==e.visualType?[a("div",{staticClass:"dropdown-item d-flex"},[a("a",{staticClass:"dropdown-text-item",attrs:{href:"#"},on:{click:function(t){return e.selectInstance(e.id,t)}}},[e._v(" "+e._s(e.name)+" ")]),a("a",{staticClass:"dropdown-close-instance",attrs:{href:"#"},on:{click:function(t){return e.openConfirmModal()}}},[a("i",{staticClass:"fas fa-times"})])])]:e._e()],2)},fe=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"btn btn-input"},[a("i",{staticClass:"far fa-save"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("i",{staticClass:"fas fa-times"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"btn btn-input"},[a("i",{staticClass:"far fa-save"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("i",{staticClass:"fas fa-times"})])}];ve._withStripped=!0;var ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.showModal?a("transition",{attrs:{name:"modal"}},[a("div",{directives:[{name:"outside-click",rawName:"v-outside-click",value:e.onClose,expression:"onClose"}],ref:"wpModal",staticClass:"modal modal-mask",attrs:{id:e.id,role:"dialog"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h4",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.modalTitle,expression:"modalTitle"}],staticClass:"modal-title text-dark"}),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}},[e._v(" × ")])]),a("div",{staticClass:"modal-body text-dark"},[a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.message,expression:"message"}]})]),a("div",{staticClass:"modal-footer"},[e.isOnlyAccept?e._e():[a("button",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.cancelButtonLabel,expression:"cancelButtonLabel"}],staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}})],a("button",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.acceptButtonLabel,expression:"acceptButtonLabel"}],staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onAccept}})],2)])])])]):e._e()},Ce=[];ge._withStripped=!0;var ye=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.showModal=!1,e}return Object(l["a"])(a,[{key:"created",value:function(){this.$parent.$on("show-confirm-modal",this.onShowModal)}},{key:"onShowModal",value:function(){this.showModal=!0}},{key:"onAccept",value:function(){this.showModal=!1}},{key:"onClose",value:function(){this.showModal=!1}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])()],ye.prototype,"id",void 0),Object(d["a"])([Object(m["c"])()],ye.prototype,"modalTitle",void 0),Object(d["a"])([Object(m["c"])()],ye.prototype,"message",void 0),Object(d["a"])([Object(m["c"])()],ye.prototype,"acceptButtonLabel",void 0),Object(d["a"])([Object(m["c"])()],ye.prototype,"cancelButtonLabel",void 0),Object(d["a"])([Object(m["c"])({default:!1})],ye.prototype,"isOnlyAccept",void 0),Object(d["a"])([Object(m["b"])("accepted")],ye.prototype,"onAccept",null),Object(d["a"])([Object(m["b"])("close-modal")],ye.prototype,"onClose",null),ye=Object(d["a"])([Object(m["a"])({name:"WpInputBasicModal",components:{},directives:{OutsideClick:ue,LabelTranslate:J}})],ye);var Oe=ye,we=Oe,Ie=(a(222),Object(T["a"])(we,ge,Ce,!1,null,"1c32398d",null));Ie.options.__file="shared/src/components/modals/WpConfirmModal.vue";var Ne=Ie.exports,je=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.isEdited=!1,e.inputEditingText="",e}return Object(l["a"])(a,[{key:"openConfirmModal",value:function(){this.$emit("delete-instance",this.id)}},{key:"selectInstance",value:function(e,t){t&&t.preventDefault(),this.$emit("select-instance",e)}},{key:"clickEditInstance",value:function(e,t,a){this.isEdited=!0,this.inputEditingText=a;var n=e+"-"+t;setTimeout((function(){document.getElementById(n).focus()}),100)}},{key:"updateInstance",value:function(e,t){if(""!=t){var a={instanceId:e,instanceName:t};this.$emit("update-instance",a),this.isEdited=!1}}},{key:"enterPressed",value:function(){this.isEdited=!1}},{key:"toggleEditMode",value:function(){this.inputEditingText="",this.isEdited=!1}},{key:"isSelected",value:function(){return null!=this.selectedInstance&&this.selectedInstance.id==this.id}},{key:"getRootElementstyle",value:function(){return"mobile"==this.visualType?"navbar-brand":"fullscreen"==this.visualType?this.isSelected()?"flex-group nowrap item-tab item-tab-active":"flex-group nowrap item-tab":""}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])()],je.prototype,"id",void 0),Object(d["a"])([Object(m["c"])()],je.prototype,"name",void 0),Object(d["a"])([Object(m["c"])()],je.prototype,"visualType",void 0),Object(d["a"])([Object(m["c"])()],je.prototype,"selectedInstance",void 0),je=Object(d["a"])([Object(m["a"])({name:"WpInstances",components:{WpConfirmModal:Ne}})],je);var Se=je,_e=Se,Ee=(a(223),Object(T["a"])(_e,ve,fe,!1,null,"64debc1e",null));Ee.options.__file="shared/src/components/instances/WpInstance.vue";var ke=Ee.exports,Le=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.appName=window.smc.workplace.selectedApplication,e.selectedInstance={},e.visualType={FULLSCREEN:"fullscreen",FULLSCREENDROP:"fullscreendrop",MOBILE:"mobile",MOBILEDROP:"mobiledrop"},e}return Object(l["a"])(a,[{key:"addInstance",value:function(){if(this.instances.length>6){var e=this.$store.getters["moduleCommonLabels/getLabel"]("notifyNoMoreInstances");window.smc.NotifyComponent.info(e)}else this.onAddInstance?this.onAddInstance():this.createInstanceAction()}},{key:"mounted",value:function(){var e={instanceId:this.$route.query.instanceId,userName:window.smc.workplace.user.username};this.fetchIntancesAction(e)}},{key:"deleteInstance",value:function(e){this.$emit("show-confirm-modal"),this.deleteInstanceId=e}},{key:"selectInstance",value:function(e,t){t&&t.preventDefault(),this.setSelectedMutation(e)}},{key:"updateInstance",value:function(e){var t;if(null===(t=e.instanceName)||void 0===t?void 0:t.length){var a={id:e.instanceId,fieldName:"name",value:e.instanceName};this.updateInstanceAction(a),this.onInstancesChanged()}}},{key:"onConfirmModalAccept",value:function(){if(this.deleteInstanceId){this.deleteInstanceAction(this.deleteInstanceId);var e=this.$store.getters["moduleCommonLabels/getLabel"]("notifyDeleteInstance");window.smc.NotifyComponent.info(e)}}},{key:"onConfirmModalClose",value:function(){delete this.deleteInstanceId}},{key:"onInstancesChanged",value:function(){this.handleInstancesChanged(this.instances)}},{key:"handleInstancesChanged",value:function(e){}},{key:"updatedSelectedInstance",value:function(){this.selectedInstance=this.getSelectedInstance(),this.handleSelectedInstanceChanged({id:this.selectedInstanceId,instance:this.selectedInstance})}},{key:"handleUpdatedRouteInstanceId",value:function(e){var t=+e;isNaN(t)||t===this.selectedInstanceId||this.setSelectedMutation(t)}},{key:"handleSelectedInstanceChanged",value:function(e){var t=e.id;if(t){var a=Object.assign({},this.$route.query);a.instanceId=""+t,this.$router.replace({query:a}).catch((function(e){"NavigationDuplicated"===e.name||e.message.includes("Avoided redundant navigation to current location")||console.log(e)}))}else{var n=Object.assign({},this.$route.query);delete n.instanceId,this.$router.replace({query:n}).catch((function(e){"NavigationDuplicated"===e.name||e.message.includes("Avoided redundant navigation to current location")||console.log(e)}))}}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])()],Le.prototype,"onAddInstance",void 0),Object(d["a"])([Object(m["e"])("instances")],Le.prototype,"onInstancesChanged",null),Object(d["a"])([Object(m["b"])("instances-changed")],Le.prototype,"handleInstancesChanged",null),Object(d["a"])([Object(m["e"])("selectedInstanceId")],Le.prototype,"updatedSelectedInstance",null),Object(d["a"])([Object(m["e"])("$route.query.instanceId")],Le.prototype,"handleUpdatedRouteInstanceId",null),Object(d["a"])([Object(m["b"])("selected-instance-changed")],Le.prototype,"handleSelectedInstanceChanged",null),Le=Object(d["a"])([Object(m["a"])({name:"WpInstances",components:{WpInputBasicModal:he,WpInstance:ke,WpConfirmModal:Ne},directives:{LabelTranslate:J},computed:Object(o["a"])({},Object(p["e"])(b,["selectedInstanceId","instances"])),methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(p["b"])({createInstanceAction:b+"/"+h.actions.CREATE_INSTANCE,updateInstanceAction:b+"/"+h.actions.UPDATE_INSTANCE,deleteInstanceAction:b+"/"+h.actions.DELETE_INSTANCE,fetchIntancesAction:b+"/"+h.actions.FETCH_INSTANCES})),Object(p["d"])({setSelectedMutation:b+"/"+h.mutations.SET_SELECTED_INSTANCE_ID})),Object(p["c"])({getSelectedInstance:b+"/"+h.getters.SELECTED_INSTANCE}))})],Le);var Pe=Le,xe=Pe,Te=Object(T["a"])(xe,B,V,!1,null,"2fa1855c",null);Te.options.__file="shared/src/components/instances/WpInstances.vue";var De,Re=Te.exports,Ae=(a(29),a(10)),qe="showSummaryDialog",Ue="showDiscountDialog",Me="setDiscountApprovalLines",Qe="unsavedChanges",$e="setLoading",Fe="setSettings",We=(De={},Object(I["a"])(De,qe,(function(e,t){e.showSummaryDialog=t})),Object(I["a"])(De,Ue,(function(e,t){e.showDiscountDialog=t})),Object(I["a"])(De,Me,(function(e,t){e.discountApprovalLines=t})),Object(I["a"])(De,Qe,(function(e,t){e.hasUnsavedChanges=t})),Object(I["a"])(De,$e,(function(e,t){e.showLoading=t})),Object(I["a"])(De,Fe,(function(e,t){e.settings=t})),De),Be=We;a(141);function Ve(e){var t="",a=0;for(var n in e)0==a?e[n]&&(t+="".concat(n,"=").concat(e[n])):e[n]&&(t+="&".concat(n,"=").concat(e[n])),a++;return t}function Ge(e,t){var a=Ve(t);return a?"".concat(e,"?").concat(a):e}var He,Ye={WP_COMMONS:{name:"WP_COMMONS",methods:{GET_WAREHOUSES:{name:"getWarehouses",endpoint:function(){return"/customer/warehouse?customerNumber=".concat(arguments.length<=0?void 0:arguments[0],"&customerOrderName=").concat(arguments.length<=1?void 0:arguments[1],"&itemNumber=").concat(arguments.length<=2?void 0:arguments[2],"&orderQuantity=").concat(arguments.length<=3?void 0:arguments[3],"&customerOrderType=").concat(arguments.length<=4?void 0:arguments[4])}},GET_WAREHOUSE_BY_USER:{name:"getWarehouseByUser",endpoint:function(){return"/customer/warehouse/default?customerNumber=".concat(arguments.length<=0?void 0:arguments[0])}},GET_CUSTOMERS:{name:"getCustomers",endpoint:function(){return"/customer?customerName=".concat(arguments.length<=0?void 0:arguments[0])}},GET_USERS:{name:"getUsers",endpoint:function(){return"/users?customerNumber=".concat(arguments.length<=0?void 0:arguments[0],"&customerName=").concat(arguments.length<=1?void 0:arguments[1])}},GET_ITEMS:{name:"getItems",endpoint:function(){return"/itemname?itemName=".concat(arguments.length<=0?void 0:arguments[0])}},GET_MATCHING_ITEMS:{name:"getMatchingItems",endpoint:function(){return"/itemname/matching?customerId=".concat(arguments.length<=0?void 0:arguments[0],"&search=").concat(arguments.length<=1?void 0:arguments[1],"&maxResults=").concat(arguments.length<=2?void 0:arguments[2])}},GET_ASSORTMENT_CODE:{name:"getAssortmentCode",endpoint:function(){return"/customer/assortCode?itemName=".concat(arguments.length<=0?void 0:arguments[0],"&customerNumber=").concat(arguments.length<=1?void 0:arguments[1])}},GET_SALES_PERSON:{name:"getSalesPerson",endpoint:function(){return"/orders/sales-person?salesId=".concat(arguments.length<=0?void 0:arguments[0])}},GET_ORDER_STATUS_LIST:{name:"getOrderStatusList",endpoint:function(){return"/orders/status?language=".concat(arguments.length<=0?void 0:arguments[0],"&code=").concat(arguments.length<=1?void 0:arguments[1])}},GET_ORDER_TYPES:{name:"getOrderTypes",endpoint:function(){return"/orders/types"}},GET_CUSTOMER_ORDER_NUMBERS:{name:"getCustomerOrderNumbers",endpoint:function(){return"/orders/customer-numbers?search=".concat(arguments.length<=0?void 0:arguments[0],"&customerId=").concat(arguments.length<=1?void 0:arguments[1],"&searchField=CUOR&sort=CU_ORN_ASC")}},GET_ORDER_NUMBERS:{name:"getOrderNumbers",endpoint:function(){return"/orders/numbers?search=".concat(arguments.length<=0?void 0:arguments[0],"&customerId=").concat(arguments.length<=1?void 0:arguments[1],"&searchField=ORNO&sort=SMC_ORN_ASC")}},GET_USER_INFO:{name:"getUserInfo",endpoint:function(){var e=arguments.length<=0?void 0:arguments[0];return"/users/".concat(e)}},GET_USER_INFO_BASIC:{name:"getUserInfoBasic",endpoint:function(){return"/customer/info?customerNumber=".concat(arguments.length<=0?void 0:arguments[0])}},GET_QUOTATIONS:{name:"getQuotations",endpoint:function(){return Ge("/quotation",{customerCode:arguments.length<=0?void 0:arguments[0],userCode:arguments.length<=1?void 0:arguments[1],dateFrom:arguments.length<=2?void 0:arguments[2],dateTo:arguments.length<=3?void 0:arguments[3]})}},GET_COMPETITORS:{name:"getCompetitors",endpoint:function(){return Ge("/quotation/competitors",{filterText:arguments.length<=0?void 0:arguments[0]})}},GET_QUOT_CLASSIFICATIONS:{name:"getQuotClassifications",endpoint:function(){return Ge("/quotation/classification",{language:arguments.length<=0?void 0:arguments[0],code:arguments.length<=1?void 0:arguments[1]})}},GET_PREV_APP_NUMBERS:{name:"getPrevAppNumbers",endpoint:function(e){return Ge("/quotation/previousAppNumber",{quotationNumber:e})}},GET_SETTINGS:{name:"getSettings",endpoint:function(){return"/quotation/getEshopSetting"}},GET_CUSTOMER_DEFAULT_DELIVERY_ADDRESS:{name:"getCustomerDeliveryDefaultAddress",endpoint:function(){return"/customer/".concat(arguments.length<=0?void 0:arguments[0],"/address/delivery/default")}},GET_CUSTOMER_DELIVERY_ADDRESSES:{name:"getCustomerDeliveryAddresses",endpoint:function(){return"/customer/".concat(arguments.length<=0?void 0:arguments[0],"/address")}},GET_WAREHOUSE:{name:"getWarehouse",endpoint:function(){return"/customer/".concat(arguments.length<=0?void 0:arguments[0],"/warehouse/").concat(arguments.length<=1?void 0:arguments[1],"?quantity=").concat(arguments.length<=2?void 0:arguments[2])}},CUSTOMER_INFORMATION_WINDOW:{name:"getCustomerInformationWindow",endpoint:function(){return"/customer/".concat(arguments.length<=0?void 0:arguments[0],"/completeInfo")}}}},WP_PRICE_DELIVERY:{name:"WP_PRICE_DELIVERY",methods:{GET_INSTANCES:{name:"getInstances",endpoint:function(){return"/instance?username=".concat(arguments.length<=0?void 0:arguments[0])}},CREATE_INSTANCE:{name:"createInstance",endpoint:function(){return"/instance"}},GET_INSTANCE:{name:"getInstance",endpoint:function(){return"/instance/".concat(arguments.length<=0?void 0:arguments[0])}},EDIT_INSTANCE:{name:"editInstance",endpoint:function(){return"/instance/".concat(arguments.length<=0?void 0:arguments[0])}},DELETE_INSTANCE:{name:"deleteInstance",endpoint:function(){return"/instance/".concat(arguments.length<=0?void 0:arguments[0])}},GET_ITEMS:{name:"getItems",endpoint:function(){return"/item?customerName=".concat(arguments.length<=0?void 0:arguments[0],"&itemName=").concat(arguments.length<=1?void 0:arguments[1],"&warehouse=").concat(arguments.length<=2?void 0:arguments[2],"&quantity=").concat(arguments.length<=3?void 0:arguments[3])}},GET_ITEMS_PAGE:{name:"getItemsPage",endpoint:function(){return(arguments.length<=2?void 0:arguments[2])&&0!==decodeURI(arguments.length<=2?void 0:arguments[2]).trim().length?"/itemTableList?start=".concat(arguments.length<=0?void 0:arguments[0],"&length=").concat(arguments.length<=1?void 0:arguments[1],"&customerNumber=").concat(arguments.length<=2?void 0:arguments[2],"&itemName=").concat(arguments.length<=3?void 0:arguments[3],"&warehouse=").concat(arguments.length<=4?void 0:arguments[4],"&quantity=").concat(arguments.length<=5?void 0:arguments[5],"&pageLanguage=").concat(arguments.length<=6?void 0:arguments[6]):"/itemTableList?start=".concat(arguments.length<=0?void 0:arguments[0],"&length=").concat(arguments.length<=1?void 0:arguments[1],"&itemName=").concat(arguments.length<=3?void 0:arguments[3],"&warehouse=").concat(arguments.length<=4?void 0:arguments[4],"&quantity=").concat(arguments.length<=5?void 0:arguments[5],"&pageLanguage=").concat(arguments.length<=6?void 0:arguments[6])}},GET_STS_AND_CURRENCY:{name:"getSTSAndCurrency",endpoint:function(){return"/user/stsCurrency?customerNumber=".concat(arguments.length<=0?void 0:arguments[0])}},CREATE_ITEM:{name:"createItem",endpoint:function(){return"/item"}},GET_PRICE_AND_DELIVERY:{name:"completeItemPriceDelivery",endpoint:function(){return"/item/pricedelivery"}}}},WP_ORDER_STATUS:{name:"WP_ORDER_STATUS",methods:{GET_INSTANCES:{name:"getInstances",endpoint:function(){return"/instance?username=".concat(arguments.length<=0?void 0:arguments[0])}},CREATE_INSTANCE:{name:"createInstance",endpoint:function(){return"/instance"}},GET_INSTANCE:{name:"getInstance",endpoint:function(){return"/instance/".concat(arguments.length<=0?void 0:arguments[0])}},EDIT_INSTANCE:{name:"editInstance",endpoint:function(){return"/instance/".concat(arguments.length<=0?void 0:arguments[0])}},DELETE_INSTANCE:{name:"deleteInstance",endpoint:function(){return"/instance/".concat(arguments.length<=0?void 0:arguments[0])}},GET_ORDERS:{name:"getOrders",endpoint:function(){return"/orders?customerCode=".concat(arguments.length<=0?void 0:arguments[0],"&userCode=").concat(arguments.length<=1?void 0:arguments[1],"&fromDate=").concat(arguments.length<=2?void 0:arguments[2],"&toDate=").concat(arguments.length<=3?void 0:arguments[3],"&salesPerson=").concat(arguments.length<=4?void 0:arguments[4],"&customerOrderNumber=").concat(arguments.length<=5?void 0:arguments[5],"&orderNumber=").concat(arguments.length<=6?void 0:arguments[6],"&itemName=").concat(arguments.length<=7?void 0:arguments[7],"&fromStatus=").concat(arguments.length<=8?void 0:arguments[8],"&toStatus=").concat(arguments.length<=9?void 0:arguments[9],"&orderType=").concat(arguments.length<=10?void 0:arguments[10],"&cfmDeliveryFromDate=").concat(arguments.length<=11?void 0:arguments[11],"&cfmDeliveryToDate=").concat(arguments.length<=12?void 0:arguments[12],"&temporalOrders=").concat(arguments.length<=13?void 0:arguments[13],"&start=").concat(arguments.length<=14?void 0:arguments[14],"&length=").concat(arguments.length<=15?void 0:arguments[15],"&sortColumn=").concat(arguments.length<=16?void 0:arguments[16],"&sortDirection=").concat(arguments.length<=17?void 0:arguments[17])}},GET_ORDER_LINE:{name:"getOrderLine",endpoint:function(){return"/orders/".concat(arguments.length<=0?void 0:arguments[0],"/lines/").concat(arguments.length<=1?void 0:arguments[1])}},GET_COMPLEMENTARY_ORDER_LINES:{name:"getComplementaryOrderLines",endpoint:function(){return"/orders/complementary?customerCode=".concat(arguments.length<=0?void 0:arguments[0],"&userCode=").concat(arguments.length<=1?void 0:arguments[1],"&fromDate=").concat(arguments.length<=2?void 0:arguments[2],"&toDate=").concat(arguments.length<=3?void 0:arguments[3],"&salesPerson=").concat(arguments.length<=4?void 0:arguments[4],"&customerOrderNumber=").concat(arguments.length<=5?void 0:arguments[5],"&orderNumber=").concat(arguments.length<=6?void 0:arguments[6],"&itemName=").concat(arguments.length<=7?void 0:arguments[7],"&fromStatus=").concat(arguments.length<=8?void 0:arguments[8],"&toStatus=").concat(arguments.length<=9?void 0:arguments[9],"&orderType=").concat(arguments.length<=10?void 0:arguments[10],"&cfmDeliveryFromDate=").concat(arguments.length<=11?void 0:arguments[11],"&cfmDeliveryToDate=").concat(arguments.length<=12?void 0:arguments[12],"&temporalOrders=").concat(arguments.length<=13?void 0:arguments[13],"&start=").concat(arguments.length<=14?void 0:arguments[14],"&length=").concat(arguments.length<=15?void 0:arguments[15],"&sortColumn=").concat(arguments.length<=16?void 0:arguments[16],"&sortDirection=").concat(arguments.length<=17?void 0:arguments[17])}}}},WP_QUOTATION:{name:"WP_QUOTATION",methods:{GET_INSTANCES:{name:"getInstances",endpoint:function(){return"/instance?username=".concat(arguments.length<=0?void 0:arguments[0])}},CREATE_INSTANCE:{name:"createInstance",endpoint:function(){return"/instance"}},GET_INSTANCE:{name:"getInstance",endpoint:function(){return"/instance/".concat(arguments.length<=0?void 0:arguments[0])}},EDIT_INSTANCE:{name:"editInstance",endpoint:function(){return"/instance/".concat(arguments.length<=0?void 0:arguments[0])}},DELETE_INSTANCE:{name:"deleteInstance",endpoint:function(){return"/instance/".concat(arguments.length<=0?void 0:arguments[0])}},LOAD_NEW_INSTANCE:{name:"loadNewInstance",endpoint:function(){return"/instance/load/".concat(arguments.length<=0?void 0:arguments[0])}},GET_QUOTATION_LINES:{name:"getQuotationLines",endpoint:function(){return"/instance/".concat(arguments.length<=0?void 0:arguments[0],"/line")}},ADD_QUOTATION_LINE:{name:"addQuotationLine",endpoint:function(){return"/instance/".concat(arguments.length<=0?void 0:arguments[0],"/line")}},EDIT_QUOTATION_LINE:{name:"editQuotationLine",endpoint:function(){return"/instance/line/".concat(arguments.length<=0?void 0:arguments[0])}},DELETE_QUOTATION_LINE:{name:"deleteQuotationLine",endpoint:function(){return"/instance/line/".concat(arguments.length<=0?void 0:arguments[0])}},GET_QUOTATION_LINE_INFO:{name:"getQuotationLineInfo",endpoint:function(){return"/instance/line/itemData?customerCode=".concat(arguments.length<=0?void 0:arguments[0],"&itemName=").concat(arguments.length<=1?void 0:arguments[1],"&quantity=").concat(arguments.length<=2?void 0:arguments[2])}},PRINT_QUOTATION:{name:"printQuotation",endpoint:function(e){return Ge("/instance/print",{quotationNumber:e})}},PRINT_DISCOUNTS:{name:"printDiscounts",endpoint:function(e){return Ge("/instance/print/discounts",{quotationNumber:e})}},QUOTATION_SUBMIT:{name:"submitQuotation",endpoint:function(){return"/quotation/quotationSubmit"}},GET_ASYNC_SUBMIT_RESPONSE:{name:"getSubmitResponse",endpoint:function(){return"/asyncsubmit/".concat(arguments.length<=0?void 0:arguments[0],"/").concat(arguments.length<=1?void 0:arguments[1])}},DELETE_ASYNC_SUBMIT_RESPONSE:{name:"deleteSubmitResponse",endpoint:function(){return"/asyncsubmit/".concat(arguments.length<=0?void 0:arguments[0],"/").concat(arguments.length<=1?void 0:arguments[1])}},DELETE_ALL_ASYNC_SUBMIT_RESPONSE:{name:"deleteAllSubmitResponse",endpoint:function(){return"/asyncsubmit/".concat(arguments.length<=0?void 0:arguments[0])}},ASYNC_SUBMIT_AUTH_PROCESS:{name:"asyncSubmitAuthProcess",endpoint:function(){return"/quotation/asyncSubmitAuth"}},ASYNC_SUBMIT_TEMP_QUOT_PROCESS:{name:"asyncSubmitTempQuotationProcess",endpoint:function(){return"/quotation/asyncSubmitTempQuotation"}},ASYNC_SUBMIT_FINAL_QUOT_PROCESS:{name:"asyncSubmitFinalQuotationProcess",endpoint:function(){return"/quotation/asyncSubmitFinalQuotation"}},ASYNC_SUBMIT_APPROVE_QUOT_PROCESS:{name:"asyncSubmitApproveQuotationProcess",endpoint:function(){return"/quotation/asyncSubmitApproveQuotation"}},ASYNC_SUBMIT_REFRESH_QUOT_PROCESS:{name:"asyncSubmitRefreshQuotationProcess",endpoint:function(){return"/quotation/asyncSubmitRefreshQuotation/".concat(arguments.length<=0?void 0:arguments[0])}},PRINT_APPROVAL:{name:"printApproval",endpoint:function(){return"/quotation/".concat(arguments.length<=0?void 0:arguments[0],"/print/approval")}}}},WP_ORDER_ENTRY:{name:"WP_ORDER_ENTRY",methods:{GET_INSTANCES:{name:"getInstances",endpoint:function(){return"/instance?username=".concat(arguments.length<=0?void 0:arguments[0])}},CREATE_INSTANCE:{name:"createInstance",endpoint:function(){return"/instance"}},GET_INSTANCE:{name:"getInstance",endpoint:function(){return"/instance/".concat(arguments.length<=0?void 0:arguments[0])}},EDIT_INSTANCE:{name:"editInstance",endpoint:function(){return"/instance/".concat(arguments.length<=0?void 0:arguments[0])}},DELETE_INSTANCE:{name:"deleteInstance",endpoint:function(){return"/instance/".concat(arguments.length<=0?void 0:arguments[0])}},CREATE_ORDER:{name:"createOrder",endpoint:function(){return"/instance/".concat(arguments.length<=0?void 0:arguments[0],"/create-order")}},GET_INSTANCE_SUMMARY:{name:"getInstanceSummary",endpoint:function(){return"/instance/summary"}},GET_INSTANCE_LINES:{name:"getInstanceLines",endpoint:function(){return"/instance/".concat(arguments.length<=0?void 0:arguments[0],"/line")}},CREATE_INSTANCE_LINE:{name:"createInstanceLine",endpoint:function(){return"/instance/".concat(arguments.length<=0?void 0:arguments[0],"/line")}},GET_INSTANCE_LINE:{name:"getInstanceLine",endpoint:function(){return"/instance/".concat(arguments.length<=0?void 0:arguments[0],"/line/").concat(arguments.length<=1?void 0:arguments[1])}},EDIT_INSTANCE_LINE:{name:"editInstanceLine",endpoint:function(){return"/instance/".concat(arguments.length<=0?void 0:arguments[0],"/line/").concat(arguments.length<=1?void 0:arguments[1])}},DELETE_INSTANCE_LINE:{name:"deleteInstanceLine",endpoint:function(){return"/instance/".concat(arguments.length<=0?void 0:arguments[0],"/line/").concat(arguments.length<=1?void 0:arguments[1])}},DELETE_INSTANCE_LINES:{name:"deleteInstanceLines",endpoint:function(){return"/instance/".concat(arguments.length<=0?void 0:arguments[0],"/line")}},DELETE_INSTANCE_LINES_BY:{name:"deleteInstanceLinesBy",endpoint:function(){return"/instance/".concat(arguments.length<=0?void 0:arguments[0],"/line/by?userCode=").concat(arguments.length<=1?void 0:arguments[1],"&customerOrderNumber=").concat(arguments.length<=2?void 0:arguments[2])}}}}},Je=(a(76),a(78),a(109)),ze=a.n(Je),Ke=function(){function e(){Object(r["a"])(this,e)}return Object(l["a"])(e,null,[{key:"send",value:function(e){var t=window.smc.workplace.csrf;return ze()({method:"post",url:window.smc.workplace.channel+"/consumer-proxy",data:e,headers:{"Content-Type":"multipart/form-data","X-CSRF-Token":t},withCredentials:!0})}}]),e}(),Ze=function(){function e(t,a,n,i){Object(r["a"])(this,e),this.serviceId=void 0===t?"":t,this.method=void 0===a?"":a,this.relativeUri=void 0===n?"":n,this.body=void 0===i?JSON.parse("{}"):i}return Object(l["a"])(e,[{key:"getServiceId",get:function(){return this.serviceId}},{key:"setServiceId",set:function(e){this.serviceId=e}},{key:"getMethod",get:function(){return this.method}},{key:"setMethod",set:function(e){this.method=e}},{key:"getRelativeUri",get:function(){return this.relativeUri}},{key:"setRelativeUri",set:function(e){this.relativeUri=e}},{key:"getBody",get:function(){return this.body}},{key:"setBody",set:function(e){this.body=e}}]),e}(),Xe=10,et=50,tt=0,at={call:function(e,t,a,n){var i=arguments;return Object(Ae["a"])(regeneratorRuntime.mark((function s(){var o,r,l,c,u,d,m;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:for(o=i.length,r=new Array(o>4?o-4:0),l=4;l<o;l++)r[l-4]=i[l];return console.log("[service:".concat(e.name,",method:").concat(t.name,",httpMethod:").concat(a,",body:").concat(n,",args:").concat(r,"]")),c=[],r.forEach((function(e){"number"===typeof e||e||(e=""),c.push(encodeURIComponent(e))})),u=t.endpoint.apply(t,c),d=null===n?JSON.parse("{}"):n,m=new Ze(e.name,a,u,d),s.abrupt("return",new Promise((function(e,t){var a=!1,n=setInterval((function(){tt<Xe&&!a&&(tt++,a=!0,Ke.send(m).then((function(t){clearInterval(n),e(t.data)})).catch((function(e){403===e.response.status?window.location.href=""===window.smc.workplace.channel?"/":window.smc.workplace.channel:(clearInterval(n),t(e))})).finally((function(){tt=Math.max(0,tt-1),a=!1})))}),et)})));case 8:case"end":return s.stop()}}),s)})))()}},nt=a(11),it=Ye.WP_COMMONS,st=(He={},Object(I["a"])(He,it.methods.GET_WAREHOUSES.name,(function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return at.call.apply(at,[it,it.methods.GET_WAREHOUSES,nt["a"].GET,null].concat(t,["","",""]))})),Object(I["a"])(He,it.methods.GET_WAREHOUSE_BY_USER.name,(function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return at.call.apply(at,[it,it.methods.GET_WAREHOUSE_BY_USER,nt["a"].GET,null].concat(t))})),Object(I["a"])(He,it.methods.GET_CUSTOMERS.name,(function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return at.call.apply(at,[it,it.methods.GET_CUSTOMERS,nt["a"].GET,null].concat(t))})),Object(I["a"])(He,it.methods.GET_USERS.name,(function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return at.call.apply(at,[it,it.methods.GET_USERS,nt["a"].GET,null].concat(t))})),Object(I["a"])(He,it.methods.GET_ITEMS.name,(function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return at.call.apply(at,[it,it.methods.GET_ITEMS,nt["a"].GET,null].concat(t))})),Object(I["a"])(He,it.methods.GET_ASSORTMENT_CODE.name,(function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return at.call.apply(at,[it,it.methods.GET_ASSORTMENT_CODE,nt["a"].GET,null].concat(t))})),Object(I["a"])(He,it.methods.GET_SALES_PERSON.name,(function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return at.call.apply(at,[it,it.methods.GET_SALES_PERSON,nt["a"].GET,null].concat(t))})),Object(I["a"])(He,it.methods.GET_ORDER_STATUS_LIST.name,(function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return at.call.apply(at,[it,it.methods.GET_ORDER_STATUS_LIST,nt["a"].GET,null].concat(t))})),Object(I["a"])(He,it.methods.GET_ORDER_TYPES.name,(function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return at.call.apply(at,[it,it.methods.GET_ORDER_TYPES,nt["a"].GET,null].concat(t))})),Object(I["a"])(He,it.methods.GET_CUSTOMER_ORDER_NUMBERS.name,(function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return at.call.apply(at,[it,it.methods.GET_CUSTOMER_ORDER_NUMBERS,nt["a"].GET,null].concat(t))})),Object(I["a"])(He,it.methods.GET_ORDER_NUMBERS.name,(function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return at.call.apply(at,[it,it.methods.GET_ORDER_NUMBERS,nt["a"].GET,null].concat(t))})),Object(I["a"])(He,it.methods.GET_QUOTATIONS.name,(function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return at.call.apply(at,[it,it.methods.GET_QUOTATIONS,nt["a"].GET,null].concat(t))})),Object(I["a"])(He,"getUserInfo",(function(e){return at.call(it,it.methods.GET_USER_INFO,nt["a"].GET,null,e)})),Object(I["a"])(He,"getUserInfoBasic",(function(e){return at.call(it,it.methods.GET_USER_INFO_BASIC,nt["a"].GET,null,e)})),Object(I["a"])(He,"getCompetitors",(function(e){return at.call(it,it.methods.GET_COMPETITORS,nt["a"].GET,null,e)})),Object(I["a"])(He,"getQuotClassList",(function(e){return at.call(it,it.methods.GET_QUOT_CLASSIFICATIONS,nt["a"].GET,null,e)})),Object(I["a"])(He,"getPrevAppNumbers",(function(e){return at.call(it,it.methods.GET_PREV_APP_NUMBERS,nt["a"].GET,null,e)})),Object(I["a"])(He,"getSettings",(function(){return at.call(it,it.methods.GET_SETTINGS,nt["a"].GET)})),Object(I["a"])(He,"getCustomerDefaultDeliveryAddress",(function(e){return at.call(it,it.methods.GET_CUSTOMER_DEFAULT_DELIVERY_ADDRESS,nt["a"].GET,null,e)})),Object(I["a"])(He,"getCustomerDeliveryAddresses",(function(e){return at.call(it,it.methods.GET_CUSTOMER_DELIVERY_ADDRESSES,nt["a"].GET,null,e)})),Object(I["a"])(He,"getWarehouse",(function(e,t,a){return at.call(it,it.methods.GET_WAREHOUSE,nt["a"].GET,null,e,t,a)})),Object(I["a"])(He,"getCustomerInformationWindow",(function(e){return at.call(it,it.methods.CUSTOMER_INFORMATION_WINDOW,nt["a"].GET,null,e)})),Object(I["a"])(He,"getMatchingItems",(function(e,t,a){return at.call(it,it.methods.GET_MATCHING_ITEMS,nt["a"].GET,null,e,t,a)})),He),ot=Ye.WP_QUOTATION;function rt(e){return Object.assign({},e,{fromDate:new Date(e.fromDate),toDate:new Date(e.toDate),startDate:new Date(e.startDate),validDate:new Date(e.validDate),followUpDate:e.followUpDate&&new Date(e.followUpDate)})}function lt(e){var t=(e.instanceLines||[]).map((function(e){return Object.assign(e,{isLoading:!1})}));return Object.assign(e,{instanceLines:t})}var ct,ut={getInstances:function(e){return at.call(ot,ot.methods.GET_INSTANCES,nt["a"].GET,null,e).then((function(e){return e.map(rt).map(lt)}))},createInstance:function(e){return at.call(ot,ot.methods.CREATE_INSTANCE,nt["a"].POST,JSON.parse(e),"").then(rt)},getInstance:function(e){return at.call(ot,ot.methods.GET_INSTANCE,nt["a"].GET,null,e).then((function(e){return lt(rt(e))}))},editInstance:function(e,t){return at.call(ot,ot.methods.EDIT_INSTANCE,nt["a"].PUT,JSON.parse(t),e).then((function(e){return lt(rt(e))}))},deleteInstance:function(e){return at.call(ot,ot.methods.DELETE_INSTANCE,nt["a"].DELETE,null,e)},loadNewInstance:function(e,t){return at.call(ot,ot.methods.LOAD_NEW_INSTANCE,nt["a"].POST,JSON.parse(t),e).then((function(e){return lt(rt(e))}))},getQuotationLines:function(e){return at.call(ot,ot.methods.GET_QUOTATION_LINES,nt["a"].GET,null,e)},addQuotationLine:function(e,t){return at.call(ot,ot.methods.ADD_QUOTATION_LINE,nt["a"].POST,JSON.parse(t),e)},editQuotationLine:function(e,t){return at.call(ot,ot.methods.EDIT_QUOTATION_LINE,nt["a"].PUT,JSON.parse(t),e)},deleteQuotationLine:function(e){return at.call(ot,ot.methods.DELETE_QUOTATION_LINE,nt["a"].DELETE,null,e)},getQuotationLineInfo:function(e,t,a){return at.call(ot,ot.methods.GET_QUOTATION_LINE_INFO,nt["a"].GET,null,e,t,a)},printQuotation:function(e){return at.call(ot,ot.methods.PRINT_QUOTATION,nt["a"].POST,null,e)},printDiscounts:function(e){return at.call(ot,ot.methods.PRINT_DISCOUNTS,nt["a"].POST,null,e)},quotationSubmit:function(e){return at.call(ot,ot.methods.QUOTATION_SUBMIT,nt["a"].POST,JSON.parse(JSON.stringify(e)),"")},getSubmitResponse:function(e,t){return at.call(ot,ot.methods.GET_ASYNC_SUBMIT_RESPONSE,nt["a"].GET,null,e,t)},deleteSubmitResponse:function(e,t){return at.call(ot,ot.methods.DELETE_ASYNC_SUBMIT_RESPONSE,nt["a"].DELETE,null,e,t)},deleteAllSubmitResponse:function(e){return at.call(ot,ot.methods.DELETE_ALL_ASYNC_SUBMIT_RESPONSE,nt["a"].DELETE,null,e)},submitAuthProcess:function(e){return at.call(ot,ot.methods.ASYNC_SUBMIT_AUTH_PROCESS,nt["a"].POST,JSON.parse(JSON.stringify(e)),"")},submitTempQuotationProcess:function(e){return at.call(ot,ot.methods.ASYNC_SUBMIT_TEMP_QUOT_PROCESS,nt["a"].POST,JSON.parse(JSON.stringify(e)),"")},submitFinalQuotationProcess:function(e){return at.call(ot,ot.methods.ASYNC_SUBMIT_FINAL_QUOT_PROCESS,nt["a"].POST,JSON.parse(JSON.stringify(e)),"")},submitApproveQuotationProcess:function(e){return at.call(ot,ot.methods.ASYNC_SUBMIT_APPROVE_QUOT_PROCESS,nt["a"].POST,JSON.parse(JSON.stringify(e)),"")},refreshQuotationProcess:function(e,t){return at.call(ot,ot.methods.ASYNC_SUBMIT_REFRESH_QUOT_PROCESS,nt["a"].POST,JSON.parse(JSON.stringify(e)),t)},printApprovalWindow:function(e){return at.call(ot,ot.methods.PRINT_APPROVAL,nt["a"].GET,null,e)}},dt="fetchSettings",mt="searchQuotations",pt="printQuotation",bt="printDiscounts",ht=(ct={},Object(I["a"])(ct,dt,(function(e){return Object(Ae["a"])(regeneratorRuntime.mark((function t(){var a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.state,n=e.commit,a.settings){t.next=16;break}return n($e,!0),t.prev=3,t.next=6,st.getSettings();case 6:i=t.sent,n(Fe,{salesPersonEditable:i.possibleChangeSalesman,quotationFollowUp:i.quotationFollowUp,defaultQuotValidDays:+i.defaultValueValidityQuot}),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](3),console.error(t.t0);case 13:return t.prev=13,n($e,!1),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[3,10,13,16]])})))()})),Object(I["a"])(ct,mt,(function(e,t){return Object(Ae["a"])(regeneratorRuntime.mark((function a(){var n,i,s,o,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.commit,i=t.customerCode,s=t.userCode,o=t.startDate,r=t.validDate,n($e,!0),a.prev=3,a.next=6,st.getQuotations(i,s,o,r);case 6:return a.abrupt("return",a.sent);case 7:return a.prev=7,n($e,!1),a.finish(7);case 10:case"end":return a.stop()}}),a,null,[[3,,7,10]])})))()})),Object(I["a"])(ct,pt,(function(e,t){return Object(Ae["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.commit,n($e,!0),a.prev=2,a.next=5,ut.printQuotation(t);case 5:return a.prev=5,n($e,!1),a.finish(5);case 8:case"end":return a.stop()}}),a,null,[[2,,5,8]])})))()})),Object(I["a"])(ct,bt,(function(e,t){return Object(Ae["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.commit,n($e,!0),a.prev=2,a.next=5,ut.printDiscounts(t);case 5:return a.prev=5,n($e,!1),a.finish(5);case 8:case"end":return a.stop()}}),a,null,[[2,,5,8]])})))()})),ct),vt=ht,ft=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.firstLoadDone=!1,e}return Object(l["a"])(a,[{key:"mounted",value:function(){this.loadSettings()}},{key:"onAddInstance",value:function(){this.setSelectedInstance()}},{key:"handleSelectedInstanceChange",value:function(e){if(null==e.id&&this.hasUnsavedChanges){var t=this.$store.getters["moduleCommonLabels/getLabel"]("lostUnsavedChanges")||"Unsaved changes lost";window.smc.NotifyComponent.warn(t),this.unsavedChanges(!1)}e.id&&"/"!==this.$route.path?this.$router.push("/?instanceId="+e.id):e.id||"/new-instance"===this.$route.path||this.$router.push("/new-instance")}},{key:"handleInstanceChanged",value:function(e){this.updateTopbarMenu(e),this.firstLoadDone||"/new-instance"===this.$route.path||this.$route.query.instanceId||this.selectedInstanceId||!e||(this.instances&&this.instances.length>0?this.setSelectedInstance(this.instances[0].id):this.$router.replace("/new-instance"),this.firstLoadDone=!0)}},{key:"updateTopbarMenu",value:function(e){for(var t="",a=0;a<e.length;a++){var n=e[a];t+='<li><a href="'.concat(window.smc.workplace.urls.quotationSite,"/#/?instanceId=").concat(n.id,'">').concat(n.name,"</a></li>")}var i=document.getElementById("wp-menu-instance-quot");i&&(i.innerHTML=t)}}]),a}(m["d"]);ft=Object(d["a"])([Object(m["a"])({name:"App",components:{ApplicationLauncher:R,WpInstances:Re,WpSpinner:W},methods:Object(o["a"])(Object(o["a"])({},Object(p["d"])({setSelectedInstance:"".concat(b,"/").concat(h.mutations.SET_SELECTED_INSTANCE_ID),unsavedChanges:Qe})),Object(p["b"])({loadSettings:dt})),computed:Object(o["a"])(Object(o["a"])({},Object(p["e"])(["showLoading","hasUnsavedChanges"])),Object(p["e"])(b,["selectedInstanceId","instances"]))})],ft);var gt=ft,Ct=gt,yt=(a(243),Object(T["a"])(Ct,i,s,!1,null,null,null));yt.options.__file="src/App.vue";var Ot=yt.exports,wt=a(144),It=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("WpHeaderQuotation"),a("section",{staticClass:"workspace-main-quotation",attrs:{id:"main-quotation"}},[a("div",{staticClass:"container"},[a("WpInfoQuotation",{attrs:{lines:e.quotationLines,readOnly:e.readOnly},model:{value:e.instanceDiscounts,callback:function(t){e.instanceDiscounts=t},expression:"instanceDiscounts"}}),a("QUTable",{attrs:{quotInstance:e.selectedInstance}})],1)]),a("QUSummaryDialog"),a("QUDiscountApprovalDialog")],1)},Nt=[];It._withStripped=!0;a(50);var jt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"workspace-header-quotation",attrs:{id:"header-quotation"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"info-header-quotation"},[a("div",{staticClass:"carousel slide",attrs:{id:"quotation-info","data-ride":"carousel","data-interval":"false"}},[a("div",{staticClass:"carousel-inner"},[a("div",{staticClass:"carousel-item active"},[e.quotInstance.quotationNumber?a("QUHeaderInfoItem",{attrs:{label:"label:quotationNumber",value:e.quotInstance.quotationNumber}}):e._e(),a("QUHeaderInfoItem",{attrs:{label:"label:quotClassification",value:e.classification}}),a("QUHeaderInfoItem",{attrs:{label:"label:customer",value:e.customerName}}),a("QUHeaderInfoItem",{attrs:{label:"label:user",value:e.userName}}),a("QUHeaderInfoItem",{attrs:{label:"label:salesPerson",value:e.salesPersonName}}),a("QUHeaderInfoItem",{attrs:{label:"label:quotationReason",value:e.quotInstance.reason}}),a("QUHeaderInfoItem",{attrs:{label:"label:status",value:e.quotInstance.userStatus}})],1),a("div",{staticClass:"carousel-item"},[a("QUHeaderInfoItem",{attrs:{label:"label:currency",value:e.currency}}),a("QUHeaderInfoItem",{attrs:{label:"label:startDate",value:e.quotInstance.startDate}}),a("QUHeaderInfoItem",{attrs:{label:"label:validDate",value:e.quotInstance.validDate}}),a("QUHeaderInfoItem",{attrs:{label:"label:competitor",value:e.quotInstance.competitor}}),a("QUHeaderInfoItem",{attrs:{label:"label:discountReason",value:e.quotInstance.discountReason}}),a("QUHeaderInfoItem",{attrs:{label:"label:prevApplicationNum",value:e.quotInstance.previousApplicationNumber}})],1),a("div",{staticClass:"carousel-item"},[a("QUHeaderInfoItem",{attrs:{label:"label:discountRegistration",value:e.discountRegistration}}),a("QUHeaderInfoItem",{attrs:{label:"label:fao",value:e.quotInstance.forAttentionOf}}),a("QUHeaderInfoItem",{attrs:{label:"label:userPotential",value:e.quotInstance.userPotential}}),a("QUHeaderInfoItem",{attrs:{label:"label:followUpDate",value:e.quotInstance.followUpDate}})],1)]),e._m(0),e._m(1)]),a("div",{staticClass:"cardScroll"},[e.quotInstance.quotationNumber?a("QUHeaderInfoItem",{attrs:{label:"label:quotationNumber",value:e.quotInstance.quotationNumber,wrapperStyle:"card"}}):e._e(),a("QUHeaderInfoItem",{attrs:{label:"label:quotClassification",value:e.classification,wrapperStyle:"card"}}),a("QUHeaderInfoItem",{attrs:{label:"label:customerCode",value:e.customerName,wrapperStyle:"card"}}),a("QUHeaderInfoItem",{attrs:{label:"label:userCode",value:e.userName,wrapperStyle:"card"}}),a("QUHeaderInfoItem",{attrs:{label:"label:salesPerson",value:e.salesPersonName,wrapperStyle:"card"}}),a("QUHeaderInfoItem",{attrs:{label:"label:quotationReason",value:e.quotInstance.reason,wrapperStyle:"card"}}),a("QUHeaderInfoItem",{attrs:{label:"label:status",value:e.quotInstance.userStatus,wrapperStyle:"card"}}),a("QUHeaderInfoItem",{attrs:{label:"label:currency",value:e.currency,wrapperStyle:"card"}}),a("QUHeaderInfoItem",{attrs:{label:"label:startDate",value:e.quotInstance.startDate,wrapperStyle:"card"}}),a("QUHeaderInfoItem",{attrs:{label:"label:validDate",value:e.quotInstance.validDate,wrapperStyle:"card"}}),a("QUHeaderInfoItem",{attrs:{label:"label:competitor",value:e.quotInstance.competitor,wrapperStyle:"card"}}),a("QUHeaderInfoItem",{attrs:{label:"label:discountReason",value:e.quotInstance.discountReason,wrapperStyle:"card"}}),a("QUHeaderInfoItem",{attrs:{label:"label:prevApplicationNum",value:e.quotInstance.previousApplicationNumber,wrapperStyle:"card"}}),a("QUHeaderInfoItem",{attrs:{label:"label:discountRegistration",value:e.discountRegistration,wrapperStyle:"card"}}),a("QUHeaderInfoItem",{attrs:{label:"label:fao",value:e.quotInstance.forAttentionOf,wrapperStyle:"card"}}),a("QUHeaderInfoItem",{attrs:{label:"label:userPotential",value:e.quotInstance.userPotential,wrapperStyle:"card"}}),a("QUHeaderInfoItem",{attrs:{label:"label:followUpDate",value:e.quotInstance.followUpDate,wrapperStyle:"card"}})],1)]),a("div",{staticClass:"botones-header-quotation"},[a("ul",{staticClass:"botones-settings-quotation"},[e.settingsEditable?a("li",[a("a",{attrs:{role:"button",tabindex:"0"},on:{click:e.handleOpenSettings}},[a("i",{staticClass:"fas fa-sliders-h fa-fw"}),a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:settings",expression:"'label:settings'"}]})])]):e._e(),a("li",[a("a",{attrs:{role:"button",tabindex:"0"},on:{click:e.handleOpenHeaderPretext}},[a("i",{staticClass:"far fa-file fa-fw"}),a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:headerPretext",expression:"'label:headerPretext'"}]})])]),e.readOnly?a("li",[a("a",{attrs:{role:"button",tabindex:"0"},on:{click:e.handleOpenQuotation}},[a("i",{staticClass:"fa fa-plus-circle fa-fw"}),a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:newQuotation",expression:"'label:newQuotation'"}]})])]):e._e()]),e.settingsActive?a("div",{staticClass:"popUpHeader popUpSettings",class:{"z-index-fix":e.zIndexFix},attrs:{id:"quotationSettings"}},[a("div",{staticClass:"popUpTitleAndButtons"},[a("div",{staticClass:"popUpTitle"},[a("i",{staticClass:"fas fa-sliders-h"}),a("h3",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:quotationSettings",expression:"'label:quotationSettings'"}]})]),a("div",{staticClass:"popUpButtons"},[a("a",{attrs:{role:"button",tabindex:"0"},on:{click:e.handleCloseSettings}},[a("i",{staticClass:"fas fa-save"}),a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:saveAndClose",expression:"'label:saveAndClose'"}]})]),a("a",{attrs:{role:"button",tabindex:"0"},on:{click:e.handleCloseAny}},[a("i",{staticClass:"fas fa-times"}),a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:close",expression:"'label:close'"}]})])])]),a("div",{staticClass:"popUpBody"},[a("div",{staticClass:"row rowPopUP"},[a("div",{staticClass:"filters col-lg-12 col-md-12 col-sm-12"},[a("WpQuotationFormFields",{attrs:{instance:e.instanceHeader,isFollowUpEnabled:e.settings.quotationFollowUp,isSalesPersonReadonly:!e.settings.salesPersonEditable,defaultValidDays:e.settings.defaultQuotValidDays,readOnly:e.readOnly}})],1)])])]):e._e(),a("div",{staticClass:"hiddenOn popUpHeader popUpHeaderPretext",style:"display: "+(e.headerActive?"block":"none"),attrs:{id:"headerPretext"}},[a("div",{staticClass:"popUpTitleAndButtons"},[a("div",{staticClass:"popUpTitle"},[a("h3",[a("i",{staticClass:"fas fa-file-alt"}),a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:headerPretext",expression:"'label:headerPretext'"}]})])]),a("div",{staticClass:"popUpButtons"},[a("a",{attrs:{role:"button",tabindex:"0"},on:{click:e.handleCloseHeaderPretext}},[a("i",{staticClass:"fas fa-save"}),a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:saveAndClose",expression:"'label:saveAndClose'"}]})]),a("a",{attrs:{role:"button",tabindex:"0"},on:{click:e.handleCloseAny}},[a("i",{staticClass:"fas fa-times"}),a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:close",expression:"'label:close'"}]})])])]),a("div",{staticClass:"popUpBody"},[a("div",{staticClass:"row rowPopUP"},[a("div",{staticClass:"filters col-lg-12 col-md-12 col-sm-12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"item-filter col-lg-12 col-sm-12 mb-4"},[a("div",{staticClass:"inputGroup textareaGroup"},[a("textarea",{staticClass:"form-control textarea-control",attrs:{id:"settings-headerPretext",name:"message",rows:"7",placeholder:this.$store.getters["moduleCommonLabels/getLabel"]("quotationTextAreaPlaceHolder"),readonly:e.readOnly},domProps:{value:e.instanceHeader.headerPretext},on:{input:function(t){return e.lengthControl(e.instanceHeader,t)}}}),a("label",[a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:headerPretext",expression:"'label:headerPretext'"}]}),a("span",{staticClass:"requerido"},[e._v("*")])])])])])])])])])])])])},St=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{staticClass:"carousel-control-prev",attrs:{href:"#quotation-info",role:"button","data-slide":"prev"}},[a("span",{staticClass:"carousel-control-prev-icon fas fa-chevron-left",attrs:{"aria-hidden":"true"}}),a("span",{staticClass:"sr-only"},[e._v("Previous")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{staticClass:"carousel-control-next",attrs:{href:"#quotation-info",role:"button","data-slide":"next"}},[a("span",{staticClass:"carousel-control-next-icon fas fa-chevron-right",attrs:{"aria-hidden":"true"}}),a("span",{staticClass:"sr-only"},[e._v("Next")])])}];jt._withStripped=!0;a(192),a(65);var _t=a(38),Et=a(111);function kt(e){return"00".concat(e).slice(-2)}function Lt(e){return e&&e instanceof Date?"".concat(e.getFullYear(),"-").concat(kt(e.getMonth()+1),"-").concat(kt(e.getDate())):""}function Pt(e){var t;if(e){var a=e.split("-"),n=a[2],i=a[1],s=a[0];if(t=new Date("".concat(s,"-").concat(i,"-").concat(n,"T00:00:00Z")),isNaN(t.getTime()))return}return t}var xt=864e5;function Tt(e){return e*xt}function Dt(e,t){var a=t.value||"";a instanceof Date?e.innerHTML=Lt(a):e.innerHTML=a}var Rt={bind:Dt,update:Dt},At=Rt,qt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"item-filter col-lg-3 col-sm-6 mb-4"},[a("WpCustomerCodeInput",{attrs:{id:"customer-code",required:!0,"icon-class":"fas fa-stream","autoload-on-show":!0,"validation-fields":e.customerInputValidationField,"validation-field-for-value":"customerCode",disabled:e.readOnly||e.isDistributor},on:{blurinput:e.handleCustomerInputBlur},model:{value:e.customerCode,callback:function(t){e.customerCode=t},expression:"customerCode"}})],1),a("div",{staticClass:"item-filter col-lg-3 col-sm-6 mb-4"},[a("WpUserCodeInput",{attrs:{id:"user-code",required:!0,"icon-class":"fas fa-stream","autoload-on-show":!0,"validation-fields":e.userInputValidationField,"validation-field-for-value":"customerCode",disabled:e.readOnly},on:{blurinput:e.handleUserInputBlur},model:{value:e.userCode,callback:function(t){e.userCode=t},expression:"userCode"}})],1),a("div",{staticClass:"item-filter col-lg-3 col-sm-6 mb-4"},[a("WpSalesPersonInput",{attrs:{id:"sales-person",required:!1,"icon-class":"fas fa-stream",label:"label:salesPerson",disabled:e.salesPersonReadOnly,"autoload-on-show":!0},on:{blurinput:e.handleSalesPersonInputBlur},model:{value:e.internalSalesPerson,callback:function(t){e.internalSalesPerson=t},expression:"internalSalesPerson"}})],1),a("div",{staticClass:"item-filter col-lg-3 col-sm-6 mb-4"},[a("WpInput",{attrs:{id:"reason",required:!0,label:"label:quotationReason",disabled:e.readOnly},model:{value:e.instance.reason,callback:function(t){e.$set(e.instance,"reason",t)},expression:"instance.reason"}})],1),a("div",{staticClass:"item-filter col-lg-3 col-sm-6 mb-4"},[a("WpQuotClassSelect",{attrs:{id:"quotation-classification",label:"label:quotClassification",firstOptionLabel:"selectClassificationPlaceholder",required:!0,disabled:e.readOnly},model:{value:e.instance.classification,callback:function(t){e.$set(e.instance,"classification",t)},expression:"instance.classification"}})],1),a("div",{staticClass:"item-filter col-lg-3 col-sm-6 mb-4"},[a("WpInputDateRangeable",{attrs:{id:"date-from",required:!0,label:"label:startDate",minDate:e.today,to:e.validDate,toId:"date-valid",disabled:e.readOnly},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}})],1),a("div",{staticClass:"item-filter col-lg-3 col-sm-6 mb-4"},[a("WpInputDateRangeable",{attrs:{id:"date-valid",required:!0,label:"label:validDate",minDate:e.today,from:e.startDate,fromId:"date-from",disabled:e.readOnly},model:{value:e.validDate,callback:function(t){e.validDate=t},expression:"validDate"}})],1),a("div",{staticClass:"item-filter col-lg-3 col-sm-6 mb-4"},[a("WpCompetitorInput",{attrs:{id:"competitor",required:!0,"icon-class":"fas fa-stream","autoload-on-show":!0,disabled:e.readOnly},model:{value:e.instance.competitor,callback:function(t){e.$set(e.instance,"competitor",t)},expression:"instance.competitor"}})],1),a("div",{staticClass:"item-filter col-lg-3 col-sm-6 mb-4"},[a("WpInput",{attrs:{id:"discount-reason",required:!0,label:"label:discountReason",disabled:e.readOnly},model:{value:e.instance.discountReason,callback:function(t){e.$set(e.instance,"discountReason",t)},expression:"instance.discountReason"}})],1),a("div",{staticClass:"item-filter col-lg-3 col-sm-6 mb-4"},[a("WpPrevAppNumberInput",{attrs:{id:"prev-app-number",required:!1,label:"label:prevApplicationNum","icon-class":"fas fa-stream","autoload-on-show":!0,disabled:e.readOnly},model:{value:e.instance.previousApplicationNumber,callback:function(t){e.$set(e.instance,"previousApplicationNumber",t)},expression:"instance.previousApplicationNumber"}})],1),a("div",{staticClass:"item-filter col-lg-3 col-sm-6 mb-4"},[a("WpBooleanSelect",{attrs:{id:"discount-registration",label:"label:discountRegistration",showEmptyOption:!1,disabled:e.readOnly},model:{value:e.instance.discountRegistration,callback:function(t){e.$set(e.instance,"discountRegistration",t)},expression:"instance.discountRegistration"}})],1),a("div",{staticClass:"item-filter col-lg-3 col-sm-6 mb-4"},[a("WpInput",{attrs:{id:"fao",required:!0,label:"label:fao",disabled:e.readOnly},model:{value:e.instance.forAttentionOf,callback:function(t){e.$set(e.instance,"forAttentionOf",t)},expression:"instance.forAttentionOf"}})],1),a("div",{staticClass:"item-filter col-lg-3 col-sm-6 mb-4"},[a("WpInput",{attrs:{id:"potential-user",required:!e.isPotentialSalesReadOnly,label:"label:userPotential",disabled:e.potentialSalesReadOnly},model:{value:e.instance.userPotential,callback:function(t){e.$set(e.instance,"userPotential",t)},expression:"instance.userPotential"}})],1),a("div",{staticClass:"item-filter col-lg-3 col-sm-6 mb-4"},[a("WpBooleanSelect",{attrs:{id:"followup-registration",label:"label:followUpRegistration",showEmptyOption:!e.isFollowUpEnabled,disabled:!e.isFollowUpEnabled},model:{value:e.instance.followUp,callback:function(t){e.$set(e.instance,"followUp",t)},expression:"instance.followUp"}})],1),a("div",{staticClass:"item-filter col-lg-3 col-sm-6 mb-4"},[a("WpInputDateRangeable",{attrs:{id:"follow-up",required:!1,label:"label:followUpDate",minDate:e.today,disabled:!e.isFollowUpEnabled||!e.instance.followUp},model:{value:e.followUpDate,callback:function(t){e.followUpDate=t},expression:"followUpDate"}})],1)])},Ut=[];qt._withStripped=!0;var Mt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("WpInput",{attrs:{id:e.id,required:e.required,label:e.label,"icon-class":"far fa-calendar-alt",value:e.valueInput,disabled:e.disabled},on:{clicked:e.onButtonClicked,input:e.onChanged}})],1)},Qt=[];Mt._withStripped=!0;var $t=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.valueInput="",e}return Object(l["a"])(a,[{key:"mounted",value:function(){var e=this;this.dateInput=$("#".concat(this.id)),this.dateInput.datepicker({dateFormat:"yy-mm-dd"}).on("change",(function(t){e.valueInput=t.target.value,e.onChanged()})),void 0!==window.basket_lang&&$.datepicker.setDefaults($.datepicker.regional[window.basket_lang]),void 0!==this.value&&null!==this.value&&(this.valueInput=this.value)}},{key:"onButtonClicked",value:function(){this.dateInput.focus()}},{key:"onChanged",value:function(){this.$emit("input",this.valueInput)}},{key:"handleValueChanged",value:function(){this.valueInput=this.value}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])()],$t.prototype,"id",void 0),Object(d["a"])([Object(m["c"])()],$t.prototype,"required",void 0),Object(d["a"])([Object(m["c"])()],$t.prototype,"label",void 0),Object(d["a"])([Object(m["c"])({default:!1})],$t.prototype,"disabled",void 0),Object(d["a"])([Object(m["c"])()],$t.prototype,"value",void 0),Object(d["a"])([Object(m["e"])("value")],$t.prototype,"handleValueChanged",null),$t=Object(d["a"])([Object(m["a"])({name:"WpInputDate",components:{WpInput:re}})],$t);var Ft=$t,Wt=Ft,Bt=Object(T["a"])(Wt,Mt,Qt,!1,null,"08bdd288",null);Bt.options.__file="shared/src/components/forms/basic/WpInputDate.vue";var Vt=Bt.exports,Gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("WpInput",{attrs:{id:e.id,required:e.required,label:e.label,"icon-class":"far fa-calendar-alt",value:e.valueInput,disabled:e.disabled},on:{clicked:e.onButtonClicked,input:e.onChanged,"enter-pressed":e.handleEnter}})],1)},Ht=[];Gt._withStripped=!0;var Yt=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.valueInput="",e}return Object(l["a"])(a,[{key:"mounted",value:function(){var e=this;this.dateInput=$("#".concat(this.id)),this.dateInput.datepicker({dateFormat:"yy-mm-dd"}).on("change",(function(t){e.valueInput=t.target.value,e.onChanged()})),this.setDefaultDatepickerMinDate(),this.setDefaultDatepickerMaxDate(),void 0!==window.basket_lang&&$.datepicker.setDefaults($.datepicker.regional[window.basket_lang]),void 0!==this.value&&null!==this.value&&(this.valueInput=this.value)}},{key:"handleFrom",value:function(e){this.changeFromRanges(this.id,e,this.rangeDays)}},{key:"handleTo",value:function(e){this.changeToRanges(this.id,e,this.rangeDays)}},{key:"changeFromRanges",value:function(e,t,a){this.changeRanges(e,t,a,!0)}},{key:"changeToRanges",value:function(e,t,a){this.changeRanges(e,t,a,!1)}},{key:"changeRanges",value:function(e,t,a,n){var i=this.getDate(t);if($("#".concat(e)).datepicker("option",n?"minDate":"maxDate",i),void 0!==a){var s=this.getDate(t);null!==s&&s.setDate(n?s.getDate()+a:s.getDate()-a),$("#".concat(e)).datepicker("option",n?"maxDate":"minDate",s)}null===i&&(this.setDefaultDatepickerMinDate(),this.setDefaultDatepickerMaxDate())}},{key:"getDate",value:function(e){var t;try{t=$.datepicker.parseDate("yy-mm-dd",e)}catch(a){t=null}return t}},{key:"setDefaultDatepickerMinDate",value:function(){void 0!==this.minDate&&$("#".concat(this.id)).datepicker("option","minDate",this.minDate)}},{key:"setDefaultDatepickerMaxDate",value:function(){void 0!==this.maxDate&&$("#".concat(this.id)).datepicker("option","maxDate",this.maxDate)}},{key:"onButtonClicked",value:function(){this.dateInput.focus()}},{key:"onChanged",value:function(){this.$emit("input",this.valueInput)}},{key:"handleEnter",value:function(){this.$emit("enter-pressed",this.valueInput)}},{key:"handleValueChanged",value:function(){this.valueInput=this.value}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])()],Yt.prototype,"id",void 0),Object(d["a"])([Object(m["c"])()],Yt.prototype,"required",void 0),Object(d["a"])([Object(m["c"])()],Yt.prototype,"label",void 0),Object(d["a"])([Object(m["c"])()],Yt.prototype,"value",void 0),Object(d["a"])([Object(m["c"])()],Yt.prototype,"from",void 0),Object(d["a"])([Object(m["c"])()],Yt.prototype,"fromId",void 0),Object(d["a"])([Object(m["c"])()],Yt.prototype,"to",void 0),Object(d["a"])([Object(m["c"])()],Yt.prototype,"toId",void 0),Object(d["a"])([Object(m["c"])()],Yt.prototype,"rangeDays",void 0),Object(d["a"])([Object(m["c"])()],Yt.prototype,"minDate",void 0),Object(d["a"])([Object(m["c"])()],Yt.prototype,"maxDate",void 0),Object(d["a"])([Object(m["c"])({default:!1})],Yt.prototype,"disabled",void 0),Object(d["a"])([Object(m["e"])("from")],Yt.prototype,"handleFrom",null),Object(d["a"])([Object(m["e"])("to")],Yt.prototype,"handleTo",null),Object(d["a"])([Object(m["e"])("value")],Yt.prototype,"handleValueChanged",null),Yt=Object(d["a"])([Object(m["a"])({name:"WpInputDateRangeable",components:{WpInput:re},directives:{PressedEnter:te}})],Yt);var Jt=Yt,zt=Jt,Kt=Object(T["a"])(zt,Gt,Ht,!1,null,"508e292a",null);Kt.options.__file="shared/src/components/forms/basic/WpInputDateRangeable.vue";var Zt=Kt.exports,Xt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("WpInputModalSearch",{attrs:{config:e.config,id:e.id,required:e.required,disabled:e.disabled,maxlength:6,"search-table-data":e.data,"autoload-on-show":e.autoloadOnShow,"icon-class":"fas fa-stream","search-table-loading-data":e.loading},on:{"update:searchTableData":function(t){e.data=t},"update:search-table-data":function(t){e.data=t},search:e.onSearchApi,selected:e.onSelect,description:e.onSelectDescription,blur:e.onBlurChild,"close-modal":e.onCloseModal,"enter-pressed":e.handleEnter},model:{value:e.internalValue,callback:function(t){e.internalValue=t},expression:"internalValue"}})],1)},ea=[];Xt._withStripped=!0;var ta=a(13),aa=a(12),na={inputLabel:"label:customer",modalTitleLabel:"label:promptCustomer",modalButtonLabel:"label:select",tableLabels:["label:userName","label:userCode","label:address1","label:address2","label:address3","label:address4"],tableFields:["customerName","customerNumber","customerAddress1","customerAddress2","customerAddress3","customerAddress4"],modalSearchFields:[{name:"customerNumber",inForm:!0,required:!1,searchLabel:"label:customer"}],tableDataIndex:"customerNumber",tableDescIndex:"customerName"},ia=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("WpInput",{directives:[{name:"upper-case-field",rawName:"v-upper-case-field",value:e.uppercase,expression:"uppercase"}],attrs:{id:e.id+"-wpinput",disabled:e.disabled,required:e.required,modalWhenDisabled:e.modalWhenDisabled,maxlength:e.maxlength,label:e.config.inputLabel,"icon-class":e.iconClass},on:{input:e.onChange,clicked:e.onButtonClickedOpenModal,blur:e.onBlur,"enter-pressed":e.handleEnter},model:{value:e.internalValue,callback:function(t){e.internalValue=t},expression:"internalValue"}}),a("WpModalSelector",{ref:"modalChild",attrs:{id:e.id+"-wpmodal",title:e.config.modalTitleLabel,"button-label":e.config.modalButtonLabel,"sub-search-label":e.config.subSearchLabel,"search-table-labels":e.config.tableLabels,"search-table-fields":e.config.tableFields,"search-table-search-fields":e.config.modalSearchFields,"search-table-data":e.searchTableData,"search-table-data-index":e.config.tableDataIndex,"search-table-data-indexes":e.config.tableDataIndexes,"search-table-desc-index":e.config.tableDescIndex,"search-table-loading-data":e.searchTableLoadingData,"autoload-on-show":e.autoloadOnShow,uppercase:e.uppercase},on:{"update:searchTableData":function(t){e.searchTableData=t},"update:search-table-data":function(t){e.searchTableData=t},search:e.onSearch,selected:e.onSelect,description:e.onSelectDescription,"close-modal":e.onCloseModal},model:{value:e.internalValue,callback:function(t){e.internalValue=t},expression:"internalValue"}})],1)},sa=[];ia._withStripped=!0;var oa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.showModal?a("transition",{attrs:{name:"modal"}},[a("div",{directives:[{name:"outside-click",rawName:"v-outside-click",value:e.onClose,expression:"onClose"}],ref:"wpModal",staticClass:"modal modal-mask",attrs:{id:e.id,role:"dialog"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h4",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.title,expression:"title"}],staticClass:"modal-title"}),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}},[e._v("×")])]),a("div",{staticClass:"modal-body"},[e._l(e.searchTableSearchFields,(function(t,n){return a("div",{key:n,class:t.inForm?"col-md-4 d-inline-block":""},[t.inForm?a("div",{staticClass:"modal-search"},[a("WpInput",{directives:[{name:"upper-case-field",rawName:"v-upper-case-field",value:e.uppercase,expression:"uppercase"}],attrs:{id:e.id+"-wpinput-"+n,required:t.required,label:t.searchLabel,iconClass:"fas fa-search",value:e.searchValue[n]},on:{input:function(t){return e.handleChange(t,n)},clicked:e.onSearch,"enter-pressed":e.onSearch}})],1):e._e()])})),a("div",{staticClass:"position-relative d-flex search-content"},[a("WpSpinner",{attrs:{id:"modalSpinner",visible:e.searchTableLoadingData}}),e.searchTableData&&e.searchTableData.length>0?a("div",{staticClass:"modal-list scrollbar scrollbar-primary",attrs:{id:e.idTable}},[a("div",{staticClass:"force-overflow-modal"},[a("table",{staticClass:"table table-modal footable footable-1 breakpoint-lg",attrs:{id:"table"}},[a("thead",[a("tr",{staticClass:"footable-header"},[a("th",{staticClass:"footable-first-visible",staticStyle:{display:"table-cell"},attrs:{"data-field":"state","data-radio":"true"}}),e._l(e.searchTableLabels,(function(e,t){return a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e,expression:"item"}],key:t})}))],2)]),a("tbody",e._l(e.searchTableData,(function(t,n){return a("tr",{key:n},[e.searchTableDataIndexes?a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedValue,expression:"selectedValue"}],attrs:{type:"radio"},domProps:{value:e.getMultipleIndexesValue(t),checked:e._q(e.selectedValue,e.getMultipleIndexesValue(t))},on:{change:[function(a){e.selectedValue=e.getMultipleIndexesValue(t)},function(t){return e.setDescription(n)}]}})]):a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedValue,expression:"selectedValue"}],attrs:{type:"radio"},domProps:{value:t[e.searchTableDataIndex],checked:e._q(e.selectedValue,t[e.searchTableDataIndex])},on:{change:[function(a){e.selectedValue=t[e.searchTableDataIndex]},function(t){return e.setDescription(n)}]}})]),e._l(e.searchTableFields,(function(n){return a("td",{key:n},[e._v(" "+e._s(t[n])+" ")])}))],2)})),0)])])]):e._e(),e.searchTableData&&0==e.searchTableData.length&&!e.firstLoad?a("div",{staticClass:"not-found"},[a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:noResultsFound",expression:"'label:noResultsFound'"}]})]):e._e()],1)],2),a("div",{staticClass:"modal-footer"},[a("button",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:close",expression:"'label:close'"}],staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}}),a("button",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.buttonLabel,expression:"buttonLabel"}],staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal",disabled:""===e.selectedValue},on:{click:e.onSelect}})])])])])]):e._e()},ra=[];oa._withStripped=!0;var la=a(66),ca={bind:function(e,t,a){if(void 0===t.value||""!==t.value&&t.value){var n=function(e){var t=e.target.selectionStart;void 0!==e.target.value&&(e.target.value=e.target.value.toUpperCase(),e.target.selectionStart=t,e.target.selectionEnd=t,a.componentInstance?a.componentInstance.$emit("input",e.target.value):a.elm.dispatchEvent(new CustomEvent("input",e.target.value)))};e.addEventListener("input",n)}}},ua=ca,da=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.showModal=!1,e.selectedValue="",e.selectedDescription="",e}return Object(l["a"])(a,[{key:"created",value:function(){this.$parent.$on("show-modal",this.onShowModal),this.$parent.$on("validation-changed",this.onValidationChanged)}},{key:"mounted",value:function(){this.searchValue=new Array(this.searchTableSearchFields.length),this.idTable=this.id+"-table"}},{key:"onShowModal",value:function(){var e=this;this.firstLoad=!0;var t=this.searchTableSearchFields.length;while(t--)this.searchValue[t]="";this.showModal=!0,this.searchTableSearchFields.forEach((function(t,a){var n=t.fieldNameOfValue;if(n&&e.validationFields)for(var i in e.validationFields)n===i&&e.validationFields[i]&&"object"!==Object(la["a"])(e.validationFields[i])&&t.inForm&&(e.searchValue[a]=e.validationFields[i])})),this.autoloadOnShow&&this.onSearch()}},{key:"onSearch",value:function(){var e=this,t=new Array(this.searchTableSearchFields.length);this.searchTableSearchFields&&this.searchTableSearchFields.forEach((function(a,n){var i=a.fieldNameOfValue;if(i&&e.validationFields)for(var s in e.validationFields)i===s&&""!==e.validationFields[s]&&"object"!==Object(la["a"])(e.validationFields[s])&&(a.inForm?t[n]=e.searchValue[n]:t[n]=e.validationFields[s]);else t[n]=e.searchValue[n]}));for(var a=!0,n=0;n<t.length;n++)this.searchTableSearchFields[n].required&&""===t[n]&&(a=!1);if(a){var i=document.getElementById(this.idTable);null!==i&&(i.scrollTop=0,this.selectedValue=""),this.$emit.apply(this,["search"].concat(t))}}},{key:"onSelect",value:function(){var e=this.selectedValue,t=this.selectedDescription;this.onClose(),this.$emit("selected",e),this.$emit("description",t)}},{key:"onClose",value:function(){this.showModal=!1,this.selectedValue="",this.selectedDescription=""}},{key:"onValidationChanged",value:function(e){this.validationFields=e}},{key:"handleChange",value:function(e,t){this.$set(this.searchValue,t,e)}},{key:"setDescription",value:function(e){if(null!=this.searchTableDescIndex&&""!=this.searchTableDescIndex){var t=this.searchTableData[e];this.selectedDescription=t[this.searchTableDescIndex]}}},{key:"getMultipleIndexesValue",value:function(e){var t="";if(this.searchTableDataIndexes){for(var a=0;a<this.searchTableDataIndexes.length;a++)t=t+e[this.searchTableDataIndexes[a]]+" ";t=t.replace(/\s?$/,"")}return t}},{key:"onLoadingStateChanged",value:function(e,t){!e&&t&&(this.firstLoad=!1)}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])()],da.prototype,"id",void 0),Object(d["a"])([Object(m["c"])()],da.prototype,"title",void 0),Object(d["a"])([Object(m["c"])()],da.prototype,"searchLabel",void 0),Object(d["a"])([Object(m["c"])()],da.prototype,"subSearchLabel",void 0),Object(d["a"])([Object(m["c"])()],da.prototype,"searchTableLabels",void 0),Object(d["a"])([Object(m["c"])()],da.prototype,"buttonLabel",void 0),Object(d["a"])([Object(m["c"])()],da.prototype,"searchTableFields",void 0),Object(d["a"])([Object(m["c"])()],da.prototype,"searchTableSearchFields",void 0),Object(d["a"])([Object(m["c"])()],da.prototype,"searchTableData",void 0),Object(d["a"])([Object(m["c"])()],da.prototype,"searchTableDataIndex",void 0),Object(d["a"])([Object(m["c"])()],da.prototype,"searchTableDataIndexes",void 0),Object(d["a"])([Object(m["c"])()],da.prototype,"searchTableDescIndex",void 0),Object(d["a"])([Object(m["c"])({default:!1})],da.prototype,"searchTableLoadingData",void 0),Object(d["a"])([Object(m["c"])({default:!1})],da.prototype,"autoloadOnShow",void 0),Object(d["a"])([Object(m["c"])({default:!1})],da.prototype,"uppercase",void 0),Object(d["a"])([Object(m["c"])()],da.prototype,"value",void 0),Object(d["a"])([Object(m["b"])("close-modal")],da.prototype,"onClose",null),Object(d["a"])([Object(m["e"])("searchTableLoadingData")],da.prototype,"onLoadingStateChanged",null),da=Object(d["a"])([Object(m["a"])({name:"WpModalSelector",components:{WpInput:re,WpSpinner:W},directives:{OutsideClick:ue,LabelTranslate:J,UpperCaseField:ua}})],da);var ma=da,pa=ma,ba=(a(247),Object(T["a"])(pa,oa,ra,!1,null,"32daad9c",null));ba.options.__file="shared/src/components/modals/WpModalSelector.vue";var ha=ba.exports,va=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.internalValue="",e}return Object(l["a"])(a,[{key:"created",value:function(){this.internalValue=this.value,this.$emit("validation-changed",{})}},{key:"mounted",value:function(){this.$parent.$on("validation-changed",this.onValidationChanged)}},{key:"onButtonClickedOpenModal",value:function(){}},{key:"onSearch",value:function(){}},{key:"onSelect",value:function(e){return e}},{key:"onSelectDescription",value:function(e){return e}},{key:"onCloseModal",value:function(){}},{key:"onChange",value:function(e){this.internalValue=e}},{key:"onBlur",value:function(){this.internalValue==this.value||this.$emit("blur",this.internalValue)}},{key:"handleEnter",value:function(e){this.internalValue=e,this.onBlur(),this.$emit("enter-pressed")}},{key:"onValueChanged",value:function(e){this.internalValue=this.value}},{key:"onValidationChanged",value:function(e){this.validationFields=e,this.$emit("validation-changed",e)}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])()],va.prototype,"id",void 0),Object(d["a"])([Object(m["c"])()],va.prototype,"required",void 0),Object(d["a"])([Object(m["c"])()],va.prototype,"iconClass",void 0),Object(d["a"])([Object(m["c"])()],va.prototype,"maxlength",void 0),Object(d["a"])([Object(m["c"])()],va.prototype,"disabled",void 0),Object(d["a"])([Object(m["c"])({default:!1})],va.prototype,"modalWhenDisabled",void 0),Object(d["a"])([Object(m["c"])()],va.prototype,"config",void 0),Object(d["a"])([Object(m["c"])()],va.prototype,"searchTableData",void 0),Object(d["a"])([Object(m["c"])()],va.prototype,"searchTableLoadingData",void 0),Object(d["a"])([Object(m["c"])()],va.prototype,"autoloadOnShow",void 0),Object(d["a"])([Object(m["c"])({default:!1})],va.prototype,"uppercase",void 0),Object(d["a"])([Object(m["c"])()],va.prototype,"value",void 0),Object(d["a"])([Object(m["b"])("show-modal")],va.prototype,"onButtonClickedOpenModal",null),Object(d["a"])([Object(m["b"])("search")],va.prototype,"onSearch",null),Object(d["a"])([Object(m["b"])("selected")],va.prototype,"onSelect",null),Object(d["a"])([Object(m["b"])("description")],va.prototype,"onSelectDescription",null),Object(d["a"])([Object(m["b"])("close-modal")],va.prototype,"onCloseModal",null),Object(d["a"])([Object(m["b"])("value")],va.prototype,"onChange",null),Object(d["a"])([Object(m["e"])("value")],va.prototype,"onValueChanged",null),va=Object(d["a"])([Object(m["a"])({name:"WpInputModalSearch",components:{WpInput:re,WpModalSelector:ha},directives:{UpperCaseField:ua}})],va);var fa=va,ga=fa,Ca=Object(T["a"])(ga,ia,sa,!1,null,"601603c6",null);Ca.options.__file="shared/src/components/forms/input-modal-search/WpInputModalSearch.vue";var ya=Ca.exports,Oa=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.internalValue="",e.data=[],e.loading=!1,e}return Object(l["a"])(a,[{key:"created",value:function(){}},{key:"mounted",value:function(){this.internalValue=this.value;var e={initialValidation:""};this.asyncValidation||(e=this.validationFields),this.$emit("validation-changed",e)}},{key:"onSearch",value:function(e){var t=this;this.loading=!0,e.then((function(e){t.data=e})).finally((function(){t.loading=!1}))}},{key:"onSelect",value:function(e){this.internalValue=e,this.$emit("input",e)}},{key:"onCloseModal",value:function(){this.data=[]}},{key:"handleEnter",value:function(){this.$emit("enter-pressed")}},{key:"onValueChanged",value:function(e){this.internalValue=this.value}},{key:"onValidationFieldsChanged",value:function(e){this.$emit("validation-changed",this.validationFields)}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])()],Oa.prototype,"id",void 0),Object(d["a"])([Object(m["c"])()],Oa.prototype,"required",void 0),Object(d["a"])([Object(m["c"])()],Oa.prototype,"maxlength",void 0),Object(d["a"])([Object(m["c"])()],Oa.prototype,"validationFields",void 0),Object(d["a"])([Object(m["c"])()],Oa.prototype,"asyncValidation",void 0),Object(d["a"])([Object(m["c"])()],Oa.prototype,"autoloadOnShow",void 0),Object(d["a"])([Object(m["c"])()],Oa.prototype,"disabled",void 0),Object(d["a"])([Object(m["c"])({default:!1})],Oa.prototype,"modalWhenDisabled",void 0),Object(d["a"])([Object(m["c"])({default:!1})],Oa.prototype,"uppercase",void 0),Object(d["a"])([Object(m["c"])()],Oa.prototype,"value",void 0),Object(d["a"])([Object(m["e"])("value")],Oa.prototype,"onValueChanged",null),Object(d["a"])([Object(m["e"])("validationFields")],Oa.prototype,"onValidationFieldsChanged",null);var wa=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.config=na,e}return Object(l["a"])(a,[{key:"created",value:function(){Object(ta["a"])(Object(aa["a"])(a.prototype),"created",this).call(this)}},{key:"mounted",value:function(){Object(ta["a"])(Object(aa["a"])(a.prototype),"mounted",this).call(this)}},{key:"onSearchApi",value:function(e){Object(ta["a"])(Object(aa["a"])(a.prototype),"onSearch",this).call(this,st[Ye.WP_COMMONS.methods.GET_CUSTOMERS.name](e))}},{key:"onSelect",value:function(e){Object(ta["a"])(Object(aa["a"])(a.prototype),"onSelect",this).call(this,e)}},{key:"onSelectDescription",value:function(e){this.$emit("description",{type:"customerNumber",value:e})}},{key:"onBlurChild",value:function(e){this.$emit("blurinput",{type:"customerNumber",value:e,instanceParam:"customerCode"})}},{key:"onCloseModal",value:function(){Object(ta["a"])(Object(aa["a"])(a.prototype),"onCloseModal",this).call(this)}},{key:"handleEnter",value:function(){Object(ta["a"])(Object(aa["a"])(a.prototype),"handleEnter",this).call(this)}}]),a}(Oa);wa=Object(d["a"])([Object(m["a"])({name:"WpCustomerCodeInput",components:{WpInputModalSearch:ya}})],wa);var Ia=wa,Na=Ia,ja=Object(T["a"])(Na,Xt,ea,!1,null,"11fcc4f4",null);ja.options.__file="shared/src/components/forms/input-modal-search/WpCustomerCodeInput.vue";var Sa=ja.exports,_a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("WpInputModalSearch",{attrs:{config:e.config,id:e.id,required:e.required,maxlength:10,"search-table-data":e.data,"autoload-on-show":e.autoloadOnShow,disabled:e.disabled,"icon-class":"fas fa-stream","search-table-loading-data":e.loading},on:{"update:searchTableData":function(t){e.data=t},"update:search-table-data":function(t){e.data=t},search:e.onSearchApi,selected:e.onSelect,description:e.onSelectDescription,blur:e.onBlurChild,"close-modal":e.onCloseModal,"enter-pressed":e.handleEnter},model:{value:e.internalValue,callback:function(t){e.internalValue=t},expression:"internalValue"}})],1)},Ea=[];_a._withStripped=!0;var ka={inputLabel:"label:user",modalTitleLabel:"label:promptUser",modalButtonLabel:"label:select",tableLabels:["label:userName","label:userCode","label:address1","label:address2","label:address3","label:address4"],tableFields:["customerName","customerNumber","customerAddress1","customerAddress2","customerAddress3","customerAddress4"],modalSearchFields:[{name:"customerNumber",inForm:!1,required:!1,fieldNameOfValue:"customerCode"},{name:"userName",inForm:!0,required:!1,searchLabel:"label:user"}],tableDataIndex:"customerNumber",tableDescIndex:"customerName"},La=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.config=ka,e}return Object(l["a"])(a,[{key:"created",value:function(){Object(ta["a"])(Object(aa["a"])(a.prototype),"created",this).call(this)}},{key:"mounted",value:function(){Object(ta["a"])(Object(aa["a"])(a.prototype),"mounted",this).call(this)}},{key:"onSearchApi",value:function(){Object(ta["a"])(Object(aa["a"])(a.prototype),"onSearch",this).call(this,st[Ye.WP_COMMONS.methods.GET_USERS.name].apply(st,arguments))}},{key:"onSelect",value:function(e){Object(ta["a"])(Object(aa["a"])(a.prototype),"onSelect",this).call(this,e)}},{key:"onSelectDescription",value:function(e){this.$emit("description",{type:"userNumber",value:e})}},{key:"onBlurChild",value:function(e){this.$emit("blurinput",{type:"userNumber",value:e,instanceParam:"userCode"})}},{key:"onCloseModal",value:function(){Object(ta["a"])(Object(aa["a"])(a.prototype),"onCloseModal",this).call(this)}},{key:"handleEnter",value:function(){Object(ta["a"])(Object(aa["a"])(a.prototype),"handleEnter",this).call(this)}}]),a}(Oa);La=Object(d["a"])([Object(m["a"])({name:"WpUserCodeInput",components:{WpInputModalSearch:ya}})],La);var Pa=La,xa=Pa,Ta=Object(T["a"])(xa,_a,Ea,!1,null,"120988a7",null);Ta.options.__file="shared/src/components/forms/input-modal-search/WpUserCodeInput.vue";var Da=Ta.exports,Ra=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("WpInputModalSearch",{attrs:{config:e.config,id:e.id,required:e.required,disabled:e.disabled,maxlength:6,"search-table-data":e.data,"autoload-on-show":e.autoloadOnShow,"icon-class":"fas fa-stream","search-table-loading-data":e.loading},on:{"update:searchTableData":function(t){e.data=t},"update:search-table-data":function(t){e.data=t},search:e.onSearchApi,selected:e.onSelect,description:e.onSelectDescription,blur:e.onBlurChild,"close-modal":e.onCloseModal,"enter-pressed":e.handleEnter},model:{value:e.internalValue,callback:function(t){e.internalValue=t},expression:"internalValue"}})],1)},Aa=[];Ra._withStripped=!0;var qa={inputLabel:"label:salesPerson",modalTitleLabel:"label:promptSalesPerson",modalButtonLabel:"label:select",tableLabels:["label:salesPersonId","label:salesPersonName","label:description"],tableFields:["code","name","description"],modalSearchFields:[{name:"code",inForm:!0,required:!1,searchLabel:"label:salesPerson"}],tableDataIndex:"code",tableDescIndex:"name"},Ua=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.config=qa,e}return Object(l["a"])(a,[{key:"created",value:function(){Object(ta["a"])(Object(aa["a"])(a.prototype),"created",this).call(this)}},{key:"mounted",value:function(){Object(ta["a"])(Object(aa["a"])(a.prototype),"mounted",this).call(this)}},{key:"onSearchApi",value:function(e){Object(ta["a"])(Object(aa["a"])(a.prototype),"onSearch",this).call(this,st[Ye.WP_COMMONS.methods.GET_SALES_PERSON.name](e))}},{key:"onSelect",value:function(e){Object(ta["a"])(Object(aa["a"])(a.prototype),"onSelect",this).call(this,e)}},{key:"onSelectDescription",value:function(e){this.$emit("description",{type:"salesPerson",value:e})}},{key:"onBlurChild",value:function(e){this.$emit("blurinput",{type:"salesPerson",value:e,instanceParam:"salesPerson"})}},{key:"onCloseModal",value:function(){Object(ta["a"])(Object(aa["a"])(a.prototype),"onCloseModal",this).call(this)}},{key:"handleEnter",value:function(){Object(ta["a"])(Object(aa["a"])(a.prototype),"handleEnter",this).call(this)}}]),a}(Oa);Ua=Object(d["a"])([Object(m["a"])({name:"WpSalesPersonInput",components:{WpInputModalSearch:ya}})],Ua);var Ma=Ua,Qa=Ma,$a=Object(T["a"])(Qa,Ra,Aa,!1,null,"13ce8904",null);$a.options.__file="shared/src/components/forms/input-modal-search/WpSalesPersonInput.vue";var Fa=$a.exports,Wa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("WpInputModalSearch",{attrs:{config:e.config,id:e.id,required:e.required,disabled:e.disabled,maxlength:15,"search-table-data":e.data,"autoload-on-show":e.autoloadOnShow,"icon-class":"fas fa-stream","search-table-loading-data":e.loading},on:{"update:searchTableData":function(t){e.data=t},"update:search-table-data":function(t){e.data=t},search:e.onSearchApi,selected:e.onSelect,description:e.onSelectDescription,blur:e.onBlurChild,"close-modal":e.onCloseModal,"enter-pressed":e.handleEnter},model:{value:e.internalValue,callback:function(t){e.internalValue=t},expression:"internalValue"}})],1)},Ba=[];Wa._withStripped=!0;var Va={inputLabel:"label:competitor",modalTitleLabel:"label:promptCompetitor",modalButtonLabel:"label:select",tableLabels:["label:code","label:name","label:description"],tableFields:["keyValue","name","description"],modalSearchFields:[{name:"description",inForm:!0,required:!1,searchLabel:"label:name"}],tableDataIndex:"keyValue",tableDescIndex:"description"},Ga=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.config=Va,e}return Object(l["a"])(a,[{key:"created",value:function(){Object(ta["a"])(Object(aa["a"])(a.prototype),"created",this).call(this)}},{key:"mounted",value:function(){Object(ta["a"])(Object(aa["a"])(a.prototype),"mounted",this).call(this)}},{key:"onSearchApi",value:function(e){Object(ta["a"])(Object(aa["a"])(a.prototype),"onSearch",this).call(this,st[Ye.WP_COMMONS.methods.GET_COMPETITORS.name](e))}},{key:"onSelect",value:function(e){Object(ta["a"])(Object(aa["a"])(a.prototype),"onSelect",this).call(this,e)}},{key:"onSelectDescription",value:function(e){this.$emit("description",{type:"competitor",value:e})}},{key:"onBlurChild",value:function(e){this.$emit("blurinput",{type:"competitor",value:e,instanceParam:"competitor"})}},{key:"onCloseModal",value:function(){Object(ta["a"])(Object(aa["a"])(a.prototype),"onCloseModal",this).call(this)}},{key:"handleEnter",value:function(){Object(ta["a"])(Object(aa["a"])(a.prototype),"handleEnter",this).call(this)}}]),a}(Oa);Object(d["a"])([Object(m["b"])("input")],Ga.prototype,"onBlurChild",null),Ga=Object(d["a"])([Object(m["a"])({name:"WpCompetitorInput",components:{WpInputModalSearch:ya}})],Ga);var Ha=Ga,Ya=Ha,Ja=Object(T["a"])(Ya,Wa,Ba,!1,null,"f20c621a",null);Ja.options.__file="shared/src/components/forms/input-modal-search/WpCompetitorInput.vue";var za=Ja.exports,Ka=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("wp-select",{attrs:{id:e.id,required:e.required,data:e.data,label:e.label,selectFirstOption:!0,disabled:e.disabled},model:{value:e.internalValue,callback:function(t){e.internalValue=t},expression:"internalValue"}})},Za=[];Ka._withStripped=!0;var Xa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"inputGroup"},[a("select",{staticClass:"selectForm",attrs:{id:e.id,disabled:e.disabled,tabindex:"-1"},on:{change:e.onChanged}},e._l(e.data,(function(t){return a("option",{directives:[{name:"label-translate",rawName:"v-label-translate",value:t.label,expression:"item.label"}],key:t.value,domProps:{value:t.value,selected:e.value===t.value}})})),0),a("label",{attrs:{title:e.translatedLabel}},[a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.label,expression:"label"}]}),e.required?a("span",{staticClass:"requerido"},[e._v(" *")]):e._e()])])},en=[];Xa._withStripped=!0;var tn=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.translatedLabel="",e}return Object(l["a"])(a,[{key:"mounted",value:function(){this.selectFirstOption&&this.$emit("input",this.data[0].value),this.translatedLabel=this.label&&this.label.startsWith("label:")?this.$store.getters["moduleCommonLabels/getLabel"](this.label.slice(6)):this.label}},{key:"onChanged",value:function(e){this.$emit("input",e.target.value)}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])()],tn.prototype,"id",void 0),Object(d["a"])([Object(m["c"])()],tn.prototype,"required",void 0),Object(d["a"])([Object(m["c"])()],tn.prototype,"data",void 0),Object(d["a"])([Object(m["c"])()],tn.prototype,"label",void 0),Object(d["a"])([Object(m["c"])({default:!1})],tn.prototype,"disabled",void 0),Object(d["a"])([Object(m["c"])({default:!1})],tn.prototype,"selectFirstOption",void 0),Object(d["a"])([Object(m["c"])()],tn.prototype,"value",void 0),tn=Object(d["a"])([Object(m["a"])({name:"WpSelect",directives:{LabelTranslate:J}})],tn);var an=tn,nn=an,sn=(a(248),Object(T["a"])(nn,Xa,en,!1,null,"08e08df4",null));sn.options.__file="shared/src/components/forms/select/WpSelect.vue";var on=sn.exports,rn=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.internalValue="false",e.data=[{value:"false",label:"label:no"},{value:"true",label:"label:yes"}],e}return Object(l["a"])(a,[{key:"mounted",value:function(){this.showEmptyOption?("boolean"===typeof this.value?this.internalValue=this.value?"true":"false":this.internalValue="",this.data=[{value:"",label:this.emptyOptionLabel||""}].concat(this.data)):this.internalValue=this.value?"true":"false"}},{key:"handleChange",value:function(e){var t;this.showEmptyOption?"true"===e?t=!0:"false"===e&&(t=!1):t="true"===e,this.$emit("input",t)}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])()],rn.prototype,"id",void 0),Object(d["a"])([Object(m["c"])()],rn.prototype,"required",void 0),Object(d["a"])([Object(m["c"])()],rn.prototype,"label",void 0),Object(d["a"])([Object(m["c"])()],rn.prototype,"value",void 0),Object(d["a"])([Object(m["c"])()],rn.prototype,"showEmptyOption",void 0),Object(d["a"])([Object(m["c"])()],rn.prototype,"emptyOptionLabel",void 0),Object(d["a"])([Object(m["c"])()],rn.prototype,"disabled",void 0),Object(d["a"])([Object(m["e"])("internalValue")],rn.prototype,"handleChange",null),rn=Object(d["a"])([Object(m["a"])({name:"WpBooleanSelect",components:{WpSelect:on}})],rn);var ln=rn,cn=ln,un=Object(T["a"])(cn,Ka,Za,!1,null,"6728a7ac",null);un.options.__file="shared/src/components/forms/select/WpBooleanSelect.vue";var dn=un.exports,mn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("wp-select",{attrs:{id:e.id,required:e.required,data:e.data,label:e.label,disabled:e.disabled},model:{value:e.internalValue,callback:function(t){e.internalValue=t},expression:"internalValue"}})},pn=[];mn._withStripped=!0;a(45),a(62);var bn=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.data=[],e.internalValue="",e}return Object(l["a"])(a,[{key:"mounted",value:function(){this.fetchData(),this.updateData(),this.internalValue=this.value}},{key:"updateData",value:function(){if(this.quotClassList){this.data=this.quotClassList.map((function(e){var t=e.code,a=e.description;return{value:t,label:a}}));var e=this.getLabel(this.firstOptionLabel)||this.firstOptionLabel;this.data.unshift({label:e,value:""})}}},{key:"handleChange",value:function(e){this.$emit("input",e)}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])()],bn.prototype,"id",void 0),Object(d["a"])([Object(m["c"])()],bn.prototype,"required",void 0),Object(d["a"])([Object(m["c"])()],bn.prototype,"label",void 0),Object(d["a"])([Object(m["c"])()],bn.prototype,"value",void 0),Object(d["a"])([Object(m["c"])({default:!1})],bn.prototype,"disabled",void 0),Object(d["a"])([Object(m["c"])({default:""})],bn.prototype,"firstOptionLabel",void 0),Object(d["a"])([Object(m["e"])("quotClassList")],bn.prototype,"updateData",null),Object(d["a"])([Object(m["e"])("internalValue")],bn.prototype,"handleChange",null),bn=Object(d["a"])([Object(m["a"])({name:"WpQuotClassSelect",components:{WpSelect:on},methods:Object(o["a"])({},Object(p["b"])({fetchData:"moduleCommons/fetchQuotClassList"})),computed:Object(o["a"])(Object(o["a"])({},Object(p["e"])("moduleCommons",["quotClassList"])),Object(p["c"])({getLabel:"moduleCommonLabels/getLabel"}))})],bn);var hn=bn,vn=hn,fn=Object(T["a"])(vn,mn,pn,!1,null,"35e0a89e",null);fn.options.__file="shared/src/components/forms/select/WpQuotClassSelect.vue";var gn=fn.exports,Cn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("WpInputModalSearch",{attrs:{config:e.config,id:e.id,required:e.required,disabled:e.disabled,maxlength:15,"search-table-data":e.data,"autoload-on-show":e.autoloadOnShow,"icon-class":"fas fa-stream","search-table-loading-data":e.loading},on:{"update:searchTableData":function(t){e.data=t},"update:search-table-data":function(t){e.data=t},search:e.onSearchApi,selected:e.onSelect,description:e.onSelectDescription,blur:e.onBlurChild,"close-modal":e.onCloseModal,"enter-pressed":e.handleEnter},model:{value:e.internalValue,callback:function(t){e.internalValue=t},expression:"internalValue"}})],1)},yn=[];Cn._withStripped=!0;var On={inputLabel:"label:prevApplicationNum",modalTitleLabel:"label:promptPrevAppNumber",modalButtonLabel:"label:select",tableLabels:["label:prevApplicationNum","label:customer","label:customerName","label:salesId"],tableFields:["quotationNumber","userCode","userName","salesId"],modalSearchFields:[{name:"quotationNumber",inForm:!0,required:!1,searchLabel:"label:previousApplication"}],tableDataIndex:"quotationNumber",tableDescIndex:"quotationNumber"},wn=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.config=On,e}return Object(l["a"])(a,[{key:"created",value:function(){Object(ta["a"])(Object(aa["a"])(a.prototype),"created",this).call(this)}},{key:"mounted",value:function(){Object(ta["a"])(Object(aa["a"])(a.prototype),"mounted",this).call(this)}},{key:"onSearchApi",value:function(e){Object(ta["a"])(Object(aa["a"])(a.prototype),"onSearch",this).call(this,st[Ye.WP_COMMONS.methods.GET_PREV_APP_NUMBERS.name](e))}},{key:"onSelect",value:function(e){Object(ta["a"])(Object(aa["a"])(a.prototype),"onSelect",this).call(this,e)}},{key:"onSelectDescription",value:function(e){this.$emit("description",{type:"previousApplicationNumber",value:e})}},{key:"onBlurChild",value:function(e){this.$emit("blurinput",{type:"previousApplicationNumber",value:e,instanceParam:"previousApplicationNumber"})}},{key:"onCloseModal",value:function(){Object(ta["a"])(Object(aa["a"])(a.prototype),"onCloseModal",this).call(this)}},{key:"handleEnter",value:function(){Object(ta["a"])(Object(aa["a"])(a.prototype),"handleEnter",this).call(this)}}]),a}(Oa);Object(d["a"])([Object(m["b"])("input")],wn.prototype,"onBlurChild",null),wn=Object(d["a"])([Object(m["a"])({name:"WpCompetitorInput",components:{WpInputModalSearch:ya}})],wn);var In=wn,Nn=In,jn=Object(T["a"])(Nn,Cn,yn,!1,null,"e9898ea4",null);jn.options.__file="shared/src/components/forms/input-modal-search/WpPrevAppNumberInput.vue";var Sn=jn.exports,_n=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.today=Lt(new Date),e.customerInputValidationField={customerCode:""},e.userInputValidationField={customerCode:e.instance.customerCode||""},e.internalSalesPerson=e.instance.salesPersonId||"",e.internalPotentialSales=e.instance.userPotential||"",e.startDate=Lt(e.instance.startDate),e.validDate=Lt(e.instance.validDate),e.followUpDate=Lt(e.instance.followUpDate),e.isDistributor=!1,e.salesPersonUpdating=!1,e}return Object(l["a"])(a,[{key:"mounted",value:function(){this.defaultValidDays&&this.instance.startDate&&!this.instance.validDate&&this.onInstanceStartDateChanged(this.instance.startDate),this.isDistributor=window.smc.workplace.user.isDistributor,this.isDistributor&&(this.customerCode=window.smc.workplace.user.username.toUpperCase())}},{key:"onStartDateChanged",value:function(e,t){e!==t&&(this.instance.startDate=Pt(e))}},{key:"onValidDateChanged",value:function(e,t){e!==t&&(this.instance.validDate=Pt(e))}},{key:"onFollowUpDateChanged",value:function(e,t){e!==t&&(this.instance.followUpDate=Pt(e))}},{key:"onValidDaysChanged",value:function(e){var t=this.instance.startDate;if(e&&!this.validDate&&t){var a=new Date(t.getTime()+Tt(e));this.validDate=Lt(a)}}},{key:"onSalesPersonChanged",value:function(e,t){e!==t&&(this.instance.salesPersonId=e)}},{key:"onInstanceStartDateChanged",value:function(e){if(e&&this.defaultValidDays){var t=new Date(e.getTime()+Tt(this.defaultValidDays));this.validDate=Lt(t)}}},{key:"onInstanceFollowUpChanged",value:function(e){e||(this.followUpDate="")}},{key:"handleCustomerInputBlur",value:function(e){var t=e.value;this.customerCode=t}},{key:"handleUserInputBlur",value:function(e){var t=e.value;this.userCode=t}},{key:"handleSalesPersonInputBlur",value:function(e){var t=e.value;this.internalSalesPerson=t}},{key:"updateSalesperson",value:function(){var e=Object(Ae["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=20;break}return this.salesPersonUpdating=!0,e.prev=2,e.next=5,st.getUserInfoBasic(t);case 5:a=e.sent,this.instance.salesPersonId=a.salesManId,this.internalSalesPerson=this.instance.salesPersonId||"",this.instance.userPotential=a.potentialSales,this.internalPotentialSales=this.instance.userPotential||"",this.salesPersonUpdating=!1,e.next=20;break;case 13:e.prev=13,e.t0=e["catch"](2),this.instance.salesPersonId="",this.internalSalesPerson=this.instance.salesPersonId||"",this.instance.userPotential="",this.internalPotentialSales=this.instance.userPotential||"",this.salesPersonUpdating=!1;case 20:case"end":return e.stop()}}),e,this,[[2,13]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"customerCode",get:function(){return this.instance.customerCode||""},set:function(e){this.instance.customerCode=e,this.userInputValidationField={customerCode:e}}},{key:"userCode",get:function(){return this.instance.userCode||""},set:function(e){this.instance.userCode=e,this.updateSalesperson(e)}},{key:"salesPersonReadOnly",get:function(){return this.isSalesPersonReadonly||this.readOnly||this.salesPersonUpdating}},{key:"potentialSalesReadOnly",get:function(){return this.isPotentialSalesReadOnly||this.readOnly}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])({default:function(){return{}}})],_n.prototype,"instance",void 0),Object(d["a"])([Object(m["c"])({default:!1})],_n.prototype,"readOnly",void 0),Object(d["a"])([Object(m["c"])({default:!0})],_n.prototype,"isSalesPersonReadonly",void 0),Object(d["a"])([Object(m["c"])({default:!0})],_n.prototype,"isPotentialSalesReadOnly",void 0),Object(d["a"])([Object(m["c"])({default:!1})],_n.prototype,"isFollowUpEnabled",void 0),Object(d["a"])([Object(m["c"])()],_n.prototype,"defaultValidDays",void 0),Object(d["a"])([Object(m["e"])("startDate")],_n.prototype,"onStartDateChanged",null),Object(d["a"])([Object(m["e"])("validDate")],_n.prototype,"onValidDateChanged",null),Object(d["a"])([Object(m["e"])("followUpDate")],_n.prototype,"onFollowUpDateChanged",null),Object(d["a"])([Object(m["e"])("defaultValidDays",{immediate:!0})],_n.prototype,"onValidDaysChanged",null),Object(d["a"])([Object(m["e"])("internalSalesPerson")],_n.prototype,"onSalesPersonChanged",null),Object(d["a"])([Object(m["e"])("instance.startDate",{deep:!0})],_n.prototype,"onInstanceStartDateChanged",null),Object(d["a"])([Object(m["e"])("instance.followUp")],_n.prototype,"onInstanceFollowUpChanged",null),_n=Object(d["a"])([Object(m["a"])({name:"WpQuotationFormFields",components:{WpInput:re,WpInputDate:Vt,WpInputDateRangeable:Zt,WpCustomerCodeInput:Sa,WpUserCodeInput:Da,WpSalesPersonInput:Fa,WpCompetitorInput:za,WpBooleanSelect:dn,WpQuotClassSelect:gn,WpPrevAppNumberInput:Sn},directives:{LabelTranslate:J}})],_n);var En=_n,kn=En,Ln=Object(T["a"])(kn,qt,Ut,!1,null,null,null);Ln.options.__file="src/components/WpQuotationFormFields.vue";var Pn=Ln.exports,xn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.wrapperClass},[a("p",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.label,expression:"label"}],staticClass:"item-name"}),a("p",{staticClass:"item-value"},[a("span",{directives:[{name:"date-format",rawName:"v-date-format",value:e.value||"&nbsp;",expression:"value || '&nbsp;'"}],attrs:{"data-toggle":"tooltip","data-placement":"top",title:e.title}},[e._v(" "+e._s(e.value)+" ")])])])},Tn=[];xn._withStripped=!0;var Dn=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.wrapperClass="bloqueInfo flex-item",e}return Object(l["a"])(a,[{key:"handleStyleUpdated",value:function(){this.wrapperClass="card"===this.wrapperStyle?"card-content":"bloqueInfo flex-item"}}]),a}(n["a"]);Object(d["a"])([Object(m["c"])()],Dn.prototype,"title",void 0),Object(d["a"])([Object(m["c"])()],Dn.prototype,"label",void 0),Object(d["a"])([Object(m["c"])()],Dn.prototype,"value",void 0),Object(d["a"])([Object(m["c"])({default:"flex"})],Dn.prototype,"wrapperStyle",void 0),Object(d["a"])([Object(m["e"])("wrapperStyle",{immediate:!0})],Dn.prototype,"handleStyleUpdated",null),Dn=Object(d["a"])([Object(m["a"])({name:"QUHeaderInfoItem",directives:{LabelTranslate:J,DateFormat:At}})],Dn);var Rn=Dn,An=Rn,qn=Object(T["a"])(An,xn,Tn,!1,null,null,null);qn.options.__file="src/components/QUHeaderInfoItem.vue";var Un=qn.exports;function Mn(e){return Qn.apply(this,arguments)}function Qn(){return Qn=Object(Ae["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",st.getUserInfoBasic(t));case 1:case"end":return e.stop()}}),e)}))),Qn.apply(this,arguments)}function $n(e){return Fn.apply(this,arguments)}function Fn(){return Fn=Object(Ae["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",st[Ye.WP_COMMONS.methods.GET_SALES_PERSON.name]("").then((function(e){var a;return a=e instanceof Array?e.find((function(e){return e.code===t})):e,a&&a.code===t})));case 1:case"end":return e.stop()}}),e)}))),Fn.apply(this,arguments)}function Wn(e){return Bn.apply(this,arguments)}function Bn(){return Bn=Object(Ae["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",st[Ye.WP_COMMONS.methods.GET_COMPETITORS.name]("").then((function(e){var a;return a=e instanceof Array?e.find((function(e){return e.keyValue===t})):e,a&&a.keyValue===t})));case 1:case"end":return e.stop()}}),e)}))),Bn.apply(this,arguments)}function Vn(e,t,a){return Gn.apply(this,arguments)}function Gn(){return Gn=Object(Ae["a"])(regeneratorRuntime.mark((function e(t,a,n){var i,s,o,r,l,c,u,d,m,p,b,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=[],s=!0,t.customerCode?i.push(Mn(t.customerCode).then((function(e){if(!e||!e.customerName){var t=a("customerCodeFieldInvalid")||"Customer invalid";return window.smc.NotifyComponent.error(t),!1}return!0})).catch((function(e){var t=a("customerCodeFieldInvalid")||"Customer invalid";return window.smc.NotifyComponent.error(t),!1}))):(o=a("customerCodeFieldRequired")||"Customer required",window.smc.NotifyComponent.error(o),s=!1),t.userCode?i.push(Mn(t.userCode).then((function(e){if(!e||!e.customerName){var t=a("userCodeFieldInvalid")||"User invalid";return window.smc.NotifyComponent.error(t),!1}return!0})).catch((function(e){var t=a("customerCodeFieldInvalid")||"Customer invalid";return window.smc.NotifyComponent.error(t),!1}))):(r=a("userCodeFieldRequired")||"User required",window.smc.NotifyComponent.error(r),s=!1),n&&(t.salesPersonId?i.push($n(t.salesPersonId).then((function(e){if(!e){var t=a("salesPersonFieldInvalid")||"Sales Person invalid";window.smc.NotifyComponent.error(t)}return e}))):(l=a("salesPersonFieldRequired")||"Sales Person required",window.smc.NotifyComponent.error(l),s=!1)),t.reason||(c=a("reasonFieldRequired")||"Reason required",window.smc.NotifyComponent.error(c),s=!1),t.classification||(u=a("classificationFieldRequired")||"Classification required",window.smc.NotifyComponent.error(u),s=!1),t.startDate||(d=a("startDateFieldRequired")||"Start Date required",window.smc.NotifyComponent.error(d),s=!1),t.validDate||(m=a("validDateFieldRequired")||"Valid Date required",window.smc.NotifyComponent.error(m),s=!1),t.competitor?i.push(Wn(t.competitor).then((function(e){if(!e){var t=a("competitorFieldInvalid")||"Competitor invalid";return window.smc.NotifyComponent.error(t),!1}return!0}))):(p=a("competitorFieldRequired")||"Competitor required",window.smc.NotifyComponent.error(p),s=!1),t.discountReason||(b=a("discountReasonFieldRequired")||"Discount reason required",window.smc.NotifyComponent.error(b),s=!1),t.forAttentionOf||(h=a("faoFieldRequired")||"FAO equired",window.smc.NotifyComponent.error(h),s=!1),!i.length){e.next=19;break}if(e.t0=s,!e.t0){e.next=18;break}return e.next=17,Promise.all(i).then((function(e){return!e.includes(!1)}));case 17:e.t0=e.sent;case 18:s=e.t0;case 19:return e.abrupt("return",s);case 20:case"end":return e.stop()}}),e)}))),Gn.apply(this,arguments)}function Hn(e,t){var a=!0;if(!e.customerCode){var n=t("customerCodeFieldRequired")||"Customer required";window.smc.NotifyComponent.error(n),a=!1}if(!e.userCode){var i=t("userCodeFieldRequired")||"User required";window.smc.NotifyComponent.error(i),a=!1}if(!e.salesPersonId){var s=t("salesPersonFieldRequired")||"Sales Person required";window.smc.NotifyComponent.error(s),a=!1}if(!e.reason){var o=t("reasonFieldRequired")||"Reason required";window.smc.NotifyComponent.error(o),a=!1}if(!e.startDate){var r=t("startDateFieldRequired")||"Start Date required";window.smc.NotifyComponent.error(r),a=!1}if(e.validDate){var l=new Date(e.validDate.getUTCFullYear(),e.validDate.getUTCMonth(),e.validDate.getUTCDate()),c=new Date((new Date).getUTCFullYear(),(new Date).getUTCMonth(),(new Date).getUTCDate());if(l.getTime()<c.getTime()){var u=t("validDateFieldInvalid")||"Valid Date need to be in the future";window.smc.NotifyComponent.error(u),a=!1}}else{var d=t("validDateFieldRequired")||"Valid Date required";window.smc.NotifyComponent.error(d),a=!1}if(!e.competitor){var m=t("competitorFieldRequired")||"Competitor required";window.smc.NotifyComponent.error(m),a=!1}if(!e.discountReason){var p=t("discountReasonFieldRequired")||"Discount reason required";window.smc.NotifyComponent.error(p),a=!1}if(!e.forAttentionOf){var b=t("faoFieldRequired")||"FAO equired";window.smc.NotifyComponent.error(b),a=!1}return a}a(142);var Yn,Jn,zn,Kn,Zn={getInstances:function(e){return ut.getInstances(e)},editInstance:function(e,t){var a=JSON.stringify(t);return ut.editInstance(e,a)},createInstance:function(e,t){var a=new Date,n=Object.assign({},{id:0,username:window.smc.workplace.user.username,name:e,creationDate:a.toJSON(),modificationDate:a.toJSON(),instanceLines:[]},t),i=JSON.stringify(n);return ut.createInstance(i)},deleteInstance:function(e){return ut.deleteInstance(e)},loadInstance:function(e,t){var a=new Date,n={username:window.smc.workplace.user.username,name:e,creationDate:a.toJSON(),modificationDate:a.toJSON()},i=JSON.stringify(n);return ut.loadNewInstance(t,i)},quotationSubmit:function(e){return ut.quotationSubmit(e)}},Xn="getSettings",ei=Object(I["a"])({},Xn,(function(e){return e.settings||{}})),ti=ei,ai={namespaced:!0,state:{quotClassList:void 0,quotClassListLoading:!1},mutations:{setQuotClassList:function(e,t){e.quotClassList=t},setQuotClassListLoading:function(e,t){e.quotClassListLoading=t}},actions:{fetchQuotClassList:function(e){var t=e.commit,a=e.state;a.quotClassListLoading||(t("setQuotClassListLoading",!0),st.getQuotClassList(window.basket_lang).then((function(e){if(e){var a=e.map((function(e){return Object.assign({},e,{description:"".concat(e.code," - ").concat(e.description)})}));t("setQuotClassList",a)}t("setQuotClassListLoading",!1)})))}},getters:{}},ni={fetchApps:function(){return ze.a.get("https://jsonplaceholder.typicode.com/posts").then((function(e){return e.data}))}},ii={namespaced:!0,state:{apps:[]},mutations:{setApps:function(e,t){e.apps=t}},actions:{fetchApps:function(e){var t=e.commit;return ni.fetchApps().then((function(e){return t("setApps",e)}))}},getters:{getApps:function(e){return e.apps},getCurrentApps:function(){return window.smc.workplace.activeApplications},getSelectedApp:function(){return window.smc.workplace.selectedApplication}}},si={namespaced:!0,state:{},mutations:{},actions:{},getters:{getLabels:function(){return function(){return window.smc.workplace.labels}},getLabel:function(){return function(e){var t=window.smc.workplace.labels[e];return t||e}}}},oi=(a(46),a(194),{fetchQuotationLines:function(e){return ut.getQuotationLines(e)},addQuotationLine:function(e,t){var a=JSON.stringify(t);return ut.addQuotationLine(e,a)},editQuotationLine:function(e,t){var a=JSON.stringify(t);return ut.editQuotationLine(e,a)},deleteQuotationLine:function(e){return ut.deleteQuotationLine(e)},getQuotationLineInfo:function(e,t,a){return ut.getQuotationLineInfo(e,t,a)}}),ri=(Yn={},Object(I["a"])(Yn,h.actions.FETCH_INSTANCES,(function(){})),Object(I["a"])(Yn,h.actions.UPDATE_INSTANCE,(function(){})),Object(I["a"])(Yn,h.actions.UPDATE_SUMMARY,(function(e,t){var a=e.commit,n=t.type,i=t.value,s=t.id;n&&a(h.mutations.UPDATE_SUMMARY,{id:s,summary:Object(I["a"])({},n,i)})})),Object(I["a"])(Yn,h.actions.CREATE_INSTANCE,(function(){})),Object(I["a"])(Yn,h.actions.DELETE_INSTANCE,(function(){})),Yn),li=function(e,t){var a=e.selectedInstanceId,n=e.instances,i=t||a;if(i){var s=e.instances.map((function(e){return e.id})).indexOf(i);return null!==s&&s>=0?n[s]:{}}return{}},ci=(Jn={},Object(I["a"])(Jn,h.getters.SELECTED_INSTANCE,(function(e){return li(e,null)})),Object(I["a"])(Jn,h.getters.INSTANCES,(function(e){return e.instances})),Jn),ui=(a(138),a(112)),di=(zn={},Object(I["a"])(zn,h.mutations.UPDATE_SUMMARY,(function(e,t){var a=e.instances,i=void 0===a?[]:a,s=t.id,o=t.summary,r=li(e,s),l=r.summaries||{};Object.assign(r,{summaries:Object.assign(l,o)});var c=e.instances.map((function(e){return e.id})).indexOf(r.id);void 0!==c&&(i[c]=r,n["a"].set(e,"instances",Object(ui["a"])(i)))})),Object(I["a"])(zn,h.mutations.UPDATE_PROPERTY,(function(e,t){var a,n=t.fieldName,i=t.value,s=t.id,o=e.instances,r=void 0===o?[]:o,l=r.map((function(e){return e.id})).indexOf(s);r[l][n]=i,Object.assign(e,{instances:r}),s===(null===(a=e.selectedInstance)||void 0===a?void 0:a.id)&&Object.assign(e,{selectedInstance:r[l]})})),Object(I["a"])(zn,h.mutations.UPDATE_INSTANCE,(function(e,t){var a=e.selectedInstanceId,i=e.instances;if(a&&i){var s=e.instances.map((function(e){return e.id})).indexOf(a);void 0!==s&&(i[s]=t,n["a"].set(e,"instances",Object(ui["a"])(i)))}})),Object(I["a"])(zn,h.mutations.SET_INSTANCES,(function(e,t){return n["a"].set(e,"instances",Object(ui["a"])(t))})),Object(I["a"])(zn,h.mutations.NULLIFY_SELECTED,(function(e){return n["a"].set(e,"selectedInstanceId",null)})),Object(I["a"])(zn,h.mutations.DELETE_INSTANCE,(function(e,t){var a=e.instances.map((function(e){return e.id})).indexOf(t);e.instances.splice(a,1)})),Object(I["a"])(zn,h.mutations.CREATE_INSTANCES,(function(e,t){return e.instances.push(t)})),Object(I["a"])(zn,h.mutations.SET_SELECTED_INSTANCE_ID,(function(e,t){return Object.assign(e,{selectedInstanceId:t})})),zn),mi=function(e,t,a){var n,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return n={},Object(I["a"])(n,h.actions.FETCH_INSTANCES,(function(n,o){var r,l=n.commit,c=o.instanceId,u=o.userName;e.getInstances(u).then((function(e){return l(h.mutations.SET_INSTANCES,e),e})).then((function(e){return e.forEach((function(e){t(e.id,"init")})),e})).then((function(n){if(""!=c){if(n&&n.length)if(i&&isNaN(parseInt(c,10)))l(h.mutations.SET_SELECTED_INSTANCE_ID,n[0].id);else if(void 0!==c){var o=n.map((function(e){return e.id})).indexOf(parseInt(c,10));l(h.mutations.SET_SELECTED_INSTANCE_ID,-1==o?n[0].id:n[o].id)}}else if(s){var u=n&&n.length?n.length+1:1;e.createInstance(a+" "+u).then((function(e){return t(e.id,"create"),r=e.id,e})).then((function(e){return l(h.mutations.CREATE_INSTANCES,e)})).then((function(){return l(h.mutations.SET_SELECTED_INSTANCE_ID,r)}))}})).catch((function(e){console.log(e)}))})),Object(I["a"])(n,h.actions.UPDATE_INSTANCE,(function(t,a){var n=t.commit,i=t.state,s=a.id,o=a.fieldName,r=a.value,l=li(i,s),c=Object.assign(l,Object(I["a"])({},o,r));return e.editInstance(s,c).then((function(){return n(h.mutations.UPDATE_PROPERTY,a)}))})),Object(I["a"])(n,h.actions.CREATE_INSTANCE,(function(n,i){var s,o=n.commit,r=n.state,l=r.instances;if(a&&a.length){var c=l&&l.length?l.length+1:1;e.createInstance(a+" "+c,i).then((function(e){return t(e.id,"create"),s=e.id,e})).then((function(e){return o(h.mutations.CREATE_INSTANCES,e)})).then((function(){return o(h.mutations.SET_SELECTED_INSTANCE_ID,s)})).catch((function(e){console.log(e)}))}})),Object(I["a"])(n,h.actions.DELETE_INSTANCE,(function(a,n){var i=a.commit,s=a.state,o=s.selectedInstanceId;e.deleteInstance(n).then((function(){return i(h.mutations.DELETE_INSTANCE,n)})).then((function(){return t(n,"delete")})).then((function(){if(s.instances.length){if(o===n){var e=s.instances[0].id;i(h.mutations.SET_SELECTED_INSTANCE_ID,e)}}else i(h.mutations.NULLIFY_SELECTED)})).catch((function(e){console.log(e)}))})),n},pi={instances:[],selectedInstanceId:null},bi=function(e){return{namespaced:!0,state:pi,mutations:di,actions:Object.assign(ri,e),getters:ci}},hi="getQuotationLineInfo",vi="loadInstance",fi="addQuotation",gi="editQuotationLine",Ci="deleteQuotationLine",yi="quotationSubmit",Oi="createHeaderRequest",wi="FORCE_REFRESH",Ii="FORCE_RESET",Ni="Quotation",ji=(Kn={},Object(I["a"])(Kn,hi,(function(e,t){var a=t.userCode,n=t.itemName,i=t.quantity;return oi.getQuotationLineInfo(a,n,i)})),Object(I["a"])(Kn,vi,(function(e,t){return Object(Ae["a"])(regeneratorRuntime.mark((function a(){var n,i,s,o,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.commit,i=e.state,s=i.instances,o=s&&s.length?s.length+1:1,a.next=5,Zn.loadInstance(Ni+" "+o,t);case 5:return r=a.sent,n(h.mutations.CREATE_INSTANCES,r),n(h.mutations.SET_SELECTED_INSTANCE_ID,r.id),a.abrupt("return",r);case 9:case"end":return a.stop()}}),a)})))()})),Object(I["a"])(Kn,fi,(function(e,t){var a=e.commit,n=e.state,i=e.getters,s=n.selectedInstanceId,o=i.SELECTED_INSTANCE;if(s&&o){var r=o.instanceLines.map((function(e){return Object.assign({},e)}));return oi.addQuotationLine(s,t).then((function(e){r.push(Object.assign(e,{isLoading:!1})),a(h.mutations.UPDATE_PROPERTY,{fieldName:"instanceLines",value:r,id:s})}))}return Promise.reject("Missing instance ID")})),Object(I["a"])(Kn,gi,(function(e,t){e.commit;var a=e.getters,n=a.SELECTED_INSTANCE;return t.id&&n?oi.editQuotationLine(t.id,t).then((function(){var e=a.SELECTED_INSTANCE;e.instanceLines&&e.instanceLines.map((function(e){return Object.assign({},e)}))})):Promise.reject("Line missing ID")})),Object(I["a"])(Kn,Ci,(function(e,t){var a=e.commit,n=e.state,i=e.getters,s=n.selectedInstanceId,o=i.SELECTED_INSTANCE;return oi.deleteQuotationLine(t).then((function(){var e=o.instanceLines.map((function(e){return Object.assign({},e)})),n=e.map((function(e){return e.id})).indexOf(t);e.splice(n,1),a(h.mutations.UPDATE_PROPERTY,{fieldName:"instanceLines",value:e,id:s})})).catch((function(e){return console.log("[Error: deleteQuotationLine -> quotationLineId: "+t+"]"),Promise.reject(e)}))})),Object(I["a"])(Kn,wi,(function(e){var t=e.commit,a=e.state,n=e.getters,i=a.selectedInstanceId,s=n.SELECTED_INSTANCE;if(i&&s){var o,r=s.instanceLines.map((function(e){return Object.assign({},e)})),l=Object(_t["a"])(r);try{for(l.s();!(o=l.n()).done;){var c=o.value;c.forceRefresh=!0}}catch(u){l.e(u)}finally{l.f()}t(h.mutations.UPDATE_PROPERTY,{fieldName:"instanceLines",value:r,id:i})}})),Object(I["a"])(Kn,Ii,(function(e){var t=e.commit,a=e.state,n=e.getters,i=a.selectedInstanceId,s=n.SELECTED_INSTANCE;if(i&&s){var o,r=s.instanceLines.map((function(e){return Object.assign({},e)})),l=Object(_t["a"])(r);try{for(l.s();!(o=l.n()).done;){var c=o.value;c.forceReset=!0}}catch(u){l.e(u)}finally{l.f()}t(h.mutations.UPDATE_PROPERTY,{fieldName:"instanceLines",value:r,id:i})}})),Object(I["a"])(Kn,yi,(function(e,t){return Object(Ae["a"])(regeneratorRuntime.mark((function e(){var a,n,i,s,o,r,l,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.quotInstance,o=t.dialogA,r=t.dialogC,l={id:s.id,customerCode:s.customerCode,userCode:s.userCode,currency:s.currency,salesPesonId:s.salesPersonId,classification:s.classification,forAttentionOf:s.forAttentionOf,quotationReason:s.reason,orderType:s.orderType,headerPretext:s.headerPretext,potentialSales:s.userPotential,discountReason:s.discountReason,validDate:null===(a=s.validDate)||void 0===a?void 0:a.toJSON(),followUp:s.followUp,followUpDate:null===(n=s.followUpDate)||void 0===n?void 0:n.toJSON(),startDate:null===(i=s.startDate)||void 0===i?void 0:i.toJSON(),quotationNumber:s.quotationNumber,quotationTempNumber:s.quotationTempNumber,responseDialogA:o,responseDialogC:r,quotationLines:s.instanceLines,competitor:s.competitor,discountRegistration:s.discountRegistration},e.prev=2,e.next=5,Zn.quotationSubmit(l);case 5:return c=e.sent,e.abrupt("return",c);case 9:e.prev=9,e.t0=e["catch"](2),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))()})),Kn),Si=mi(Zn,(function(e,t){switch(t){case"init":case"create":break;case"delete":break}}),Ni,!1,!1),_i=bi(Object.assign({},Si,ji)),Ei={showDiscountDialog:!1,discountApprovalLines:[],showSummaryDialog:!1,hasUnsavedChanges:!1,showLoading:!1,settings:void 0},ki=Ei;n["a"].use(p["a"]);var Li=b,Pi=new p["a"].Store({state:ki,mutations:Be,actions:vt,getters:ti,modules:Object(I["a"])({moduleStoreShared:ii,moduleCommonLabels:si,moduleCommons:ai},Li,_i)}),xi=Pi,Ti=Li+"/"+hi,Di=Li+"/"+vi,Ri=Li+"/"+fi,Ai=Li+"/"+gi,qi=Li+"/"+Ci,Ui=Li+"/"+Oi,Mi=Li+"/"+wi,Qi=Li+"/"+Ii,$i=["customerCode","userCode","salesPersonName","reason","classification","startDate","validDate","competitor","discountReason","previousApplicationNumber","discountRegistration","forAttentionOf","userPotential","followUpDate","headerPretext"],Fi=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.settingsActive=!1,e.headerActive=!1,e.responseA=!1,e.responseC=!1,e.instanceHeader={},e.quotInstanceCopy={},e.customerName="",e.userName="",e.salesPersonName="",e.currency="",e.visible=!1,e.zIndexFix=!0,e}return Object(l["a"])(a,[{key:"beforeMount",value:function(){this.quotClassList||this.fetchClassificationList()}},{key:"handleOpenSettings",value:function(e){e.preventDefault(),this.instanceHeader=Object.assign({},this.quotInstance),this.quotInstanceCopy=Object.assign({},this.quotInstance),this.unsavedChanges(!0),this.settingsActive=!0}},{key:"handleCloseSettings",value:function(){var e=Object(Ae["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.showLoadingWithFixedZindex(!0),e.next=3,Vn(this.instanceHeader,this.getLabel,this.settings.salesPersonEditable);case 3:if(t=e.sent,this.selectedInstanceId,!t){e.next=37;break}if(e.prev=6,this.quotInstanceCopy.customerCode===this.instanceHeader.customerCode){e.next=11;break}return e.next=10,this.updateCustomerName(this.instanceHeader.customerCode,!0);case 10:this.instanceHeader.customerName=this.customerName;case 11:if(this.quotInstanceCopy.userCode===this.instanceHeader.userCode){e.next=16;break}return e.next=14,this.updateUserNameAndUserInfo(this.instanceHeader.userCode,!0);case 14:this.instanceHeader.userName=this.userName,this.instanceHeader.currency=this.currency;case 16:if(this.quotInstanceCopy.salesPersonId===this.instanceHeader.salesPersonId){e.next=20;break}return e.next=19,this.updateSalesPersonName(this.instanceHeader.salesPersonId,!0);case 19:this.instanceHeader.salesPersonName=this.salesPersonName;case 20:return a="02"==this.instanceHeader.classification,a&&(this.instanceHeader.discountRegistration=!1),e.next=24,Zn.editInstance(this.selectedInstanceId,this.instanceHeader);case 24:Object.assign(this.quotInstance,this.instanceHeader),this.instanceHeader={},this.quotInstanceCopy={},this.unsavedChanges(!1),this.settingsActive=!1,this.readOnly||(a?this.forceReset():this.forceRefresh()),e.next=37;break;case 32:e.prev=32,e.t0=e["catch"](6),console.error(e.t0),n=this.getLabel("contactWithSmc"),window.smc.NotifyComponent.error(n);case 37:this.showLoadingWithFixedZindex(!1);case 38:case"end":return e.stop()}}),e,this,[[6,32]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleOpenHeaderPretext",value:function(e){e.preventDefault(),this.instanceHeader=Object.assign({},this.quotInstance),this.quotInstanceCopy=Object.assign({},this.quotInstance),this.unsavedChanges(!0),this.headerActive=!0}},{key:"handleCloseHeaderPretext",value:function(){var e=Object(Ae["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.preventDefault(),this.showLoadingWithFixedZindex(!0),e.next=4,Zn.editInstance(this.selectedInstanceId,this.instanceHeader).then((function(){Object.assign(a.quotInstance,a.instanceHeader),a.instanceHeader={},a.quotInstanceCopy={},a.unsavedChanges(!1),a.headerActive=!1})).catch((function(e){console.error(e);var t=a.getLabel("contactWithSmc");window.smc.NotifyComponent.error(t)}));case 4:this.showLoadingWithFixedZindex(!1);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleCloseAny",value:function(e){e.preventDefault(),this.instanceHeader={},this.quotInstanceCopy={},this.settingsActive=!1,this.headerActive=!1,this.unsavedChanges(!1)}},{key:"handleOpenQuotation",value:function(e){var t=this;e.preventDefault(),this.instanceHeader=Object.assign({},this.quotInstance);var a=[];if(this.instanceHeader.instanceLines)for(var n=0;n<this.instanceHeader.instanceLines.length;n++){var i=this.instanceHeader.instanceLines[n],s=(i.bnpPrice,i.currentCustomerPrice,i.currentCustomerPriceRate,i.listPrice,i.itemNumber,i.changedCustomerPriceRate,Object(Et["a"])(i,["bnpPrice","currentCustomerPrice","currentCustomerPriceRate","listPrice","itemNumber","changedCustomerPriceRate"]));a.push(s)}this.instanceHeader.instanceLines=a,this.instanceHeader.quotationNumber="",this.instanceHeader.classification="01",Zn.editInstance(this.selectedInstanceId,this.instanceHeader).then((function(){Object.assign(t.quotInstance,t.instanceHeader),t.instanceHeader={},t.forceRefresh()})).catch((function(e){console.error(e),t.instanceHeader={};var a=t.getLabel("contactWithSmc");window.smc.NotifyComponent.error(a)}))}},{key:"handleCustomerChanged",value:function(){var e=Object(Ae["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.customerName="","undefined"!==typeof t&&this.updateCustomerName(t);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleUserChanged",value:function(){var e=Object(Ae["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.userName="",this.currency="","undefined"!==typeof t&&this.updateUserNameAndUserInfo(t);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleSalesPersonChanged",value:function(){var e=Object(Ae["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.salesPersonName="","undefined"!==typeof t&&this.updateSalesPersonName(t);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onSelectedInstanceChanged",value:function(){if(this.settingsActive=!1,this.headerActive=!1,0!=Object.keys(this.instanceHeader).length){if(!this.compareEditableFields(this.instanceHeader,this.quotInstanceCopy)){var e=this.getLabel("lostUnsavedChanges")||"Unsaved changes lost";window.smc.NotifyComponent.warn(e),this.unsavedChanges(!1)}this.instanceHeader={},this.quotInstanceCopy={}}}},{key:"updateCustomerName",value:function(){var e=Object(Ae["a"])(regeneratorRuntime.mark((function e(t){var a,n,i,s,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=o.length>1&&void 0!==o[1]&&o[1],this.quotInstance.customerName&&!a){e.next=16;break}return n="",i=this.selectedInstanceId,e.prev=4,e.next=7,st.getUserInfoBasic(t||"");case 7:s=e.sent,n=s.customerName||"-",e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](4),console.error(e.t0),n="-";case 15:this.updateInstanceLocal({fieldName:"customerName",value:n,id:i});case 16:this.customerName=this.quotInstance.customerName;case 17:case"end":return e.stop()}}),e,this,[[4,11]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateUserNameAndUserInfo",value:function(){var e=Object(Ae["a"])(regeneratorRuntime.mark((function e(t){var a,n,i,s,o,r,l=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=l.length>1&&void 0!==l[1]&&l[1],this.quotInstance.userName&&!a){e.next=19;break}return o=this.selectedInstanceId,e.prev=3,e.next=6,st.getUserInfoBasic(t||"");case 6:r=e.sent,r?(n=r.customerName||"-",i=r.currency||"-",s=r.status||"-"):(n="-",i="-",s="-"),e.next=16;break;case 10:e.prev=10,e.t0=e["catch"](3),console.error(e.t0),n="-",i="-",s="-";case 16:this.updateInstanceLocal({fieldName:"userName",value:n,id:o}),this.updateInstanceLocal({fieldName:"currency",value:i,id:o}),this.updateInstanceLocal({fieldName:"userStatus",value:s,id:o});case 19:this.userName=this.quotInstance.userName,this.currency=this.quotInstance.currency;case 21:case"end":return e.stop()}}),e,this,[[3,10]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateSalesPersonName",value:function(){var e=Object(Ae["a"])(regeneratorRuntime.mark((function e(t){var a,n,i,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=s.length>1&&void 0!==s[1]&&s[1],t){e.next=4;break}return this.salesPersonName="-",e.abrupt("return");case 4:if(this.quotInstance.salesPersonName&&!a){e.next=10;break}return n="",i=this.selectedInstanceId,e.next=9,st[Ye.WP_COMMONS.methods.GET_SALES_PERSON.name]("").then((function(e){var a;a=e instanceof Array?e.find((function(e){return e.code===t})):e,n=a&&a.code===t?a.name:"-"}));case 9:this.updateInstanceLocal({id:i,fieldName:"salesPersonName",value:n});case 10:this.salesPersonName=this.quotInstance.salesPersonName;case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"compareEditableFields",value:function(e,t){var a,n=Object(_t["a"])($i);try{for(n.s();!(a=n.n()).done;){var i=a.value;if(e[i]!==t[i])return!1}}catch(s){n.e(s)}finally{n.f()}return!0}},{key:"showLoadingWithFixedZindex",value:function(e){this.zIndexFix=!e,this.showLoading(e)}},{key:"lengthControl",value:function(e,t){var a=e.headerPretext||"",n=t.target.value,i=n.split("\n");if(i.length>10)return console.warn("Ten line limit exceeded"),void(document.getElementById("settings-headerPretext").value=a);for(var s=0;s<i.length;s++)if(i[s].length>60)return console.warn("Line length exceeded"),void(document.getElementById("settings-headerPretext").value=a);m["d"].set(this.instanceHeader,"headerPretext",n)}},{key:"readOnly",get:function(){return!!this.quotInstance.quotationNumber}},{key:"settingsEditable",get:function(){return!this.readOnly||this.settings.quotationFollowUp}},{key:"classification",get:function(){var e,t,a=this,n=(null===(e=this.quotInstance)||void 0===e?void 0:e.classification)&&(null===(t=this.quotClassList)||void 0===t?void 0:t.find((function(e){return e.code==a.quotInstance.classification})));return n?"".concat(n.code," - ").concat(n.name):this.quotInstance.classification||"-"}},{key:"discountRegistration",get:function(){var e="";return"boolean"===typeof this.quotInstance.discountRegistration&&(e=this.quotInstance.discountRegistration?this.getLabel("yes"):this.getLabel("no")),e}}]),a}(m["d"]);Object(d["a"])([Object(m["e"])("quotInstance.customerCode",{immediate:!0,deep:!0})],Fi.prototype,"handleCustomerChanged",null),Object(d["a"])([Object(m["e"])("quotInstance.userCode",{immediate:!0,deep:!0})],Fi.prototype,"handleUserChanged",null),Object(d["a"])([Object(m["e"])("quotInstance.salesPersonId",{immediate:!0,deep:!0})],Fi.prototype,"handleSalesPersonChanged",null),Object(d["a"])([Object(m["e"])("selectedInstanceId")],Fi.prototype,"onSelectedInstanceChanged",null),Fi=Object(d["a"])([Object(m["a"])({name:"HeaderQuotation",components:{WpQuotationFormFields:Pn,QUHeaderInfoItem:Un},directives:{DateFormat:At,LabelTranslate:J},methods:Object(o["a"])(Object(o["a"])({},Object(p["d"])({unsavedChanges:Qe,showLoading:$e,updateInstanceLocal:b+"/"+h.mutations.UPDATE_PROPERTY,updateInstance:b+"/"+h.mutations.UPDATE_INSTANCE})),Object(p["b"])({fetchClassificationList:"moduleCommons/fetchQuotClassList",forceRefresh:Mi,forceReset:Qi,createHeaderRequest:Ui,updateInstanceProperty:b+"/"+h.actions.UPDATE_INSTANCE})),computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(p["e"])(b,["selectedInstanceId"])),Object(p["e"])("moduleCommons",["quotClassList"])),Object(p["c"])({quotInstance:"".concat(b,"/").concat(h.getters.SELECTED_INSTANCE),getLabel:"moduleCommonLabels/getLabel",settings:Xn}))})],Fi);var Wi=Fi,Bi=Wi,Vi=(a(249),Object(T["a"])(Bi,jt,St,!1,null,"8d6e5802",null));Vi.options.__file="src/components/HeaderQuotation.vue";var Gi=Vi.exports,Hi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"info-quotation"},[a("div",{staticClass:"dropdown info-herramientas d-xl-none"},[e._m(0),a("div",{staticClass:"dropdown-menu dropdown-menu-right",attrs:{"aria-labelledby":"dropdownMenuButton"}},[a("QUTools")],1)]),a("div",{staticClass:"dropdown info-economica"},[e._m(1),a("div",{staticClass:"dropdown-menu dropdown-menu-right",attrs:{"aria-labelledby":"dropdownMenuButton"}},[a("div",{staticClass:"info-economica-details"},[a("div",{staticClass:"dato-item d-flex"},[a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:totalFtp",expression:"'label:totalFtp'"}],staticClass:"dato-text-item"}),a("span",{directives:[{name:"number-format",rawName:"v-number-format:[format]",value:e.totalFtp,expression:"totalFtp",arg:e.format}],staticClass:"valor-text-item"},[e._v(e._s(e.totalFtp))])]),a("div",{staticClass:"dato-item d-flex"},[a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:totalCurrentCustPrice",expression:"'label:totalCurrentCustPrice'"}],staticClass:"dato-text-item"}),a("span",{directives:[{name:"number-format",rawName:"v-number-format:[format]",value:e.totalPrice,expression:"totalPrice",arg:e.format}],staticClass:"valor-text-item"},[e._v(e._s(e.totalPrice))])]),a("div",{staticClass:"dato-item d-flex"},[a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:totalRate",expression:"'label:totalRate'"}],staticClass:"dato-text-item"}),a("span",{directives:[{name:"number-format",rawName:"v-number-format:[formatPercent]",value:e.totalRate,expression:"totalRate",arg:e.formatPercent}],staticClass:"valor-text-item"},[e._v(e._s(e.totalRate)+"%")])]),a("div",{staticClass:"dato-item d-flex"},[a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:totalChangedCustPrice",expression:"'label:totalChangedCustPrice'"}],staticClass:"dato-text-item"}),a("span",{directives:[{name:"number-format",rawName:"v-number-format:[format]",value:e.totalChangedPrice,expression:"totalChangedPrice",arg:e.format}],staticClass:"valor-text-item"},[e._v(e._s(e.totalChangedPrice))])]),a("div",{staticClass:"dato-item d-flex"},[a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:totalRateChangedCustPrice",expression:"'label:totalRateChangedCustPrice'"}],staticClass:"dato-text-item"}),a("span",{directives:[{name:"number-format",rawName:"v-number-format:[formatPercent]",value:e.totalChangedRate,expression:"totalChangedRate",arg:e.formatPercent}],staticClass:"valor-text-item"},[e._v(e._s(e.totalChangedRate)+"%")])])])])]),a("div",{staticClass:"dropdown info-resumen"},[e._m(2),a("div",{staticClass:"dropdown-menu dropdown-menu-right",attrs:{"aria-labelledby":"dropdownMenuButton"}},[a("h6",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:resumen",expression:"'label:resumen'"}],staticClass:"dropdown-header"}),a("div",{staticClass:"info-resumen-details"},[a("div",{staticClass:"dato-item-resumen"},[a("div",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:totalListPrice",expression:"'label:totalListPrice'"}],staticClass:"valor-general"}),a("div",{staticClass:"item-valores d-flex"},[a("div",{directives:[{name:"number-format",rawName:"v-number-format:[format]",value:e.totalListPrice,expression:"totalListPrice",arg:e.format}],staticClass:"dato-text-item"},[e._v(" "+e._s(e.totalListPrice)+" ")])])]),a("div",{staticClass:"dato-item-resumen"},[a("div",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:totalCurrentCustPrice",expression:"'label:totalCurrentCustPrice'"}],staticClass:"valor-general"}),a("div",{staticClass:"item-valores d-flex"},[a("span",{directives:[{name:"number-format",rawName:"v-number-format:[format]",value:e.totalPrice,expression:"totalPrice",arg:e.format}],staticClass:"dato-text-item"},[e._v(e._s(e.totalPrice))])])]),a("div",{staticClass:"dato-item-resumen"},[a("div",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:totalChangedCustPrice",expression:"'label:totalChangedCustPrice'"}],staticClass:"valor-general"}),a("div",{staticClass:"item-valores d-flex"},[a("span",{directives:[{name:"number-format",rawName:"v-number-format:[format]",value:e.totalChangedPrice,expression:"totalChangedPrice",arg:e.format}],staticClass:"dato-text-item"},[e._v(e._s(e.totalChangedPrice))]),a("div",{staticClass:"porcentaje-text-item"},[e._v(" % "),a("input",{directives:[{name:"numeric-field",rawName:"v-numeric-field"}],staticClass:"porcentaje-text-input",attrs:{type:"text",autocomplete:"off",id:"total-changed-price-discount",readonly:e.readOnly},domProps:{value:e.editableChangedPriceDiscount},on:{keypress:function(t){return e.handleEnterPressed(t,e.handleTotalChangedDiscountChange)}}})]),a("div",{staticClass:"porcentaje-text-item"},[a("input",{directives:[{name:"numeric-field",rawName:"v-numeric-field"}],staticClass:"valor-text-input",attrs:{id:"total-changed-price-discounted",autocomplete:"off",readonly:e.readOnly},domProps:{value:e.editableChangedPrice},on:{keypress:function(t){return e.handleEnterPressed(t,e.handleTotalChangedPriceChange)}}})])])])])])])])},Yi=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{staticClass:"btn",attrs:{"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[a("i",{staticClass:"fas fa-wrench"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{staticClass:"btn",attrs:{"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[a("i",{staticClass:"fas fa-euro-sign"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{staticClass:"btn",attrs:{"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[a("i",{staticClass:"fas fa-stream"})])}];Hi._withStripped=!0;var Ji=a(51),zi=a.n(Ji),Ki=function(e){var t=e.which?e.which:e.keyCode;if(!(t>31&&(t<48||t>57)&&46!==t&&44!==t))return!0;e.preventDefault()},Zi={bind:function(e){e.addEventListener("keypress",Ki)},unbind:function(e){e.removeEventListener("keypress",Ki)}},Xi=Zi,es="#,###.00";function ts(e,t){var a=t.arg,n=void 0===a?es:a,i=t.value;e.innerHTML=zi()(n,i)}var as={bind:ts,update:ts},ns=as;function is(e,t){if(t){var a=Math.pow(10,t);return Math.round(a*e)/a}return e}function ss(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e+t}function os(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0;return is(e-e*t/100,a)}function rs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0;return 0===e?0===t?0:100:is((e-t)/e*100,a)}function ls(e){return e.changedCustomerPrice?e.changedCustomerPrice:e.changedCustomerPriceRate&&e.listPrice?os(e.listPrice,e.changedCustomerPriceRate):e.currentCustomerPrice?e.currentCustomerPrice:0}function cs(e,t){var a,n=!0,i=0,s=!1;for(i=0;i<e.instanceLines.length;i++){if(a=e.instanceLines[i],a.errorQuotInfo){var o=t("itemNameError").replace("{0}",a.itemName?a.itemName:"");window.smc.NotifyComponent.error(o),n=!1}else a.currentCustomerPrice||a.errorQuantity||(s=!0,n=!1);if(a.errorSI){var r=t("incorrectSerial");window.smc.NotifyComponent.error(r),n=!1}if(a.errorQuantity){var l=t("quantityFieldRequired");window.smc.NotifyComponent.error(l),n=!1}if(a.errorValidation){var c=t("validationError").replace("{0}",a.itemName?a.itemName:"");window.smc.NotifyComponent.error(c),n=!1}}if(s){var u=t("quotationLineLoading");window.smc.NotifyComponent.error(u)}return n}a(250);function us(e){if(isNaN(+e)){var t=e.lastIndexOf(","),a=e.lastIndexOf(".");if(-1!==a||-1!==t){var n=t<a?+e.replace(",",""):+e.replace(".","").replace(",",".");return isNaN(n)?0:n}return 0}return+e}var ds=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tools-details"},[a("ul",{staticClass:"text-left"},[a("QUToolsSubmit"),e.selectedInstance.quotationNumber?a("li",[a("a",{attrs:{role:"button",tabindex:"0"},on:{click:e.handlePrintQuotation}},[a("i",{staticClass:"fas fa-print"}),e._v(" "),a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:printQuotation",expression:"'label:printQuotation'"}]})])]):e._e(),e.selectedInstance.quotationNumber?a("li",[a("a",{attrs:{role:"button",tabindex:"0"},on:{click:e.handleDisplayDiscounts}},[a("i",{staticClass:"far fa-file-alt"}),e._v(" "),a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:displayDiscounts",expression:"'label:displayDiscounts'"}]})])]):e._e(),e.selectedInstance.quotationNumber?a("li",[a("a",{attrs:{role:"button",tabindex:"0"},on:{click:e.handlePrintDiscounts}},[a("i",{staticClass:"fas fa-print"}),e._v(" "),a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:printDiscounts",expression:"'label:printDiscounts'"}]})])]):e._e(),a("li",[a("a",{attrs:{role:"button",tabindex:"0"},on:{click:e.handleDisplaySummary}},[a("i",{staticClass:"far fa-file-alt"}),e._v(" "),a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:displaySummary",expression:"'label:displaySummary'"}]})])])],1)])},ms=[];ds._withStripped=!0;var ps=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",[a("QUSubmitDialogAModal",{ref:"modalChild",attrs:{id:"dialog-a-quotation-wpmodal",response:e.submitResponse},on:{accepted:e.handleSubmitDialogAModal,"close-modal":e.handleSubmitModalClose}}),a("QUSubmitDialogAapproveModal",{ref:"modalChild",attrs:{id:"dialog-a-approve-quotation-wpmodal",response:e.submitResponse},on:{accepted:e.handleSubmitDialogAapproveModal,"close-modal":e.handleSubmitModalClose}}),a("QUSubmitDialogBCModal",{ref:"modalChild",attrs:{id:"dialog-b-c-quotation-wpmodal",response:e.submitResponse},on:{accepted:e.handleSubmitDialogBCModal,"close-modal":e.handleSubmitModalClose}}),a("QUSubmitDialogCModal",{ref:"modalChild",attrs:{id:"dialog-c-quotation-wpmodal"},on:{accepted:e.handleSubmitDialogCModal,"close-modal":e.handleSubmitModalClose}}),a("QUSubmitSubmittedModal",{ref:"modalChild",attrs:{id:"submitted-quotation-wpmodal",response:e.submitResponse},on:{"close-modal":e.handleSubmitModalClose}}),a("QUSubmitApprovedModal",{ref:"modalChild",attrs:{id:"approved-quotation-wpmodal",response:e.submitResponse},on:{"close-modal":e.handleSubmitModalClose}}),a("QUSubmitNotAuthorizedModal",{ref:"modalChild",attrs:{id:"not-authorized-quotation-wpmodal"},on:{"close-modal":e.handleSubmitModalClose}}),a("QUSubmitErrorModal",{ref:"modalChild",attrs:{id:"error-quotation-wpmodal",response:e.submitResponse},on:{"close-modal":e.handleSubmitModalClose}}),a("a",{attrs:{role:"button",tabindex:"0"},on:{click:e.handleAsyncAuth}},[a("i",{staticClass:"fas fa-save"}),e._v(" "),a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:submit",expression:"'label:submit'"}]})])],1)},bs=[];ps._withStripped=!0;var hs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.showModal?a("transition",{attrs:{name:"modal"}},[a("div",{directives:[{name:"outside-click",rawName:"v-outside-click",value:e.onClose,expression:"onClose"}],ref:"wpModal",staticClass:"modal modal-mask",attrs:{id:e.id,role:"dialog"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h4",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:submitValidation",expression:"'label:submitValidation'"}],staticClass:"modal-title text-dark"}),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}},[e._v(" × ")])]),a("div",{staticClass:"modal-body text-dark"},[a("span",[e._v(e._s(e.lowerThanMsp)+" ")]),e._l(e.response.undercutLines,(function(t,n){return a("span",{key:n},[a("span",[e._v(e._s(t)+" ")])])})),a("p",[e._v(e._s(e.proceedToSubmit))])],2),a("div",{staticClass:"modal-footer"},[a("button",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:cancel",expression:"'label:cancel'"}],staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}}),a("button",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:proceed",expression:"'label:proceed'"}],staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onAccept}})])])])])]):e._e()},vs=[];hs._withStripped=!0;var fs=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.showModal=!1,e}return Object(l["a"])(a,[{key:"created",value:function(){this.$parent.$on("show-dialogA-modal",this.onShowModal)}},{key:"mounted",value:function(){this.lowerThanMsp=this.getLabel("lowerThanMsp"),this.proceedToSubmit=this.getLabel("proceedToSubmit")}},{key:"onShowModal",value:function(){this.showModal=!0}},{key:"onAccept",value:function(){this.showModal=!1}},{key:"onClose",value:function(){this.showModal=!1}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])()],fs.prototype,"id",void 0),Object(d["a"])([Object(m["c"])()],fs.prototype,"response",void 0),Object(d["a"])([Object(m["b"])("accepted")],fs.prototype,"onAccept",null),Object(d["a"])([Object(m["b"])("close-modal")],fs.prototype,"onClose",null),fs=Object(d["a"])([Object(m["a"])({name:"QUSubmitDialogAModal",components:{},directives:{OutsideClick:ue,LabelTranslate:J},computed:Object(o["a"])({},Object(p["c"])({getLabel:"moduleCommonLabels/getLabel"}))})],fs);var gs=fs,Cs=gs,ys=(a(252),Object(T["a"])(Cs,hs,vs,!1,null,"b3c1b080",null));ys.options.__file="src/components/QUSubmitDialogAModal.vue";var Os=ys.exports,ws=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.showModal?a("transition",{attrs:{name:"modal"}},[a("div",{directives:[{name:"outside-click",rawName:"v-outside-click",value:e.onClose,expression:"onClose"}],ref:"wpModal",staticClass:"modal modal-mask",attrs:{id:e.id,role:"dialog"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h4",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:submitValidation",expression:"'label:submitValidation'"}],staticClass:"modal-title text-dark"}),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}},[e._v(" × ")])]),a("div",{staticClass:"modal-body text-dark"},[a("span",[e._v(e._s(e.lowerThanMsp)+" ")]),e._l(e.response.undercutLines,(function(t,n){return a("span",{key:n},[a("span",[e._v(e._s(t)+" ")])])})),a("p",[e._v(e._s(e.proceedToSubmit))])],2),a("div",{staticClass:"modal-footer"},[a("button",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:cancel",expression:"'label:cancel'"}],staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}}),a("button",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:proceed",expression:"'label:proceed'"}],staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onAccept}})])])])])]):e._e()},Is=[];ws._withStripped=!0;var Ns=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.showModal=!1,e}return Object(l["a"])(a,[{key:"created",value:function(){this.$parent.$on("show-dialogA-approve-modal",this.onShowModal)}},{key:"mounted",value:function(){this.lowerThanMsp=this.getLabel("lowerThanMsp"),this.proceedToSubmit=this.getLabel("proceedToSubmit")}},{key:"onShowModal",value:function(){this.showModal=!0}},{key:"onAccept",value:function(){this.showModal=!1}},{key:"onClose",value:function(){this.showModal=!1}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])()],Ns.prototype,"id",void 0),Object(d["a"])([Object(m["c"])()],Ns.prototype,"response",void 0),Object(d["a"])([Object(m["b"])("accepted")],Ns.prototype,"onAccept",null),Object(d["a"])([Object(m["b"])("close-modal")],Ns.prototype,"onClose",null),Ns=Object(d["a"])([Object(m["a"])({name:"QUSubmitDialogAapproveModal",components:{},directives:{OutsideClick:ue,LabelTranslate:J},computed:Object(o["a"])({},Object(p["c"])({getLabel:"moduleCommonLabels/getLabel"}))})],Ns);var js=Ns,Ss=js,_s=(a(253),Object(T["a"])(Ss,ws,Is,!1,null,"c39d9706",null));_s.options.__file="src/components/QUSubmitDialogAapproveModal.vue";var Es=_s.exports,ks=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.showModal?a("transition",{attrs:{name:"modal"}},[a("div",{directives:[{name:"outside-click",rawName:"v-outside-click",value:e.onClose,expression:"onClose"}],ref:"wpModal",staticClass:"modal modal-mask",attrs:{id:e.id,role:"dialog"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h4",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:submitValidation",expression:"'label:submitValidation'"}],staticClass:"modal-title text-dark"}),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}},[e._v(" × ")])]),a("div",{staticClass:"modal-body text-dark"},[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.Bpressed,expression:"!Bpressed"}]},[e._v(e._s(e.notAuthorized)+" ")]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.Bpressed,expression:"Bpressed"}]},[e._v(e._s(e.needAuthorization)+" ")])]),a("div",{staticClass:"modal-footer"},[a("button",{directives:[{name:"show",rawName:"v-show",value:!e.Bpressed,expression:"!Bpressed"},{name:"label-translate",rawName:"v-label-translate",value:"label:ok",expression:"'label:ok'"}],staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onBAccept}}),a("button",{directives:[{name:"show",rawName:"v-show",value:e.Bpressed,expression:"Bpressed"},{name:"label-translate",rawName:"v-label-translate",value:"label:cancel",expression:"'label:cancel'"}],staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}}),a("button",{directives:[{name:"show",rawName:"v-show",value:e.Bpressed,expression:"Bpressed"},{name:"label-translate",rawName:"v-label-translate",value:"label:proceed",expression:"'label:proceed'"}],staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onAccept}})])])])])]):e._e()},Ls=[];ks._withStripped=!0;var Ps=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.Bpressed=!1,e.showModal=!1,e}return Object(l["a"])(a,[{key:"created",value:function(){this.$parent.$on("show-dialogB-C-modal",this.onShowModal)}},{key:"mounted",value:function(){this.notAuthorized=this.getLabel("notAuthorized"),this.needAuthorization=this.getLabel("needAuthorization")}},{key:"onShowModal",value:function(){this.Bpressed=!1,this.showModal=!0}},{key:"onBAccept",value:function(){this.Bpressed=!0}},{key:"onAccept",value:function(){this.showModal=!1}},{key:"onClose",value:function(){this.showModal=!1}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])()],Ps.prototype,"id",void 0),Object(d["a"])([Object(m["b"])("accepted")],Ps.prototype,"onAccept",null),Object(d["a"])([Object(m["b"])("close-modal")],Ps.prototype,"onClose",null),Ps=Object(d["a"])([Object(m["a"])({name:"QUSubmitDialogBCModal",components:{},directives:{OutsideClick:ue,LabelTranslate:J},computed:Object(o["a"])({},Object(p["c"])({getLabel:"moduleCommonLabels/getLabel"}))})],Ps);var xs=Ps,Ts=xs,Ds=(a(254),Object(T["a"])(Ts,ks,Ls,!1,null,"7c98a6c8",null));Ds.options.__file="src/components/QUSubmitDialogBCModal.vue";var Rs=Ds.exports,As=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.showModal?a("transition",{attrs:{name:"modal"}},[a("div",{directives:[{name:"outside-click",rawName:"v-outside-click",value:e.onClose,expression:"onClose"}],ref:"wpModal",staticClass:"modal modal-mask",attrs:{id:e.id,role:"dialog"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h4",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:submitValidation",expression:"'label:submitValidation'"}],staticClass:"modal-title text-dark"}),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}},[e._v(" × ")])]),a("div",{staticClass:"modal-body text-dark"},[a("span",[e._v(e._s(e.needAuthorization)+" ")])]),a("div",{staticClass:"modal-footer"},[a("button",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:cancel",expression:"'label:cancel'"}],staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}}),a("button",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:proceed",expression:"'label:proceed'"}],staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onAccept}})])])])])]):e._e()},qs=[];As._withStripped=!0;var Us=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.showModal=!1,e}return Object(l["a"])(a,[{key:"created",value:function(){this.$parent.$on("show-dialog-C-modal",this.onShowModal)}},{key:"mounted",value:function(){this.needAuthorization=this.getLabel("needAuthorization")}},{key:"onShowModal",value:function(){this.showModal=!0}},{key:"onAccept",value:function(){this.showModal=!1}},{key:"onClose",value:function(){this.showModal=!1}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])()],Us.prototype,"id",void 0),Object(d["a"])([Object(m["b"])("accepted")],Us.prototype,"onAccept",null),Object(d["a"])([Object(m["b"])("close-modal")],Us.prototype,"onClose",null),Us=Object(d["a"])([Object(m["a"])({name:"QUSubmitDialogCModal",components:{},directives:{OutsideClick:ue,LabelTranslate:J},computed:Object(o["a"])({},Object(p["c"])({getLabel:"moduleCommonLabels/getLabel"}))})],Us);var Ms=Us,Qs=Ms,$s=(a(255),Object(T["a"])(Qs,As,qs,!1,null,"e29bec04",null));$s.options.__file="src/components/QUSubmitDialogCModal.vue";var Fs=$s.exports,Ws=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.showModal?a("transition",{attrs:{name:"modal"}},[a("div",{directives:[{name:"outside-click",rawName:"v-outside-click",value:e.onClose,expression:"onClose"}],ref:"wpModal",staticClass:"modal modal-mask",attrs:{id:e.id,role:"dialog"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h4",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:submitValidation",expression:"'label:submitValidation'"}],staticClass:"modal-title text-dark"}),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}},[e._v(" × ")])]),a("div",{staticClass:"modal-body text-dark"},[a("span",[e._v(e._s(e.quotationSubmitted)+" "+e._s(e.response.quotationNumber))])]),a("div",{staticClass:"modal-footer"},[a("button",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:ok",expression:"'label:ok'"}],staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}})])])])])]):e._e()},Bs=[];Ws._withStripped=!0;var Vs=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.showModal=!1,e}return Object(l["a"])(a,[{key:"created",value:function(){this.$parent.$on("show-submitted-modal",this.onShowModal)}},{key:"mounted",value:function(){this.quotationSubmitted=this.getLabel("quotationSubmitted")}},{key:"onShowModal",value:function(){this.showModal=!0}},{key:"onClose",value:function(){this.showModal=!1}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])()],Vs.prototype,"id",void 0),Object(d["a"])([Object(m["c"])()],Vs.prototype,"response",void 0),Object(d["a"])([Object(m["b"])("close-modal")],Vs.prototype,"onClose",null),Vs=Object(d["a"])([Object(m["a"])({name:"QUSubmitSubmittedModal",components:{},directives:{OutsideClick:ue,LabelTranslate:J},computed:Object(o["a"])({},Object(p["c"])({getLabel:"moduleCommonLabels/getLabel"}))})],Vs);var Gs=Vs,Hs=Gs,Ys=(a(256),Object(T["a"])(Hs,Ws,Bs,!1,null,"034f0004",null));Ys.options.__file="src/components/QUSubmitSubmittedModal.vue";var Js=Ys.exports,zs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.showModal?a("transition",{attrs:{name:"modal"}},[a("div",{directives:[{name:"outside-click",rawName:"v-outside-click",value:e.onClose,expression:"onClose"}],ref:"wpModal",staticClass:"modal modal-mask",attrs:{id:e.id,role:"dialog"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h4",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:submitValidation",expression:"'label:submitValidation'"}],staticClass:"modal-title text-dark"}),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}},[e._v(" × ")])]),a("div",{staticClass:"modal-body text-dark"},[a("span",[e._v(e._s(e.quotationApproved.replace("{0}",e.response.quotationNumber)))])]),a("div",{staticClass:"modal-footer"},[a("button",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:ok",expression:"'label:ok'"}],staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}})])])])])]):e._e()},Ks=[];zs._withStripped=!0;var Zs=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.showModal=!1,e}return Object(l["a"])(a,[{key:"created",value:function(){this.$parent.$on("show-approved-modal",this.onShowModal)}},{key:"mounted",value:function(){this.quotationApproved=this.getLabel("quotationApproved")}},{key:"onShowModal",value:function(){this.showModal=!0}},{key:"onClose",value:function(){this.showModal=!1}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])()],Zs.prototype,"id",void 0),Object(d["a"])([Object(m["c"])()],Zs.prototype,"response",void 0),Object(d["a"])([Object(m["b"])("close-modal")],Zs.prototype,"onClose",null),Zs=Object(d["a"])([Object(m["a"])({name:"QUSubmitApprovedModal",components:{},directives:{OutsideClick:ue,LabelTranslate:J},computed:Object(o["a"])({},Object(p["c"])({getLabel:"moduleCommonLabels/getLabel"}))})],Zs);var Xs=Zs,eo=Xs,to=(a(257),Object(T["a"])(eo,zs,Ks,!1,null,"de6a714c",null));to.options.__file="src/components/QUSubmitApprovedModal.vue";var ao=to.exports,no=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.showModal?a("transition",{attrs:{name:"modal"}},[a("div",{directives:[{name:"outside-click",rawName:"v-outside-click",value:e.onClose,expression:"onClose"}],ref:"wpModal",staticClass:"modal modal-mask",attrs:{id:e.id,role:"dialog"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h4",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:submitValidation",expression:"'label:submitValidation'"}],staticClass:"modal-title text-dark"}),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}},[e._v(" × ")])]),a("div",{staticClass:"modal-body text-dark"},[a("span",[e._v(e._s(e.notAuthorized))])]),a("div",{staticClass:"modal-footer"},[a("button",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:ok",expression:"'label:ok'"}],staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}})])])])])]):e._e()},io=[];no._withStripped=!0;var so=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.showModal=!1,e}return Object(l["a"])(a,[{key:"created",value:function(){this.$parent.$on("show-no-auth-modal",this.onShowModal)}},{key:"mounted",value:function(){this.notAuthorized=this.getLabel("notAuthorized")}},{key:"onShowModal",value:function(){this.showModal=!0}},{key:"onClose",value:function(){this.showModal=!1}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])()],so.prototype,"id",void 0),Object(d["a"])([Object(m["b"])("close-modal")],so.prototype,"onClose",null),so=Object(d["a"])([Object(m["a"])({name:"QUSubmitNotAuthorizedModal",components:{},directives:{OutsideClick:ue,LabelTranslate:J},computed:Object(o["a"])({},Object(p["c"])({getLabel:"moduleCommonLabels/getLabel"}))})],so);var oo=so,ro=oo,lo=(a(258),Object(T["a"])(ro,no,io,!1,null,"11589b8b",null));lo.options.__file="src/components/QUSubmitNotAuthorizedModal.vue";var co=lo.exports,uo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.showModal?a("transition",{attrs:{name:"modal"}},[a("div",{directives:[{name:"outside-click",rawName:"v-outside-click",value:e.onClose,expression:"onClose"}],ref:"wpModal",staticClass:"modal modal-mask",attrs:{id:e.id,role:"dialog"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h4",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:submitValidation",expression:"'label:submitValidation'"}],staticClass:"modal-title text-dark"}),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}},[e._v(" × ")])]),a("div",{staticClass:"modal-body text-dark"},[a("span",[e._v(e._s(e.submitError)+" "+e._s(e.response.quotationTempNumber))])]),a("div",{staticClass:"modal-footer"},[a("button",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:ok",expression:"'label:ok'"}],staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}})])])])])]):e._e()},mo=[];uo._withStripped=!0;var po=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.showModal=!1,e}return Object(l["a"])(a,[{key:"created",value:function(){this.$parent.$on("show-error-modal",this.onShowModal)}},{key:"mounted",value:function(){this.submitError=this.getLabel("submitError")}},{key:"onShowModal",value:function(){this.showModal=!0}},{key:"onClose",value:function(){this.showModal=!1}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])()],po.prototype,"id",void 0),Object(d["a"])([Object(m["c"])()],po.prototype,"response",void 0),Object(d["a"])([Object(m["b"])("close-modal")],po.prototype,"onClose",null),po=Object(d["a"])([Object(m["a"])({name:"QUSubmitApprovedModal",components:{},directives:{OutsideClick:ue,LabelTranslate:J},computed:Object(o["a"])({},Object(p["c"])({getLabel:"moduleCommonLabels/getLabel"}))})],po);var bo=po,ho=bo,vo=(a(259),Object(T["a"])(ho,uo,mo,!1,null,"c829e0de",null));vo.options.__file="src/components/QUSubmitErrorModal.vue";var fo=vo.exports,go=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.submitResponse={},e.stopReading=!1,e}return Object(l["a"])(a,[{key:"handleAsyncAuth",value:function(){var e=Object(Ae["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!cs(this.quotInstance,this.getLabel)||!Hn(this.quotInstance,this.getLabel)){e.next=9;break}return this.stopReading=!1,this.showLoading(!0),e.next=5,ut.deleteAllSubmitResponse(this.quotInstance.id).catch((function(e){console.log(e)}));case 5:return this.submitProcess(ut.submitAuthProcess(this.headerRequestFactory())),e.next=8,this.getAsyncSubmitResponse("AUTH").then((function(e){console.log(e),a.submitResponse=e}));case 8:"0"==this.submitResponse.responseCode?(this.showLoading(!1),this.$emit("show-dialogA-modal")):"T"==this.submitResponse.responseCode?this.handleAsyncTempQuotationCreation():"6"==this.submitResponse.responseCode?(this.showLoading(!1),this.$emit("show-no-auth-modal")):"1"==this.submitResponse.responseCode?(this.showLoading(!1),this.$emit("show-dialogA-approve-modal")):"A"==this.submitResponse.responseCode?this.handleAsyncApproveQuotation():(this.showLoading(!1),console.error("Submit response code not returned"),t=this.getLabel("contactWithSmc"),window.smc.NotifyComponent.error(t));case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleAsyncTempQuotationCreation",value:function(){var e=Object(Ae["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.showLoading(!0),this.submitProcess(ut.submitTempQuotationProcess(this.headerRequestFactory())),e.next=4,this.getAsyncSubmitResponse("TEMP").then((function(e){console.log(e),a.submitResponse=e}));case 4:"2"==this.submitResponse.responseCode?(this.showLoading(!1),this.$emit("show-dialogB-C-modal")):"3"==this.submitResponse.responseCode?(this.showLoading(!1),this.$emit("show-dialog-C-modal")):"7"==this.submitResponse.responseCode?(this.showLoading(!1),this.$emit("show-error-modal")):"S"==this.submitResponse.responseCode?this.handleAsyncSubmitQuotation():(this.showLoading(!1),console.error("Submit response code not returned"),t=this.getLabel("contactWithSmc"),window.smc.NotifyComponent.error(t));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleAsyncSubmitQuotation",value:function(){var e=Object(Ae["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.showLoading(!0),this.submitProcess(ut.submitFinalQuotationProcess(this.headerRequestFactory())),e.next=4,this.getAsyncSubmitResponse("SUBM").then((function(e){console.log(e),a.submitResponse=e}));case 4:if("4"!=this.submitResponse.responseCode){e.next=11;break}return e.next=7,this.submitRefreshQuotation("SUBM");case 7:this.showLoading(!1),this.$emit("show-submitted-modal"),e.next=12;break;case 11:"7"==this.submitResponse.responseCode?(this.showLoading(!1),this.$emit("show-error-modal")):(this.showLoading(!1),console.error("Submit response code not returned"),t=this.getLabel("contactWithSmc"),window.smc.NotifyComponent.error(t));case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleAsyncApproveQuotation",value:function(){var e=Object(Ae["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.showLoading(!0),this.submitProcess(ut.submitApproveQuotationProcess(this.headerRequestFactory())),e.next=4,this.getAsyncSubmitResponse("APPR").then((function(e){console.log(e),a.submitResponse=e}));case 4:if("5"!=this.submitResponse.responseCode){e.next=11;break}return e.next=7,this.submitRefreshQuotation("APPR");case 7:this.showLoading(!1),this.$emit("show-approved-modal"),e.next=15;break;case 11:this.showLoading(!1),console.error("Submit response code not returned"),t=this.getLabel("contactWithSmc"),window.smc.NotifyComponent.error(t);case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"submitProcess",value:function(){var e=Object(Ae["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.catch((function(e){a.stopReading=!0,console.error("SubmitProcess error: "+e.response.status)}));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleSubmitDialogAModal",value:function(){var e=this;console.log("Modal A accepted"),setTimeout((function(){e.handleAsyncTempQuotationCreation()}),200)}},{key:"handleSubmitDialogAapproveModal",value:function(){var e=this;console.log("Modal A (approve) accepted"),setTimeout((function(){e.handleAsyncApproveQuotation()}),200)}},{key:"handleSubmitDialogBCModal",value:function(){var e=this;console.log("Modal B_C accepted"),setTimeout((function(){e.handleAsyncSubmitQuotation()}),200)}},{key:"handleSubmitDialogCModal",value:function(){var e=this;console.log("Modal C accepted"),setTimeout((function(){e.handleAsyncSubmitQuotation()}),200)}},{key:"handleSubmitModalClose",value:function(){var e=Object(Ae["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ut.deleteAllSubmitResponse(this.quotInstance.id).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"submitRefreshQuotation",value:function(){var e=Object(Ae["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ut.refreshQuotationProcess(this.headerRequestFactory(),t).then((function(e){a.updateLocalInstance(e)})).catch((function(e){console.log(e);var t=a.getLabel("contactWithSmc");window.smc.NotifyComponent.error(t)}));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateLocalInstance",value:function(e){var t=e;if(t){Object.assign(t,{startDate:(null===t||void 0===t?void 0:t.startDate)&&new Date(t.startDate),validDate:(null===t||void 0===t?void 0:t.validDate)&&new Date(t.validDate),followUpDate:(null===t||void 0===t?void 0:t.followUpDate)&&new Date(t.followUpDate)});t.submitResponses;var a=Object(Et["a"])(t,["submitResponses"]);this.updateInstance(a)}else{console.error("[asyncSubmitRefreshQuotationProcess response was not returned]");var n="Something went wrong. Refresh your browser";window.smc.NotifyComponent.error(n)}}},{key:"getAsyncSubmitResponse",value:function(){var e=Object(Ae["a"])(regeneratorRuntime.mark((function e(t){var a,n,i,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a={},n=!0,i=(new Date).getTime(),s=3e5,o=i+s,console.log("getSubmitResponse remaining time: "+s);case 6:return e.next=8,ut.getSubmitResponse(this.quotInstance.id,t).then((function(e){n=!1,a=e})).catch((function(e){e.response&&404!=e.response.status&&(console.error("getSubmitResponse error: "+e.response.status),n=!1)}));case 8:n&&!this.stopReading&&(this.wait(1e3),console.log("getSubmitResponse remaining time: "+(o-(new Date).getTime())));case 9:if(n&&(new Date).getTime()<o&&!this.stopReading){e.next=6;break}case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"wait",value:function(e){var t=(new Date).getTime(),a=t;while(a<t+e)a=(new Date).getTime()}},{key:"headerRequestFactory",value:function(){var e,t,a,n={id:this.quotInstance.id,customerCode:this.quotInstance.customerCode,userCode:this.quotInstance.userCode,currency:this.quotInstance.currency,salesPesonId:this.quotInstance.salesPersonId,classification:this.quotInstance.classification,forAttentionOf:this.quotInstance.forAttentionOf,quotationReason:this.quotInstance.reason,orderType:this.quotInstance.orderType,headerPretext:this.quotInstance.headerPretext,potentialSales:this.quotInstance.userPotential,discountReason:this.quotInstance.discountReason,validDate:null===(e=this.quotInstance.validDate)||void 0===e?void 0:e.toJSON(),followUp:this.quotInstance.followUp,followUpDate:null===(t=this.quotInstance.followUpDate)||void 0===t?void 0:t.toJSON(),startDate:null===(a=this.quotInstance.startDate)||void 0===a?void 0:a.toJSON(),quotationNumber:this.quotInstance.quotationNumber,quotationTempNumber:this.quotInstance.quotationTempNumber,quotationLines:this.quotInstance.instanceLines,competitor:this.quotInstance.competitor,discountRegistration:this.quotInstance.discountRegistration};return n}}]),a}(m["d"]);go=Object(d["a"])([Object(m["a"])({name:"QUToolsSubmit",components:{QUSubmitDialogAModal:Os,QUSubmitDialogAapproveModal:Es,QUSubmitDialogBCModal:Rs,QUSubmitDialogCModal:Fs,QUSubmitApprovedModal:ao,QUSubmitSubmittedModal:Js,QUSubmitNotAuthorizedModal:co,QUSubmitErrorModal:fo},directives:{LabelTranslate:J},methods:Object(o["a"])(Object(o["a"])({},Object(p["d"])({showLoading:$e,updateInstance:b+"/"+h.mutations.UPDATE_INSTANCE})),Object(p["b"])({})),computed:Object(o["a"])({},Object(p["c"])({quotInstance:"".concat(b,"/").concat(h.getters.SELECTED_INSTANCE),getLabel:"moduleCommonLabels/getLabel"}))})],go);var Co=go,yo=Co,Oo=Object(T["a"])(yo,ps,bs,!1,null,"136329af",null);Oo.options.__file="src/components/QUToolsSubmit.vue";var wo=Oo.exports,Io=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){return Object(r["a"])(this,a),t.apply(this,arguments)}return Object(l["a"])(a,[{key:"handlePrintQuotation",value:function(){var e=Object(Ae["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.selectedInstance.quotationNumber,a=this.selectedInstance.status,!t){e.next=22;break}if(!a||"10"!=a){e.next=8;break}n=this.getLabel("quotationUnapprovedCantBePrinted")||"Quotation can not be printed. The Quotation is not approved",window.smc.NotifyComponent.error(n),e.next=20;break;case 8:return e.prev=8,e.next=11,this.printQuotation(t);case 11:i=this.getLabel("quotationMailSent")||"Quotation Mail Sent",window.smc.NotifyComponent.info(i),e.next=20;break;case 15:e.prev=15,e.t0=e["catch"](8),console.error(e.t0),s=this.getLabel("quotationMailError")||"Could not send Quotation Mail",window.smc.NotifyComponent.error(s);case 20:e.next=23;break;case 22:console.error("No quotation number for selected instance");case 23:case"end":return e.stop()}}),e,this,[[8,15]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleDisplayDiscounts",value:function(){var e=Object(Ae["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.selectedInstance.quotationNumber,!t){e.next=5;break}return this.setLoading(!0),e.next=5,ut.printApprovalWindow(t).then((function(e){a.setDiscountApprovalLines(e),a.setShowDiscountDialog(!0)})).catch((function(e){if(console.error(e),e.response&&401==e.response.status){var t=a.getLabel("approvalWindowUnauthorized")||"No authorization to display Approval Window";window.smc.NotifyComponent.error(t)}else{var n=a.getLabel("approvalWindowError")||"Could not display Approval Window";window.smc.NotifyComponent.error(n)}})).finally((function(){return a.setLoading(!1)}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handlePrintDiscounts",value:function(){var e=Object(Ae["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.selectedInstance.quotationNumber,this.selectedInstance.status,!t){e.next=16;break}return e.prev=3,e.next=6,this.printDiscounts(t);case 6:a=this.getLabel("discountsMailSent")||"Discounts Mail Sent",window.smc.NotifyComponent.info(a),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](3),console.error(e.t0),e.t0.response&&401==e.t0.response.status?(n=this.getLabel("discountUnauthorized")||"No authorization to Print Discounts",window.smc.NotifyComponent.error(n)):(i=this.getLabel("discountsMailError")||"Could not send Discounts Mail",window.smc.NotifyComponent.error(i));case 14:e.next=17;break;case 16:console.error("No quotation number for selected instance");case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleDisplaySummary",value:function(){this.setShowSummaryDialog(!0)}}]),a}(m["d"]);Io=Object(d["a"])([Object(m["a"])({name:"QUTools",components:{QUToolsSubmit:wo},directives:{LabelTranslate:J},computed:Object(o["a"])({},Object(p["c"])({getLabel:"moduleCommonLabels/getLabel",selectedInstance:"".concat(b,"/").concat(h.getters.SELECTED_INSTANCE)})),methods:Object(o["a"])(Object(o["a"])({},Object(p["d"])({setShowSummaryDialog:qe,setShowDiscountDialog:Ue,setDiscountApprovalLines:Me,setLoading:$e})),Object(p["b"])({printDiscounts:bt,printQuotation:pt}))})],Io);var No=Io,jo=No,So=Object(T["a"])(jo,ds,ms,!1,null,null,null);So.options.__file="src/components/QUTools.vue";var _o=So.exports,Eo=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.formatPercentInput="#,##0.##",e.format="#,##0.00",e.formatPercent="#,##0.00%",e.editableChangedPriceDiscount="",e.editableChangedPrice="",e}return Object(l["a"])(a,[{key:"handleTotalChangedDiscountChange",value:function(e){var t=us(e),a=os(this.totalChangedPrice,t);this.editableChangedPrice=zi()(this.format,a),this.editableChangedPriceDiscount=e,this.emitGlobalDiscounts({totalChangedPriceDiscount:e})}},{key:"handleTotalChangedPriceChange",value:function(e){var t=us(e);this.editableChangedPrice=zi()(this.format,t),this.editableChangedPriceDiscount=zi()(this.formatPercentInput,rs(this.totalChangedPrice,t)),this.emitGlobalDiscounts({totalChangedPrice:e})}},{key:"handleEnterPressed",value:function(e,t){"Enter"!==e.key&&13!==e.charCode||t(e.target.value)}},{key:"updateDiscounts",value:function(e){e?(this.editableChangedPrice=e.totalChangedPrice||"",this.editableChangedPriceDiscount=e.totalChangedPriceDiscount||""):this.editableChangedPriceDiscount=""}},{key:"emitGlobalDiscounts",value:function(e){this.$emit("input",e)}},{key:"totalFtp",get:function(){var e=this.lines||[];return e.map((function(e){return(e.bnpPrice||0)*(e.quantity||1)})).reduce(ss,0)}},{key:"totalPrice",get:function(){var e=this.lines||[];return e.map((function(e){return(e.currentCustomerPrice||0)*(e.quantity||1)})).reduce(ss,0)}},{key:"totalRate",get:function(){var e=this.lines||[],t=e.map((function(e){return(e.quantity||1)*os(e.currentCustomerPrice,e.currentCustomerPriceRate)})).reduce(ss,0),a=this.totalPrice||1;return 100-t/a*100}},{key:"totalChangedPrice",get:function(){var e=this.lines||[];return e.map((function(e){return ls(e)*(e.quantity||1)})).reduce(ss,0)}},{key:"totalChangedRate",get:function(){var e=this.totalChangedPrice||0,t=this.totalPrice||1;return 100-e/t*100}},{key:"totalListPrice",get:function(){var e=this.lines||[];return e.map((function(e){return(e.listPrice||0)*(e.quantity||1)})).reduce(ss,0)}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])({default:!1})],Eo.prototype,"readOnly",void 0),Object(d["a"])([Object(m["c"])({default:function(){return[]}})],Eo.prototype,"lines",void 0),Object(d["a"])([Object(m["c"])()],Eo.prototype,"globalDiscounts",void 0),Object(d["a"])([Object(m["e"])("globalDiscounts",{immediate:!0})],Eo.prototype,"updateDiscounts",null),Eo=Object(d["a"])([Object(m["a"])({name:"InfoQuotation",components:{QUTools:_o},directives:{NumericField:Xi,NumberFormat:ns,LabelTranslate:J},model:{prop:"globalDiscounts"}})],Eo);var ko=Eo,Lo=ko,Po=(a(260),Object(T["a"])(Lo,Hi,Yi,!1,null,"5155497e",null));Po.options.__file="src/components/InfoQuotation.vue";var xo=Po.exports,To=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"body-quotation"},[a("div",{staticClass:"tools-quotation"},[a("QUTools")],1),a("div",{staticClass:"table-quotation"},[a("table",{staticClass:"tableQuotation",attrs:{id:"table"}},[a("QUTableHead",{attrs:{labels:e.labels,readOnly:e.readOnly}}),e._l(e.quotInstance.instanceLines,(function(t,n){return a("QUTableBody",{key:n,attrs:{index:n,item:t,labels:e.labels,readOnly:e.readOnly,linesAreLoading:e.linesAreLoading}})})),e.readOnly?e._e():a("QUTableNewLine",{attrs:{labels:e.labels,linesAreLoading:e.linesAreLoading}})],2)]),a("QUTableExcelUtils",{attrs:{quotInstance:e.quotInstance,readOnly:e.readOnly}})],1)},Do=[];To._withStripped=!0;var Ro=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",{staticClass:"d-block-table-cell cell-collapseA",attrs:{scope:"col"}}),a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.labels.crt,expression:"labels.crt"}],staticClass:"d-block-table-cell cell-position",attrs:{scope:"col"}}),a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.labels.nameNumber,expression:"labels.nameNumber"}],staticClass:"d-block-table-cell cell-name",attrs:{scope:"col"}}),a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.labels.qty,expression:"labels.qty"}],staticClass:"d-block-table-cell cell-qty",attrs:{scope:"col"}}),e.getSelectedInstance().discountRegistration?a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.labels.quotSi,expression:"labels.quotSi"}],staticClass:"d-block-table-cell d-md-table-cell d-lg-table-cell d-xl-table-cell cell-sl",attrs:{scope:"col"}}):e._e(),e.getSelectedInstance().discountRegistration?a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.labels.seriesNumber,expression:"labels.seriesNumber"}],staticClass:"d-none d-sm-none d-md-table-cell d-lg-table-cell d-xl-table-cell cell-series",attrs:{scope:"col"}}):e._e(),a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.labels.ftp,expression:"labels.ftp"}],staticClass:"d-none d-xl-table-cell cell-ftp",attrs:{scope:"col"}}),a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.labels.currentCustPrice,expression:"labels.currentCustPrice"}],staticClass:"d-none d-sm-none d-md-table-cell d-lg-table-cell d-xl-table-cell cell-current",attrs:{scope:"col"}}),a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.labels.currentCustRate,expression:"labels.currentCustRate"}],staticClass:"d-none d-sm-none d-md-table-cell d-lg-table-cell d-xl-table-cell cell-rate",attrs:{scope:"col"}}),a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.labels.changedCustPrice,expression:"labels.changedCustPrice"}],staticClass:"d-none d-xl-table-cell cell-changed",attrs:{scope:"col"}}),a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.labels.changedCustRate,expression:"labels.changedCustRate"}],staticClass:"d-none d-xl-table-cell cell-rate",attrs:{scope:"col"}}),a("th",{staticClass:"d-block-table-cell cell-actions",attrs:{scope:"col"}})])])},Ao=[];Ro._withStripped=!0;var qo=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){return Object(r["a"])(this,a),t.apply(this,arguments)}return a}(m["d"]);Object(d["a"])([Object(m["c"])()],qo.prototype,"labels",void 0),Object(d["a"])([Object(m["c"])({default:!1})],qo.prototype,"readOnly",void 0),qo=Object(d["a"])([Object(m["a"])({name:"QUTableHead",components:{},methods:Object(o["a"])({},Object(p["c"])({getSelectedInstance:b+"/"+h.getters.SELECTED_INSTANCE})),computed:{},directives:{LabelTranslate:J}})],qo);var Uo=qo,Mo=Uo,Qo=Object(T["a"])(Mo,Ro,Ao,!1,null,null,null);Qo.options.__file="src/components/QUTableHead.vue";var $o=Qo.exports,Fo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tbody",{class:e.tableColor},[a("WpSpinner",{attrs:{id:"modalSpinner",visible:e.visible}}),a("WpConfirmModal",{ref:"modalChild",attrs:{id:"delete-quotationLine-wpmodal",modalTitle:"label:deleteQuotationLine",message:"label:deleteQuotationLineMessage",acceptButtonLabel:"label:accept",cancelButtonLabel:"label:cancel"},on:{accepted:e.acceptDeleteQuotationLine}}),a("tr",[a("td",{staticClass:"d-block-table-cell cell-collapseA"},[a("a",{attrs:{role:"button",tabindex:"-1"}},[a("i",{staticClass:"fa fa-eye collapsed",attrs:{"data-toggle":"collapse","data-target":".collapse-1-"+e.itemId,"aria-hidden":"true","aria-expanded":"false"}})])]),e.readOnly?a("td",{staticClass:"d-block-table-cell cell-position"},[a("span",{staticClass:"custom-font"},[e._v(e._s(e.item.crt))])]):a("td",{staticClass:"d-block-table-cell cell-position"},[a("input",{directives:[{name:"numeric-field",rawName:"v-numeric-field"}],staticClass:"form-control",attrs:{id:"item-position-"+e.itemId,type:"text",autocomplete:"off",maxlength:"3",disabled:e.linesAreLoading},domProps:{value:this.getPosition()},on:{change:e.movePosition}})]),a("td",{staticClass:"d-block-table-cell cell-name"},[e.readOnly?a("span",{staticClass:"custom-font-blue"},[e._v(e._s(e.item.itemName))]):a("div",{staticClass:"inputGroup"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.partnumber,expression:"partnumber"}],staticClass:"form-control",attrs:{id:"item-name-"+e.itemId,type:"text",autocomplete:"off",maxlength:"30"},domProps:{value:e.partnumber},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.handleOnTabPressed(t)},function(t){return t.type.indexOf("key")||40===t.keyCode?e.handleDownPressed(t):null},function(t){return t.type.indexOf("key")||38===t.keyCode?e.handleUpPressed(t):null}],change:e.handleOnItemNameChange,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleEnterPressed(t)},input:[function(t){t.target.composing||(e.partnumber=t.target.value)},e.handleOnItemNameInput]}}),a("ItemNameModalButton",{attrs:{id:"quot-item-name"+e.itemId},on:{accepted:e.onSelectItem}})],1),this.autocompleteResults&&this.autocompleteResults.length>0?a("QUAutocomplete",{attrs:{results:this.autocompleteResults},on:{"click-result":e.onSelectAutocomplete,"click-outside":e.onClickOutsideAutocomplete,"key-arrow":e.onKeyArrowAutocomplete}}):e._e()],1),a("td",{staticClass:"d-block-table-cell cell-qty"},[e.readOnly?a("span",{staticClass:"custom-font"},[e._v(e._s(e.item.quantity))]):a("input",{directives:[{name:"model",rawName:"v-model",value:e.item.quantity,expression:"item.quantity"},{name:"numeric-field",rawName:"v-numeric-field"}],staticClass:"form-control",attrs:{id:"quantity-"+e.itemId,type:"text",autocomplete:"off"},domProps:{value:e.item.quantity},on:{change:e.handleEditQuantity,input:function(t){t.target.composing||e.$set(e.item,"quantity",t.target.value)}}})]),e.getSelectedInstance().discountRegistration?a("td",{staticClass:"d-block-table-cell d-md-table-cell d-lg-table-cell d-xl-table-cell cell-sl"},[e.readOnly?a("span",{staticClass:"custom-font"},[e._v(e._s(e.item.si))]):a("input",{directives:[{name:"model",rawName:"v-model",value:e.si,expression:"si"},{name:"upper-case-input",rawName:"v-upper-case-input"}],staticClass:"form-control",attrs:{id:e.itemId+"-sifield",type:"text",autocomplete:"off",maxlength:"1"},domProps:{value:e.si},on:{keypress:e.isSI,change:e.handleUpdateSi,input:function(t){t.target.composing||(e.si=t.target.value)}}})]):e._e(),e.getSelectedInstance().discountRegistration?a("td",{staticClass:"d-none d-sm-none d-md-table-cell d-lg-table-cell d-xl-table-cell cell-series"},[e.readOnly||"S"!==e.item.si?e._e():a("input",{directives:[{name:"model",rawName:"v-model",value:e.item.serialNumber,expression:"item.serialNumber"}],staticClass:"form-control",attrs:{id:"serial-num-"+e.itemId,type:"text",autocomplete:"off"},domProps:{value:e.item.serialNumber},on:{change:e.handleUpdateSi,input:function(t){t.target.composing||e.$set(e.item,"serialNumber",t.target.value)}}}),e.readOnly||"I"!==e.item.si&&e.item.si?e._e():a("input",{staticClass:"form-control",attrs:{id:"serial-num-"+e.itemId,type:"text",autocomplete:"off",disabled:""}}),e.readOnly?a("span",{staticClass:"custom-font"},[e._v(e._s(e.item.serialNumber))]):e._e()]):e._e(),a("td",{staticClass:"d-none d-xl-table-cell cell-ftp"},[e.item.listPrice?a("span",{directives:[{name:"number-format",rawName:"v-number-format:[format]",value:e.item.listPrice,expression:"item.listPrice",arg:e.format}],staticClass:"custom-font"}):e._e()]),a("td",{staticClass:"d-none d-sm-none d-md-table-cell d-lg-table-cell d-xl-table-cell cell-current"},[e.item.currentCustomerPrice?a("span",{directives:[{name:"number-format",rawName:"v-number-format:[format]",value:e.item.currentCustomerPrice,expression:"item.currentCustomerPrice",arg:e.format}],staticClass:"custom-font"},[e._v(" "+e._s(e.item.currentCustomerPrice)+" ")]):e._e()]),a("td",{staticClass:"d-none d-sm-none d-md-table-cell d-lg-table-cell d-xl-table-cell cell-rate"},[e.item.currentCustomerPriceRate||0==e.item.currentCustomerPriceRate?a("span",{directives:[{name:"number-format",rawName:"v-number-format:[formatPercent]",value:e.item.currentCustomerPriceRate,expression:"item.currentCustomerPriceRate",arg:e.formatPercent}],staticClass:"custom-font"},[e._v(" "+e._s(e.item.currentCustomerPriceRate)+" ")]):e._e()]),a("td",{staticClass:"d-none d-xl-table-cell cell-changed"},[!e.readOnly&&e.item.currentCustomerPrice&&"02"!=e.getSelectedInstance().classification?a("input",{directives:[{name:"model",rawName:"v-model",value:e.changedCustomerPrice,expression:"changedCustomerPrice"},{name:"numeric-field",rawName:"v-numeric-field"},{name:"number-format",rawName:"v-number-format:[format]",value:e.changedCustomerPrice,expression:"changedCustomerPrice",arg:e.format}],staticClass:"form-control",attrs:{id:"changed-price-"+e.itemId,type:"text",autocomplete:"off"},domProps:{value:e.changedCustomerPrice},on:{change:e.handleInputBlurPrice,input:function(t){t.target.composing||(e.changedCustomerPrice=t.target.value)}}}):e._e(),"02"==e.getSelectedInstance().classification&&e.item.currentCustomerPrice||e.readOnly&&e.item.currentCustomerPrice?a("span",{directives:[{name:"number-format",rawName:"v-number-format:[format]",value:e.changedCustomerPrice,expression:"changedCustomerPrice",arg:e.format}],staticClass:"custom-font"},[e._v(e._s(e.changedCustomerPrice))]):e._e()]),a("td",{staticClass:"d-none d-xl-table-cell cell-rate"},[!e.readOnly&&e.item.currentCustomerPrice&&"02"!=e.getSelectedInstance().classification?a("input",{directives:[{name:"model",rawName:"v-model",value:e.changedCustomerPriceRate,expression:"changedCustomerPriceRate"},{name:"numeric-field",rawName:"v-numeric-field"},{name:"number-format",rawName:"v-number-format:[formatPercent]",value:e.changedCustomerPriceRate,expression:"changedCustomerPriceRate",arg:e.formatPercent}],staticClass:"form-control",attrs:{id:"changed-rate-"+e.itemId,type:"text",autocomplete:"off"},domProps:{value:e.changedCustomerPriceRate},on:{change:e.handleInputBlurPriceRate,input:function(t){t.target.composing||(e.changedCustomerPriceRate=t.target.value)}}}):e._e(),"02"==e.getSelectedInstance().classification&&e.item.currentCustomerPrice||e.readOnly&&e.item.currentCustomerPrice?a("span",{directives:[{name:"number-format",rawName:"v-number-format:[formatPercent]",value:e.changedCustomerPriceRate,expression:"changedCustomerPriceRate",arg:e.formatPercent}],staticClass:"custom-font"},[e._v(e._s(e.changedCustomerPriceRate))]):e._e()]),a("td",{staticClass:"d-block-table-cell cell-actions icoActions"},[a("ul",{staticClass:"actions"},[e.item.isLoading?a("li",[e._m(0)]):e._e(),!e.item.isLoading&&e.item.errorQuotInfo?a("li",[a("span",[a("i",{staticClass:"fas fa-sync-alt",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.loadItemData()}}})])]):e._e(),!e.item.isLoading&&e.item.errorQuantityLabel?a("li",[a("span",{attrs:{"data-tooltip":e.item.errorQuantityLabel,"data-tooltip-position":"bottom"}},[a("i",{staticClass:"fas fa-exclamation-triangle"})])]):e._e(),!e.item.isLoading&&e.item.errorLabel?a("li",[a("span",{attrs:{"data-tooltip":e.item.errorLabel,"data-tooltip-position":"bottom"}},[a("i",{staticClass:"fas fa-exclamation-triangle"})])]):e._e(),!e.item.isLoading&&e.item.availability?a("li",[a("span",{attrs:{"data-tooltip":e.avLabel,"data-tooltip-position":"bottom"}},[a("i",{class:"fas fa-box-open "+this.availabilityColor(e.item.availability)})])]):e._e(),e.item.isLoading||e.item.availability||e.item.errorQuotInfo?e._e():a("li",[a("span",{attrs:{"data-tooltip":e.avLabel,"data-tooltip-position":"bottom"}},[a("i",{class:"fas fa-box-open estado-rojo"})])]),e.item.isLoading?e._e():a("li",[a("a",{class:e.trashIconClass,attrs:{role:"button",tabindex:"-1"},on:{click:function(t){return e.removeQuotationLine()}}},[a("i",{staticClass:"far fa-trash-alt"})])])])])]),e.item.replacementItem?a("tr",{staticClass:"replacement"},[a("td",{staticClass:"general",attrs:{colspan:"11"}},[a("div",{staticClass:"replacementInfo"},[a("span",[e._v(e._s(e.replacementItemTakeOverMessage))]),a("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(t){return e.cancelReplacementItemAlert()}}},[e._v(" "+e._s(this.getLabel("cancel"))+" ")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.acceptReplacementItemAlert()}}},[e._v(" "+e._s(this.getLabel("accept"))+" ")])])])]):e._e(),a("tr",{class:["details in p-3 collapse","collapse-1-"+e.itemId]},[a("td",{staticClass:"general",attrs:{colspan:"11"}},[a("div",{staticClass:"moreInfo moreInfoDispositivos flex-container wrap"},[e.getSelectedInstance().discountRegistration?a("div",{staticClass:"flex-item d-md-none d-lg-none d-xl-none item-qt-series"},[a("p",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.labels.seriesNumber,expression:"labels.seriesNumber"}],staticClass:"item-name"}),e.readOnly||"S"!==e.item.si?e._e():a("input",{directives:[{name:"model",rawName:"v-model",value:e.item.serialNumber,expression:"item.serialNumber"}],staticClass:"form-control",attrs:{id:"serial-number-mob-"+e.itemId,type:"text",autocomplete:"off"},domProps:{value:e.item.serialNumber},on:{change:e.handleUpdateSi,input:function(t){t.target.composing||e.$set(e.item,"serialNumber",t.target.value)}}}),e.readOnly||"I"!==e.item.si&&e.item.si?e._e():a("input",{staticClass:"form-control",attrs:{id:"serial-number-mob-"+e.itemId,type:"text",autocomplete:"off",disabled:""}}),e.readOnly?a("p",{staticClass:"item-value custom-font"},[e._v(" "+e._s(e.item.serialNumber)+" ")]):e._e()]):e._e(),a("div",{staticClass:"flex-item d-xl-none item-qt-ftp"},[a("p",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.labels.ftp,expression:"labels.ftp"}],staticClass:"item-name"}),a("p",{staticClass:"item-value custom-font"},[e._v(" "+e._s(e.item.listPrice)+" ")])]),a("div",{staticClass:"flex-item d-md-none d-lg-none d-xl-none item-qt-current"},[a("p",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.labels.currentCustPrice,expression:"labels.currentCustPrice"}],staticClass:"item-name"}),e.detailsLoaded?a("p",{staticClass:"item-value custom-font"},[e._v(" "+e._s(e.item.currentCustomerPrice)+" ")]):e._e()]),a("div",{staticClass:"flex-item d-md-none d-lg-none d-xl-none item-qt-rate"},[a("p",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.labels.currentCustRate,expression:"labels.currentCustRate"}],staticClass:"item-name"}),e.detailsLoaded?a("p",{staticClass:"item-value custom-font"},[e._v(" "+e._s(e.item.currentCustPriceRate)+" ")]):e._e()]),a("div",{staticClass:"flex-item d-xl-none item-qt-changed"},[a("p",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.labels.changedCustPrice,expression:"labels.changedCustPrice"}],staticClass:"item-name"}),!e.readOnly&&e.item.currentCustomerPrice&&"02"!=e.getSelectedInstance().classification?a("input",{directives:[{name:"model",rawName:"v-model",value:e.changedCustomerPrice,expression:"changedCustomerPrice"},{name:"numeric-field",rawName:"v-numeric-field"}],staticClass:"form-control",attrs:{id:"changed-price-mob-"+e.itemId,type:"text",autocomplete:"off"},domProps:{value:e.changedCustomerPrice},on:{blur:e.handleInputBlurPrice,input:function(t){t.target.composing||(e.changedCustomerPrice=t.target.value)}}}):e._e(),"02"==e.getSelectedInstance().classification&&e.item.currentCustomerPrice||e.readOnly&&e.item.currentCustomerPrice?a("p",{directives:[{name:"number-format",rawName:"v-number-format:[format]",value:e.changedCustomerPrice,expression:"changedCustomerPrice",arg:e.format}],staticClass:"item-value custom-font"},[e._v(" "+e._s(e.changedCustomerPrice)+" ")]):e._e()]),a("div",{staticClass:"flex-item d-xl-none item-qt-rate"},[a("p",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.labels.changedCustRate,expression:"labels.changedCustRate"}],staticClass:"item-name"}),!e.readOnly&&e.item.currentCustomerPrice&&"02"!=e.getSelectedInstance().classification?a("input",{directives:[{name:"model",rawName:"v-model",value:e.changedCustomerPriceRate,expression:"changedCustomerPriceRate"},{name:"numeric-field",rawName:"v-numeric-field"}],staticClass:"form-control",attrs:{id:"changed-rate-mob-"+e.itemId,autocomplete:"off"},domProps:{value:e.changedCustomerPriceRate},on:{blur:e.handleInputBlurPriceRate,input:function(t){t.target.composing||(e.changedCustomerPriceRate=t.target.value)}}}):e._e(),"02"==e.getSelectedInstance().classification&&e.item.currentCustomerPrice||e.readOnly&&e.item.currentCustomerPrice?a("p",{directives:[{name:"number-format",rawName:"v-number-format:[formatPercent]",value:e.changedCustomerPriceRate,expression:"changedCustomerPriceRate",arg:e.formatPercent}],staticClass:"item-value custom-font"},[e._v(" "+e._s(e.changedCustomerPriceRate)+" ")]):e._e()]),a("div",{staticClass:"flex-item flex-grow-1"},[a("p",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.labels.textPerLine,expression:"labels.textPerLine"}],staticClass:"item-name"}),a("textarea",{staticClass:"form-control",attrs:{id:"text-per-line"+e.itemId,type:"text",disabled:e.readOnly,rows:"2"},domProps:{value:e.item.textPerLine},on:{input:function(t){return e.lengthControl(e.item,t)},change:e.handleEditQuotationLine}})])])])])],1)},Wo=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"spinner-grow text-primary smcsmall",attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[e._v("Loading...")])])}];Fo._withStripped=!0;a(143);var Bo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("button",{staticClass:"btn btn-input",attrs:{type:"button",tabindex:"-1"},on:{click:e.onShowModal}},[a("i",{staticClass:"fas fa-stream"})]),e.showModal?a("transition",{attrs:{name:"modal"}},[a("div",{directives:[{name:"outside-click",rawName:"v-outside-click",value:e.onClose,expression:"onClose"}],ref:"wpModal",staticClass:"modal modal-mask",attrs:{id:e.id,role:"dialog"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h4",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:promptItemName",expression:"'label:promptItemName'"}],staticClass:"modal-title text-dark"}),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}},[e._v(" × ")])]),a("div",{staticClass:"modal-body text-dark"},[a("div",{staticClass:"col-md-4 d-inline-block"},[a("div",{staticClass:"modal-search"},[a("div",{staticClass:"inputGroup"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.partnumber,expression:"partnumber"}],staticClass:"form-control modalpadding",attrs:{type:"text",autocomplete:"off"},domProps:{value:e.partnumber},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch(t)},input:function(t){t.target.composing||(e.partnumber=t.target.value)}}}),a("button",{staticClass:"btn btn-input",attrs:{type:"button",tabindex:"-1"},on:{click:e.onSearch}},[a("i",{staticClass:"fas fa-search"})]),a("label",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:itemName",expression:"'label:itemName'"}]},[a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:itemName",expression:"'label:itemName'"}]})])])])]),a("div",{staticClass:"position-relative d-flex search-content"},[a("WpSpinner",{attrs:{id:"modalSpinner",visible:e.searchTableLoadingData}}),e.searchTableData&&e.searchTableData.length>0?a("div",{staticClass:"modal-list scrollbar scrollbar-primary",attrs:{id:"itemName-table"}},[a("div",{staticClass:"force-overflow-modal"},[a("table",{staticClass:"table table-modal footable footable-1 breakpoint-lg",attrs:{id:"table"}},[a("thead",[a("tr",{staticClass:"footable-header"},[a("th",{staticClass:"footable-first-visible",staticStyle:{display:"table-cell"},attrs:{"data-field":"state","data-radio":"true"}}),a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:itemName",expression:"'label:itemName'"}]}),a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:itemNumber",expression:"'label:itemNumber'"}]}),a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:description",expression:"'label:description'"}]})])]),a("tbody",e._l(e.searchTableData,(function(t,n){return a("tr",{key:n},[a("td",[a("input",{staticClass:"radio-table",attrs:{type:"radio"},domProps:{value:t.itemName},on:{change:function(a){return e.onSelectValue(t.itemName)}}})]),a("td",[e._v(e._s(t.itemName))]),a("td",[e._v(e._s(t.itemNumber))]),a("td",[e._v(e._s(t.description))])])})),0)])])]):e._e(),e.searchTableData&&0==e.searchTableData.length?a("div",{staticClass:"not-found"},[a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:noResultsFound",expression:"'label:noResultsFound'"}]})]):e._e()],1)]),a("div",{staticClass:"modal-footer"},[a("button",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:close",expression:"'label:close'"}],staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}}),a("button",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:select",expression:"'label:select'"}],staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal",disabled:""===e.selectedValue},on:{click:e.onAccept}})])])])])]):e._e()],1)},Vo=[];Bo._withStripped=!0;var Go=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.search="",e.searchTableData=[],e.selectedValue="",e.searchTableLoadingData=!1,e.showModal=!1,e}return Object(l["a"])(a,[{key:"created",value:function(){}},{key:"mounted",value:function(){}},{key:"onShowModal",value:function(){this.showModal=!0}},{key:"onSearch",value:function(){var e=this;this.searchTableLoadingData=!0,st.getItems(this.search).then((function(t){e.searchTableData=t})).finally((function(){return e.searchTableLoadingData=!1}))}},{key:"onSelectValue",value:function(e){this.selectedValue=e}},{key:"onClose",value:function(){this.search="",this.searchTableData=[],this.selectedValue="",this.showModal=!1}},{key:"onAccept",value:function(){this.$emit("accepted",this.selectedValue),this.search="",this.searchTableData=[],this.selectedValue="",this.showModal=!1}},{key:"partnumber",get:function(){return this.search},set:function(e){this.search=(null===e||void 0===e?void 0:e.toUpperCase())||e}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])()],Go.prototype,"id",void 0),Go=Object(d["a"])([Object(m["a"])({name:"ItemNameModalButton",components:{WpSpinner:W},directives:{OutsideClick:ue,LabelTranslate:J},computed:Object(o["a"])({},Object(p["c"])({getLabel:"moduleCommonLabels/getLabel"}))})],Go);var Ho=Go,Yo=Ho,Jo=(a(262),Object(T["a"])(Yo,Bo,Vo,!1,null,"3430fabe",null));Jo.options.__file="src/components/ItemNameModalButton.vue";var zo=Jo.exports,Ko=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"outside-autocomplete-click",rawName:"v-outside-autocomplete-click",value:e.onClickOutside,expression:"onClickOutside"}],attrs:{id:"autocomplete-result"}},e._l(e.results,(function(t,n){return a("p",{key:n,class:e.isHover(n+1),attrs:{id:"autocomplete-element-"+(n+1)},on:{click:function(a){return e.onClickResult(t)},mouseover:function(t){return e.onMouseOver(n+1)}}},[e._v(" "+e._s(t)+" ")])})),0)},Zo=[];Ko._withStripped=!0;var Xo,er=function(e,t,a){"autocomplete-element"!=e.target.getAttribute("id")&&a&&a()},tr={bind:function(e,t,a){var n=t.value;Xo=function(t){er(t,e,n)},document.body.addEventListener("click",Xo)},unbind:function(e){document.body.removeEventListener("click",Xo)}},ar=tr,nr=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.position=0,e}return Object(l["a"])(a,[{key:"created",value:function(){this.$parent.$on("key-up",this.onUpPressed),this.$parent.$on("key-down",this.onDownPressed)}},{key:"mounted",value:function(){}},{key:"onAutoCompleteResultsChanged",value:function(){this.position=0}},{key:"onUpPressed",value:function(){0==this.position?this.position=this.results.length:this.position=this.position-1==0?this.results.length:this.position-1,this.$emit("key-arrow",this.results[this.position-1])}},{key:"onDownPressed",value:function(){0==this.position?this.position=1:this.position=this.position+1==this.results.length+1?1:this.position+1,this.$emit("key-arrow",this.results[this.position-1])}},{key:"onMouseOver",value:function(e){this.position=e}},{key:"onClickResult",value:function(e){this.$emit("click-result",e)}},{key:"onClickOutside",value:function(){this.$emit("click-outside")}},{key:"isHover",value:function(e){return this.position==e?"hover":""}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])()],nr.prototype,"results",void 0),Object(d["a"])([Object(m["e"])("results.length")],nr.prototype,"onAutoCompleteResultsChanged",null),nr=Object(d["a"])([Object(m["a"])({name:"QUAutocomplete",components:{},directives:{OutsideAutocompleteClick:ar},computed:{}})],nr);var ir=nr,sr=ir,or=(a(263),Object(T["a"])(sr,Ko,Zo,!1,null,"0c0dd788",null));or.options.__file="src/components/QUAutocomplete.vue";var rr=or.exports,lr={bind:function(e,t){if(void 0===t.value||""!==t.value&&t.value){var a=function(e){void 0!==e.target.value&&(e.target.value=e.target.value.toUpperCase())};e.addEventListener("input",a)}}},cr=lr,ur=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.format="#,##0.00",e.formatPercent="#,##0.00%",e.autocompleteResults=[],e.visible=!1,e.detailsLoaded=!1,e.changedCustomerPrice=0,e.changedCustomerPriceRate=0,e.replacementItem="",e.message="",e}return Object(l["a"])(a,[{key:"mounted",value:function(){this.readOnly?this.calculateSubmittedChangedValues():this.calculateEditingChangedValues(),this.handlePrices(),this.previousItemName=this.item.itemName}},{key:"handleGetDetails",value:function(){this.item.isLoading=!1,this.readOnly?this.calculateSubmittedChangedValues():this.calculateEditingChangedValues(),this.handlePrices(),this.previousItemName=this.item.itemName}},{key:"getPosition",value:function(){var e=this.getSelectedInstance().instanceLines.map((function(e){return e.id})).indexOf(this.item.id);return-1==e?1:e+1}},{key:"movePosition",value:function(){var e=Object(Ae["a"])(regeneratorRuntime.mark((function e(t){var a,n,i,s,o,r,l,c=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.target.value<1||t.target.value>this.getSelectedInstance().instanceLines.length)){e.next=5;break}return a=this.$store.getters["moduleCommonLabels/getLabel"]("linePositionError"),window.smc.NotifyComponent.warn(a),this.$forceUpdate(),e.abrupt("return");case 5:return this.visible=!0,n=(this.getSelectedInstance().instanceLines||[]).map((function(e){return Object.assign({},e)})),i=this.getPosition()-1,s=t.target.value-1,o=1,r=this.immutableMove(n,i,s).map((function(e){return Object.assign(e,e.crt=o++)})),this.updateInstanceLocal({id:this.getSelectedInstance().id,fieldName:"instanceLines",value:r}),l=JSON.stringify(this.getSelectedInstance()),e.next=15,ut.editInstance(this.selectedInstanceId,l).catch((function(e){if(e.response&&e.response.status){var t=c.$store.getters["moduleCommonLabels/getLabel"]("contactWithSmc");window.smc.NotifyComponent.error(t)}})).finally((function(){return c.visible=!1}));case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"immutableMove",value:function(e,t,a){return e.reduce((function(e,n,i,s){return t===a&&e.push(n),i===t||(t<a&&e.push(n),i===a&&e.push(s[t]),t>a&&e.push(n)),e}),[])}},{key:"handleOnTabPressed",value:function(){console.log("(0) - @keydown.tab"),this.autocompleteResults=[]}},{key:"handleOnItemNameChange",value:function(e){this.autocompleteResults.length>0?console.warn("(1) - @change preventDefault"):(console.log("(1) - @change"),this.item.itemName=e.target.value,this.handleEditQuotationLine(),this.resetPrices())}},{key:"handleEnterPressed",value:function(){this.autocompleteResults.length>0?this.previousItemName==this.item.itemName?(this.autocompleteResults=[],console.warn("(2) - @keyup.enter preventDefault")):(console.log("(2) - @keyup.enter"),this.autocompleteResults=[],this.handleEditQuotationLine(),this.resetPrices()):console.warn("(2) - @keyup.enter preventDefault")}},{key:"onSelectAutocomplete",value:function(e){console.log("(-) - @click-result"),this.item.itemName=e,this.autocompleteResults=[],this.handleEditQuotationLine(),this.resetPrices()}},{key:"onClickOutsideAutocomplete",value:function(){this.autocompleteResults=[],this.previousItemName==this.item.itemName?console.warn("(-) - @click-outside preventDefault"):(console.log("(-) - @click-outside"),this.handleEditQuotationLine(),this.resetPrices())}},{key:"handleDownPressed",value:function(e){e.preventDefault(),this.autocompleteResults.length>0&&this.$emit("key-down")}},{key:"handleUpPressed",value:function(e){e.preventDefault(),this.autocompleteResults.length>0&&this.$emit("key-up")}},{key:"handleOnItemNameInput",value:function(){var e=this;this.item.itemName?st.getMatchingItems(this.getSelectedInstance().userCode,this.item.itemName,"6").then((function(t){if(t.search==e.item.itemName){console.log(t);var a=document.getElementById("item-name-"+e.itemId),n=!1;a&&a===document.activeElement&&(n=!0),t.itemNames&&n?e.autocompleteResults=t.itemNames:e.autocompleteResults=[]}})):this.autocompleteResults=[]}},{key:"onSelectItem",value:function(e){this.item.itemName=e,this.handleEditQuotationLine(),this.resetPrices()}},{key:"onKeyArrowAutocomplete",value:function(e){this.item.itemName=e}},{key:"isSI",value:function(e){return"Enter"==e.key||("I"==e.key.toUpperCase()||"S"==e.key.toUpperCase()||void e.preventDefault())}},{key:"reloadOrderLine",value:function(){this.item.forceRefresh&&1==this.item.forceRefresh&&(this.item.forceRefresh=!1,this.resetCurrentPrices(),this.loadItemData())}},{key:"resetOrderLine",value:function(){this.item.forceReset&&1==this.item.forceReset&&(this.item.forceReset=!1,this.resetPrices(),this.loadItemData())}},{key:"handleChangeCustPrice",value:function(){this.readOnly?(this.changedCustomerPrice=this.item.changedCustomerPrice,this.changedCustomerPriceRate=this.item.changedCustomerPriceRate):null!=this.item.changedCustomerPrice?(this.changedCustomerPrice=this.item.changedCustomerPrice,this.calculatePriceRate()):this.item.changedCustomerPrice==this.item.listPrice&&(this.changedCustomerPrice=this.item.changedCustomerPrice,this.changedCustomerPriceRate=0)}},{key:"handleChangeCustPriceRate",value:function(){this.readOnly?(this.changedCustomerPrice=this.item.changedCustomerPrice,this.changedCustomerPriceRate=this.item.changedCustomerPriceRate):(this.item.changedCustomerPriceRate||0===this.item.changedCustomerPriceRate)&&(this.changedCustomerPriceRate=this.item.changedCustomerPriceRate,this.calculatePrice())}},{key:"handlePrices",value:function(){this.item.availability?this.readOnly?this.calculateSubmittedChangedValues():this.calculateEditingChangedValues():this.loadItemData()}},{key:"loadItemData",value:function(){this.preventNullItemQuantity()&&this.handleGetQuotationLineInfo()}},{key:"preventNullItemQuantity",value:function(){var e=this;return this.item.quantity&&0!=this.item.quantity?(this.item.errorQuantity=!1,!0):(this.item.isLoading=!0,new Promise((function(){setTimeout((function(){var t=e.$store.getters["moduleCommonLabels/getLabel"]("quantityFieldRequired");window.smc.NotifyComponent.error(t),e.item.errorQuantity=!0,e.item.errorQuotInfo=!1;var a=e.isValidSerialNumber();if(e.item.errorSI=a,a){var n=e.$store.getters["moduleCommonLabels/getLabel"]("incorrectSerial");window.smc.NotifyComponent.error(n)}e.item.isLoading=!1,e.cleanItemToSaveInBD(),e.updateQuotationLine(e.item,!0)}),Math.floor(200*Math.random())+100)})),!1)}},{key:"handleGetQuotationLineInfo",value:function(){var e=this;this.item.isLoading=!0;var t={userCode:this.getSelectedInstance().userCode,itemName:this.item.itemName&&0!==this.item.itemName.length&&this.item.itemName.trim()?this.item.itemName:" ",quantity:this.item.quantity||1,instanceId:this.item.idInstance};this.getQuotationLineInfo(t).then(function(){var a=Object(Ae["a"])(regeneratorRuntime.mark((function a(n){var i,s,o,r,l,c,u,d,m,p,b;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e.selectedInstanceId||e.selectedInstanceId!=t.instanceId){a.next=82;break}if(n.lineAmount||n.rate||n.salesPrice){a.next=11;break}i=e.$store.getters["moduleCommonLabels/getLabel"]("errorPrices"),window.smc.NotifyComponent.error(i),e.item.errorQuotInfo=!0,s=e.isValidSerialNumber(),e.item.errorSI=s,s&&(o=e.$store.getters["moduleCommonLabels/getLabel"]("incorrectSerial"),window.smc.NotifyComponent.error(o)),e.readOnly?e.updateQuotationLine(e.item,!1):(e.resetCurrentPrices(),e.updateQuotationLine(e.item,!0)),a.next=80;break;case 11:if(e.detailedLine=n,e.detailsLoaded=!0,e.item.currentCustomerPrice=e.detailedLine.lineAmount,e.item.currentCustomerPriceRate=e.detailedLine.rate,e.item.availability=e.detailedLine.availability,e.item.listPrice=e.detailedLine.salesPrice,e.item.orderType=e.detailedLine.orderType,e.item.itemNumber=e.detailedLine.itemNumber,e.item.bnpPrice=e.detailedLine.bnpPrice,r=e.item.quantity||0,null!=e.detailedLine.correctedQuantity&&e.detailedLine.correctedQuantity!=r?(e.item.previousQuantity=r,e.item.quantity=e.detailedLine.correctedQuantity,l=e.getLabel("quantityItem").replace("{0}",e.item.previousQuantity+""),e.item.errorQuantityLabel=l):(e.item.previousQuantity=r,e.item.quantity=r,e.item.errorQuantityLabel=""),e.getSelectedInstance().currency=e.detailedLine.currency,e.readOnly?e.calculateSubmittedChangedValues():e.calculateEditingChangedValues(),c=e.isValidSerialNumber(),e.item.errorSI=c,c&&(u=e.$store.getters["moduleCommonLabels/getLabel"]("incorrectSerial"),window.smc.NotifyComponent.error(u)),e.readOnly||!e.item.itemName){a.next=76;break}if("90"!=e.detailedLine.statusItemWarehouse){a.next=37;break}return e.item.errorValidation=!0,d=e.getLabel("discontinuedItem").replace("{0}",e.item.itemName),window.smc.NotifyComponent.error(d),e.item.errorLabel=d,a.next=35,e.updateQuotationLine(e.item,!0);case 35:a.next=74;break;case 37:if("50"!=e.detailedLine.statusItemWarehouse){a.next=50;break}if(!e.detailedLine.replacementItem){a.next=46;break}m=e.getLabel("replaceItem").replace("{0}",e.item.itemName).replace("{1}",e.detailedLine.replacementItem),window.smc.NotifyComponent.warn(m),e.item.errorLabel=m,e.item.itemName=e.detailedLine.replacementItem,e.handleEditQuotationLine(),a.next=48;break;case 46:return a.next=48,e.updateQuotationLine(e.item,!0);case 48:a.next=74;break;case 50:if("80"!=e.detailedLine.statusItemWarehouse||e.detailedLine.replacementItem){a.next=59;break}return e.item.errorValidation=!0,p=e.getLabel("discontinuedItem").replace("{0}",e.item.itemName),window.smc.NotifyComponent.error(p),e.item.errorLabel=p,a.next=57,e.updateQuotationLine(e.item,!0);case 57:a.next=74;break;case 59:if("80"!=e.detailedLine.statusItemWarehouse||!e.detailedLine.replacementItem){a.next=69;break}return e.item.replacementItem=e.detailedLine.replacementItem,e.item.errorValidation=!0,b=e.getLabel("discontinuedItem").replace("{0}",e.item.itemName),window.smc.NotifyComponent.error(b),e.item.errorLabel=b,a.next=67,e.updateQuotationLine(e.item,!0);case 67:a.next=74;break;case 69:return e.item.errorLabel="",e.item.errorValidation=!1,e.item.errorQuotInfo=!1,a.next=74,e.updateQuotationLine(e.item,!0);case 74:a.next=80;break;case 76:return e.item.errorLabel="",e.item.errorQuotInfo=!1,a.next=80,e.updateQuotationLine(e.item,!0);case 80:a.next=83;break;case 82:console.warn("Avoided getting "+t.itemName+" item information from tab "+t.instanceId);case 83:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(a){if(e.selectedInstanceId&&e.selectedInstanceId==t.instanceId){var n=e.$store.getters["moduleCommonLabels/getLabel"]("contactWithSmc");window.smc.NotifyComponent.error(n),e.item.errorQuotInfo=!0,e.resetCurrentPrices(),e.updateQuotationLine(e.item,!1)}else console.warn("Avoided getting "+t.itemName+" item information from tab "+t.instanceId)})).finally((function(){e.selectedInstanceId&&e.selectedInstanceId==t.instanceId&&(e.item.isLoading=!1)}))}},{key:"updateQuotationLine",value:function(){var e=Object(Ae["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.updateLocalQuotationLine(t),!a){e.next=4;break}return e.next=4,this.editQuotationLine(t);case 4:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"updateLocalQuotationLine",value:function(e){var t=this.getSelectedInstance(),a=[];a=t.instanceLines.map((function(e){return Object.assign({},e)})),this.updateInstanceLocal({id:e.idInstance||t.id,fieldName:"instanceLines",value:a})}},{key:"onConfirmModalAccept",value:function(){this.item.itemName=this.detailedLine.replacementItem}},{key:"resetPrices",value:function(){this.item.changedCustomerPrice=void 0,this.item.changedCustomerPriceRate=void 0,this.item.currentCustomerPrice=void 0,this.item.currentCustomerPriceRate=void 0,this.item.availability=void 0,this.item.bnpPrice=void 0,this.item.listPrice=void 0}},{key:"resetCurrentPrices",value:function(){this.item.currentCustomerPrice=void 0,this.item.currentCustomerPriceRate=void 0,this.item.availability=void 0,this.item.bnpPrice=void 0,this.item.listPrice=void 0}},{key:"handleEditQuantity",value:function(){this.handleEditQuotationLine(),this.resetCurrentPrices()}},{key:"handleUpdateSi",value:function(){this.item.si||(this.item.si="I"),this.handleEditQuotationLine()}},{key:"handleInputBlurPrice",value:function(e){var t=e.target;t.value?this.changedCustomerPrice=parseFloat(t.value):this.changedCustomerPrice=this.item.listPrice,this.changedCustomerPrice>this.item.listPrice&&(this.changedCustomerPrice=this.item.listPrice),this.calculatePriceRate(),this.item.changedCustomerPriceRate=void 0,this.handleEditQuotationLine()}},{key:"calculatePriceRate",value:function(){this.changedCustomerPriceRate=rs(this.item.listPrice,this.changedCustomerPrice,2),this.item.changedCustomerPrice=this.changedCustomerPrice}},{key:"handleInputBlurPriceRate",value:function(e){var t=e.target;this.changedCustomerPriceRate=parseFloat(t.value||"0"),this.changedCustomerPriceRate<0&&(this.changedCustomerPriceRate=0),this.calculatePrice(),this.item.changedCustomerPrice=void 0,this.handleEditQuotationLine()}},{key:"calculatePrice",value:function(){this.changedCustomerPrice=os(this.item.listPrice,this.changedCustomerPriceRate,2),this.item.changedCustomerPriceRate=this.changedCustomerPriceRate}},{key:"handleEditQuotationLine",value:function(){var e=Object(Ae["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.item.isLoading=!0,this.updateInstanceLocal({id:this.getSelectedInstance().id,fieldName:"globalDiscounts",value:void 0}),e.next=4,this.preventNullItemName();case 4:this.previousItemName=this.item.itemName,this.updateQuotationLine(this.item,!0).then((function(){t.loadItemData()})).catch((function(e){console.log(e);var a=t.$store.getters["moduleCommonLabels/getLabel"]("contactWithSmc");window.smc.NotifyComponent.error(a),t.item.isLoading=!1,t.item.errorQuotInfo=!0,t.resetCurrentPrices(),t.updateQuotationLine(t.item,!1)}));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"removeQuotationLine",value:function(){this.$emit("show-confirm-modal")}},{key:"acceptDeleteQuotationLine",value:function(){var e=this;this.visible=!0,this.deleteQuotationLine(this.itemId).then((function(){var t=1,a=(e.getSelectedInstance().instanceLines||[]).map((function(e){return Object.assign({},e,e.crt=t++)}));e.updateInstanceLocal({id:e.getSelectedInstance().id,fieldName:"instanceLines",value:a});var n=JSON.stringify(e.getSelectedInstance());ut.editInstance(e.selectedInstanceId,n).catch((function(t){if(t.response&&t.response.status){var a=e.$store.getters["moduleCommonLabels/getLabel"]("contactWithSmc");window.smc.NotifyComponent.error(a)}}))})).catch((function(t){console.error(t);var a=e.$store.getters["moduleCommonLabels/getLabel"]("contactWithSmc");window.smc.NotifyComponent.error(a)})).finally((function(){return e.visible=!1}))}},{key:"availabilityColor",value:function(e){return"LOCAL"==e?"estado-verde":"EUROPE"==e?"estado-naranja":"UNAVAILABLE"==e?"estado-rojo":""}},{key:"cancelReplacementItemAlert",value:function(){this.item.replacementItem="",this.updateQuotationLine(this.item,!1)}},{key:"acceptReplacementItemAlert",value:function(){this.item.itemName=this.item.replacementItem,this.item.replacementItem="",this.item.errorLabel="",this.item.errorValidation=!1,this.resetPrices(),this.handleEditQuotationLine()}},{key:"calculateSubmittedChangedValues",value:function(){this.changedCustomerPrice=this.item.changedCustomerPrice,this.changedCustomerPriceRate=this.item.changedCustomerPriceRate}},{key:"calculateEditingChangedValues",value:function(){this.item.changedCustomerPriceRate?(this.changedCustomerPriceRate=this.item.changedCustomerPriceRate,this.changedCustomerPrice=os(this.item.listPrice,this.item.changedCustomerPriceRate,2)):this.item.changedCustomerPrice?(this.changedCustomerPrice=this.item.changedCustomerPrice,this.changedCustomerPriceRate=rs(this.item.listPrice,this.item.changedCustomerPrice,2)):(this.item.changedCustomerPrice=this.item.currentCustomerPrice,this.changedCustomerPrice=this.item.currentCustomerPrice,this.changedCustomerPriceRate=rs(this.item.listPrice,this.item.changedCustomerPrice,2))}},{key:"cleanItemToSaveInBD",value:function(){this.item.bnpPrice=void 0,this.item.currentCustomerPrice=void 0,this.item.currentCustomerPriceRate=void 0,this.item.changedCustomerPrice=void 0,this.item.changedCustomerPriceRate=void 0,this.item.listPrice=void 0,this.item.itemNumber=void 0}},{key:"preventNullItemName",value:function(){var e=Object(Ae["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.item.itemName&&0!==this.item.itemName.length&&this.item.itemName.trim()){e.next=5;break}return t=this.$store.getters["moduleCommonLabels/getLabel"]("itemNameFieldRequired"),window.smc.NotifyComponent.error(t),e.next=5,ut.getInstance(this.selectedInstanceId).then((function(e){var t=e.instanceLines.map((function(e){return e.id})).indexOf(a.item.id);a.item.itemName=-1==t?" ":e.instanceLines[t].itemName})).catch((function(e){console.log(e),a.item.itemName=" "})).finally((function(){return a.updateQuotationLine(a.item,!1)}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"isValidSerialNumber",value:function(){var e=!1;return"S"==this.item.si?e=!this.item.serialNumber||(!this.item.itemName||!this.item.itemName.includes(this.item.serialNumber)||this.item.serialNumber==this.item.itemName):"I"==this.item.si?(this.item.serialNumber="",e=!1):(this.item.si="I",this.item.serialNumber="",e=!1),e}},{key:"lengthControl",value:function(e,t){var a=e.textPerLine||"",n=t.target.value,i=n.split("\n");if(i.length>2)return console.warn("Two line limit exceeded"),void(document.getElementById("text-per-line"+e.id).value=a);for(var s=0;s<i.length;s++)if(i[s].length>60)return console.warn("Line length exceeded"),void(document.getElementById("text-per-line"+e.id).value=a);m["d"].set(this.item,"textPerLine",n)}},{key:"si",get:function(){return this.item.si},set:function(e){this.item.si=(null===e||void 0===e?void 0:e.toUpperCase())||e}},{key:"partnumber",get:function(){return this.item.itemName},set:function(e){this.item.itemName=(null===e||void 0===e?void 0:e.toUpperCase())||e}},{key:"itemId",get:function(){return this.item.id}},{key:"tableColor",get:function(){return this.item.errorQuotInfo||this.item.errorSI||this.item.errorQuantity||this.item.errorValidation?"table-alter-danger":"initial"}},{key:"trashIconClass",get:function(){return this.readOnly?"btn hidden":this.linesAreLoading?"btn disabled":"btn"}},{key:"avLabel",get:function(){return this.item.availability?this.$store.getters["moduleCommonLabels/getLabel"](this.item.availability.toLowerCase()):this.$store.getters["moduleCommonLabels/getLabel"]("unavailable")}},{key:"replacementItemTakeOverMessage",get:function(){if(this.item.replacementItem){var e=this.getLabel("replaceItemTakeOver").replace("{0}",this.item.replacementItem);return e}return""}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])()],ur.prototype,"item",void 0),Object(d["a"])([Object(m["c"])()],ur.prototype,"index",void 0),Object(d["a"])([Object(m["c"])()],ur.prototype,"labels",void 0),Object(d["a"])([Object(m["c"])({default:!1})],ur.prototype,"readOnly",void 0),Object(d["a"])([Object(m["c"])({default:!1})],ur.prototype,"linesAreLoading",void 0),Object(d["a"])([Object(m["e"])("item.id")],ur.prototype,"handleGetDetails",null),Object(d["a"])([Object(m["e"])("item.forceRefresh")],ur.prototype,"reloadOrderLine",null),Object(d["a"])([Object(m["e"])("item.forceReset")],ur.prototype,"resetOrderLine",null),Object(d["a"])([Object(m["e"])("item.changedCustomerPrice")],ur.prototype,"handleChangeCustPrice",null),Object(d["a"])([Object(m["e"])("item.changedCustomerPriceRate")],ur.prototype,"handleChangeCustPriceRate",null),ur=Object(d["a"])([Object(m["a"])({name:"QUTableBody",components:{ItemNameModalButton:zo,WpSpinner:W,WpConfirmModal:Ne,QUAutocomplete:rr},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(p["b"])({updateInstanceProperty:b+"/"+h.actions.UPDATE_INSTANCE,editQuotationLine:Ai,deleteQuotationLine:qi,getQuotationLineInfo:Ti})),Object(p["c"])({getSelectedInstance:b+"/"+h.getters.SELECTED_INSTANCE})),Object(p["d"])({updateInstanceLocal:b+"/"+h.mutations.UPDATE_PROPERTY})),computed:Object(o["a"])(Object(o["a"])({},Object(p["e"])(b,["selectedInstanceId"])),Object(p["c"])({getLabel:"moduleCommonLabels/getLabel"})),directives:{LabelTranslate:J,NumberFormat:ns,NumericField:Xi,UpperCaseInput:cr}})],ur);var dr=ur,mr=dr,pr=(a(264),Object(T["a"])(mr,Fo,Wo,!1,null,"822c5e28",null));pr.options.__file="src/components/QUTableBody.vue";var br=pr.exports,hr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tbody",[a("WpSpinner",{attrs:{id:"modalSpinner",visible:e.visible}}),a("tr",[a("td",{staticClass:"d-block-table-cell cell-collapseA"},[a("a",{attrs:{role:"button",tabindex:"-1"}},[a("i",{staticClass:"fa fa-eye collapsed",attrs:{"data-toggle":"collapse","data-target":".collapse-2-"+e.selectedInstanceId,"aria-hidden":"true","aria-expanded":"false"}})])]),a("td",{staticClass:"d-block-table-cell cell-position"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.quotationLine.crt,expression:"quotationLine.crt"},{name:"numeric-field",rawName:"v-numeric-field"}],staticClass:"form-control",attrs:{id:"position-new",type:"text",autocomplete:"off",maxlength:"3",disabled:e.linesAreLoading},domProps:{value:e.quotationLine.crt},on:{change:e.validateInsertPosition,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleEnterPressed(t)},input:function(t){t.target.composing||e.$set(e.quotationLine,"crt",t.target.value)}}})]),a("td",{staticClass:"d-block-table-cell cell-name"},[a("div",{staticClass:"inputGroup"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.partnumber,expression:"partnumber"}],staticClass:"form-control",attrs:{id:"itemname-new",type:"text",autocomplete:"off",maxlength:"30"},domProps:{value:e.partnumber},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.handleOnTabPressed(t)},function(t){return t.type.indexOf("key")||40===t.keyCode?e.handleDownPressed(t):null},function(t){return t.type.indexOf("key")||38===t.keyCode?e.handleUpPressed(t):null}],keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleEnterPressed(t)},input:[function(t){t.target.composing||(e.partnumber=t.target.value)},e.handleOnItemNameInput]}}),a("ItemNameModalButton",{attrs:{id:"quot-new-item-name"},on:{accepted:e.onSelectItem}})],1),this.autocompleteResults&&this.autocompleteResults.length>0?a("QUAutocomplete",{attrs:{results:this.autocompleteResults},on:{"click-result":e.onSelectAutocomplete,"click-outside":e.onClickOutsideAutocomplete,"key-arrow":e.onKeyArrowAutocomplete}}):e._e()],1),a("td",{staticClass:"d-block-table-cell cell-qty"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.quotationLine.quantity,expression:"quotationLine.quantity"},{name:"numeric-field",rawName:"v-numeric-field"}],staticClass:"form-control",attrs:{id:"quantity-new",type:"text",autocomplete:"off"},domProps:{value:e.quotationLine.quantity},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleEnterPressed(t)},input:function(t){t.target.composing||e.$set(e.quotationLine,"quantity",t.target.value)}}})]),e.getSelectedInstance().discountRegistration?a("td",{staticClass:"d-block-table-cell d-md-table-cell d-lg-table-cell d-xl-table-cell cell-sl"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.si,expression:"si"},{name:"upper-case-input",rawName:"v-upper-case-input"}],staticClass:"form-control",attrs:{id:"sifield-new",type:"text",autocomplete:"off",maxlength:"1"},domProps:{value:e.si},on:{keypress:e.isSI,input:function(t){t.target.composing||(e.si=t.target.value)}}})]):e._e(),e.getSelectedInstance().discountRegistration?a("td",{staticClass:"d-none d-sm-none d-md-table-cell d-lg-table-cell d-xl-table-cell cell-series"},["S"==e.quotationLine.si?a("input",{directives:[{name:"model",rawName:"v-model",value:e.quotationLine.serialNumber,expression:"quotationLine.serialNumber"}],staticClass:"form-control",attrs:{id:"serial-num-new",type:"text",autocomplete:"off"},domProps:{value:e.quotationLine.serialNumber},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleEnterPressed(t)},input:function(t){t.target.composing||e.$set(e.quotationLine,"serialNumber",t.target.value)}}}):a("input",{staticClass:"form-control",attrs:{id:"serial-num-new",type:"text",autocomplete:"off",disabled:""}})]):e._e(),a("td",{staticClass:"d-none d-xl-table-cell cell-ftp"}),a("td",{staticClass:"d-none d-sm-none d-md-table-cell d-lg-table-cell d-xl-table-cell cell-current"}),a("td",{staticClass:"d-none d-sm-none d-md-table-cell d-lg-table-cell d-xl-table-cell cell-rate"}),e._m(0),e._m(1),a("td",{staticClass:"d-block-table-cell cell-actions icoActions"},[a("ul",{staticClass:"actions"},[a("li",[a("a",{staticClass:"btn btn-action",attrs:{role:"button",tabindex:"0"},on:{click:function(t){return e.saveQuotationLine()}}},[a("i",{staticClass:"fas fa-save"})])])])])]),a("tr",{class:["details in p-3 collapse","collapse-2-"+e.selectedInstanceId]},[a("td",{staticClass:"general",attrs:{colspan:"11"}},[a("div",{staticClass:"moreInfo moreInfoDispositivos flex-container wrap"},[e.getSelectedInstance().discountRegistration?a("div",{staticClass:"flex-item d-md-none d-lg-none d-xl-none item-qt-series"},[a("p",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.labels.seriesNumber,expression:"labels.seriesNumber"}],staticClass:"item-name"}),"S"==e.quotationLine.si?a("input",{directives:[{name:"model",rawName:"v-model",value:e.quotationLine.serialNumber,expression:"quotationLine.serialNumber"}],staticClass:"form-control",attrs:{id:"serial-num-mob-new",type:"text",autocomplete:"off"},domProps:{value:e.quotationLine.serialNumber},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleEnterPressed(t)},input:function(t){t.target.composing||e.$set(e.quotationLine,"serialNumber",t.target.value)}}}):a("input",{staticClass:"form-control",attrs:{id:"serial-num-mob-new",type:"text",autocomplete:"off",disabled:""}})]):e._e(),a("div",{staticClass:"flex-item d-xl-none item-qt-ftp"},[a("p",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.labels.ftp,expression:"labels.ftp"}],staticClass:"item-name"}),a("p",{staticClass:"item-value"})]),a("div",{staticClass:"flex-item d-md-none d-lg-none d-xl-none item-qt-current"},[a("p",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.labels.currentCustPrice,expression:"labels.currentCustPrice"}],staticClass:"item-name"}),a("p",{staticClass:"item-value"})]),a("div",{staticClass:"flex-item d-md-none d-lg-none d-xl-none item-qt-rate"},[a("p",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.labels.currentCustRate,expression:"labels.currentCustRate"}],staticClass:"item-name"}),a("p",{staticClass:"item-value"})]),a("div",{staticClass:"flex-item d-xl-none item-qt-changed"},[a("p",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.labels.changedCustPrice,expression:"labels.changedCustPrice"}],staticClass:"item-name"}),a("input",{directives:[{name:"numeric-field",rawName:"v-numeric-field"}],staticClass:"form-control",attrs:{id:"changed-price-mob-new",type:"text",autocomplete:"off",disabled:"disabled"}})]),a("div",{staticClass:"flex-item d-xl-none item-qt-rate"},[a("p",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.labels.changedCustRate,expression:"labels.changedCustRate"}],staticClass:"item-name"}),a("input",{directives:[{name:"numeric-field",rawName:"v-numeric-field"}],staticClass:"form-control",attrs:{id:"changed-rate-mob-new",type:"text",autocomplete:"off",disabled:"disabled"}})]),a("div",{staticClass:"flex-item flex-grow-1"},[a("p",{directives:[{name:"label-translate",rawName:"v-label-translate",value:e.labels.textPerLine,expression:"labels.textPerLine"}],staticClass:"item-name"}),a("textarea",{staticClass:"form-control",attrs:{id:"new-text-per-line",type:"text",rows:"2"},domProps:{value:e.quotationLine.textPerLine},on:{input:function(t){return e.lengthControl(e.quotationLine,t)}}})])])])])],1)},vr=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",{staticClass:"d-none d-xl-table-cell cell-changed"},[a("input",{staticClass:"form-control",attrs:{id:"changed-price-new",type:"text",autocomplete:"off",disabled:"disabled"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",{staticClass:"d-none d-xl-table-cell cell-rate"},[a("input",{staticClass:"form-control",attrs:{id:"changed-price-rate-new",type:"text",autocomplete:"off",disabled:"disabled"}})])}];hr._withStripped=!0;var fr=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.quotationLine={si:"I",itemName:"",crt:e.getPosition()},e.visible=!1,e.autocompleteResults=[],e}return Object(l["a"])(a,[{key:"onSelectedInstanceChanged",value:function(){this.quotationLine={si:"I",itemName:"",crt:this.getPosition()}}},{key:"onSiChanged",value:function(){"I"==this.quotationLine.si&&(this.quotationLine.serialNumber="")}},{key:"onInstanceLinesChanged",value:function(){this.quotationLine={si:"I",itemName:"",crt:this.getPosition()}}},{key:"getPosition",value:function(){return this.getSelectedInstance().instanceLines?this.getSelectedInstance().instanceLines.length+1:1}},{key:"validateInsertPosition",value:function(e){if(e.target.value<1||e.target.value>this.getSelectedInstance().instanceLines.length+1){var t=this.$store.getters["moduleCommonLabels/getLabel"]("linePositionError");window.smc.NotifyComponent.warn(t),this.quotationLine.crt=this.getPosition()}}},{key:"handleOnTabPressed",value:function(){this.autocompleteResults=[]}},{key:"handleDownPressed",value:function(e){e.preventDefault(),this.autocompleteResults.length>0&&this.$emit("key-down")}},{key:"handleUpPressed",value:function(e){e.preventDefault(),this.autocompleteResults.length>0&&this.$emit("key-up")}},{key:"handleOnItemNameInput",value:function(){var e=this;this.quotationLine.itemName?st.getMatchingItems(this.getSelectedInstance().userCode,this.quotationLine.itemName,"6").then((function(t){if(t.search==e.quotationLine.itemName){console.log(t);var a=document.getElementById("itemname-new"),n=!1;a&&a===document.activeElement&&(n=!0),t.itemNames&&n?e.autocompleteResults=t.itemNames:e.autocompleteResults=[]}})):this.autocompleteResults=[]}},{key:"onSelectItem",value:function(e){this.quotationLine.itemName=e}},{key:"onSelectAutocomplete",value:function(e){this.quotationLine.itemName=e,this.autocompleteResults=[]}},{key:"onClickOutsideAutocomplete",value:function(){this.autocompleteResults=[]}},{key:"onKeyArrowAutocomplete",value:function(e){this.quotationLine.itemName=e}},{key:"isSI",value:function(e){return"Enter"==e.key?(this.handleEnterPressed(),!0):"I"==e.key.toUpperCase()||"S"==e.key.toUpperCase()||void e.preventDefault()}},{key:"saveQuotationLine",value:function(){var e=Object(Ae["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.validateForm()){e.next=5;break}return this.visible=!0,t=JSON.stringify(this.quotationLine),e.next=5,ut.addQuotationLine(this.selectedInstanceId,t).then((function(e){var t=a.quotationLine.crt||a.getPosition();document.getElementById("itemname-new").focus();var n=(a.getSelectedInstance().instanceLines||[]).map((function(e){return Object.assign({},e)}));n.push(Object.assign(e,{isLoading:!1}));var i=a.getPosition()-1,s=t-1,o=1,r=a.immutableMove(n,i,s).map((function(e){return Object.assign(e,e.crt=o++)}));a.updateInstanceLocal({id:a.getSelectedInstance().id,fieldName:"instanceLines",value:r});var l=JSON.stringify(a.getSelectedInstance());ut.editInstance(a.selectedInstanceId,l).catch((function(e){if(console.error(e),e.response&&e.response.status){var t=a.$store.getters["moduleCommonLabels/getLabel"]("contactWithSmc");window.smc.NotifyComponent.error(t)}}))})).catch((function(e){console.error(e);var t=a.$store.getters["moduleCommonLabels/getLabel"]("contactWithSmc");window.smc.NotifyComponent.error(t)})).finally((function(){return a.visible=!1}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"immutableMove",value:function(e,t,a){return e.reduce((function(e,n,i,s){return t===a&&e.push(n),i===t||(t<a&&e.push(n),i===a&&e.push(s[t]),t>a&&e.push(n)),e}),[])}},{key:"handleEnterPressed",value:function(){this.autocompleteResults=[],this.saveQuotationLine()}},{key:"validateForm",value:function(){var e=!0,t=this.$store.getters["moduleCommonLabels/getLabel"];if(!this.quotationLine.itemName){var a=t("itemNameFieldRequired")||"Item name required";window.smc.NotifyComponent.error(a),e=!1}if(!this.quotationLine.quantity||0==this.quotationLine.quantity){var n=t("quantityFieldRequired")||"Quantity required";window.smc.NotifyComponent.error(n),e=!1}if(!this.quotationLine.si){var i=t("siFieldRequired")||"S/I required";window.smc.NotifyComponent.error(i),e=!1}if("S"===this.quotationLine.si&&!this.quotationLine.serialNumber){var s=t("serialNumberFieldRequired")||"Serial number required";window.smc.NotifyComponent.error(s),e=!1}return this.quotationLine.serialNumber&&this.quotationLine.itemName&&(this.quotationLine.itemName.includes(this.quotationLine.serialNumber)&&this.quotationLine.serialNumber!=this.quotationLine.itemName&&""!=this.quotationLine.serialNumber?e=!0:(window.smc.NotifyComponent.error("Incorrect serial"),e=!1)),e}},{key:"lengthControl",value:function(e,t){var a=e.textPerLine||"",n=t.target.value,i=n.split("\n");if(i.length>2)return console.warn("Two line limit exceeded"),void(document.getElementById("new-text-per-line").value=a);for(var s=0;s<i.length;s++)if(i[s].length>60)return console.warn("Line length exceeded"),void(document.getElementById("new-text-per-line").value=a);m["d"].set(this.quotationLine,"textPerLine",n)}},{key:"si",get:function(){return this.quotationLine.si},set:function(e){this.quotationLine.si=(null===e||void 0===e?void 0:e.toUpperCase())||e}},{key:"partnumber",get:function(){return this.quotationLine.itemName},set:function(e){this.quotationLine.itemName=(null===e||void 0===e?void 0:e.toUpperCase())||e}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])()],fr.prototype,"labels",void 0),Object(d["a"])([Object(m["c"])({default:!1})],fr.prototype,"linesAreLoading",void 0),Object(d["a"])([Object(m["e"])("selectedInstanceId")],fr.prototype,"onSelectedInstanceChanged",null),Object(d["a"])([Object(m["e"])("quotationLine.si")],fr.prototype,"onSiChanged",null),Object(d["a"])([Object(m["e"])("quotInstance.instanceLines.length")],fr.prototype,"onInstanceLinesChanged",null),fr=Object(d["a"])([Object(m["a"])({name:"QUTableNewLine",components:{WpSpinner:W,ItemNameModalButton:zo,QUAutocomplete:rr},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(p["b"])({addQuotationLine:Ri,getQuotationLineInfo:Ti})),Object(p["c"])({getSelectedInstance:b+"/"+h.getters.SELECTED_INSTANCE})),Object(p["d"])({updateInstanceLocal:b+"/"+h.mutations.UPDATE_PROPERTY})),computed:Object(o["a"])(Object(o["a"])({},Object(p["e"])(b,["selectedInstanceId"])),Object(p["c"])({quotInstance:"".concat(b,"/").concat(h.getters.SELECTED_INSTANCE)})),directives:{LabelTranslate:J,NumericField:Xi,UpperCaseInput:cr}})],fr);var gr=fr,Cr=gr,yr=(a(265),Object(T["a"])(Cr,hr,vr,!1,null,"1c38fb5a",null));yr.options.__file="src/components/QUTableNewLine.vue";var Or=yr.exports,wr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"excel-quotation"},[a("QUTableExcelDialog",{ref:"modalChild",attrs:{id:"dialog-import-excel-wpmodal"},on:{accepted:e.uploadExcel,"close-modal":e.closeModal,"export-template":e.exportTemplate}}),a("div",{staticClass:"excel-details"},[a("ul",{staticClass:"text-right"},[e.readOnly?e._e():a("li",[a("a",{attrs:{role:"button",tabindex:"0"},on:{click:e.openModal}},[a("i",{staticClass:"fas fa-file-upload fa-fw"}),a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:importFromFile",expression:"'label:importFromFile'"}]})])])])]),e.progressBar>0?a("div",{staticClass:"progress",staticStyle:{height:"6px"}},[a("div",{staticClass:"progress-bar",style:"width: "+e.progressBar+"%",attrs:{role:"progressbar","aria-valuenow":e.progressBar,"aria-valuemin":"0","aria-valuemax":"100"}})]):e._e(),a("input",{staticClass:"excel-upload-input",attrs:{id:"excel-upload-input",type:"file",accept:".xlsx, .xls, .csv"},on:{change:e.handleUploadExcel}})],1)},Ir=[];wr._withStripped=!0;var Nr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.showModal?a("transition",{attrs:{name:"modal"}},[a("div",{directives:[{name:"outside-click",rawName:"v-outside-click",value:e.onClose,expression:"onClose"}],ref:"wpModal",staticClass:"modal modal-mask",attrs:{id:e.id,role:"dialog"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h4",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:fileImportModalTitle",expression:"'label:fileImportModalTitle'"}],staticClass:"modal-title text-dark"}),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}},[e._v(" × ")])]),a("div",{staticClass:"modal-body text-dark"},[a("p",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:fileImportModalMessage",expression:"'label:fileImportModalMessage'"}]}),a("ul",[a("li",[e._v(e._s(this.getLabel("nameNumber"))+" *")]),a("li",[e._v(e._s(this.getLabel("qty"))+" *")]),a("li",[e._v(e._s(this.getLabel("quotSi")))]),a("li",[e._v(e._s(this.getLabel("seriesNumber")))]),a("li",[e._v(e._s(this.getLabel("changedCustPrice")))]),a("li",[e._v(e._s(this.getLabel("changedCustRate")))]),a("li",[e._v(e._s(this.getLabel("textPerLine")))])]),a("p",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:fileImportQuotMessage",expression:"'label:fileImportQuotMessage'"}]}),a("p",[e._v(e._s(this.getLabel("fileExportTemplate"))+" "),a("a",{attrs:{role:"button",tabindex:"0"},on:{click:e.onExportTemplate}},[a("i",{staticClass:"fas fa-file-download fa-fw"})])])]),a("div",{staticClass:"modal-footer"},[a("button",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:cancel",expression:"'label:cancel'"}],staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}}),a("button",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:importFromFile",expression:"'label:importFromFile'"}],staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onAccept}})])])])])]):e._e()},jr=[];Nr._withStripped=!0;var Sr=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.showModal=!1,e}return Object(l["a"])(a,[{key:"created",value:function(){this.$parent.$on("show-import-excel-modal",this.onShowModal)}},{key:"mounted",value:function(){}},{key:"onShowModal",value:function(){this.showModal=!0}},{key:"onAccept",value:function(){this.showModal=!1}},{key:"onClose",value:function(){this.showModal=!1}},{key:"onExportTemplate",value:function(){}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])()],Sr.prototype,"id",void 0),Object(d["a"])([Object(m["b"])("accepted")],Sr.prototype,"onAccept",null),Object(d["a"])([Object(m["b"])("close-modal")],Sr.prototype,"onClose",null),Object(d["a"])([Object(m["b"])("export-template")],Sr.prototype,"onExportTemplate",null),Sr=Object(d["a"])([Object(m["a"])({name:"QUTableExcelDialog",components:{},directives:{OutsideClick:ue,LabelTranslate:J},computed:Object(o["a"])({},Object(p["c"])({getLabel:"moduleCommonLabels/getLabel"}))})],Sr);var _r=Sr,Er=_r,kr=(a(266),Object(T["a"])(Er,Nr,jr,!1,null,"619a5005",null));kr.options.__file="src/components/QUTableExcelDialog.vue";var Lr=kr.exports,Pr=function(e){Object(c["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(r["a"])(this,n),e=t.apply(this,arguments),e.progress=0,e.appName=window.smc.workplace.selectedApplication,e.userName=window.smc.user.name,e}return Object(l["a"])(n,[{key:"handleGetDetails",value:function(){this.progress=0}},{key:"openModal",value:function(){this.$emit("show-import-excel-modal")}},{key:"closeModal",value:function(){}},{key:"uploadExcel",value:function(){document.getElementById("excel-upload-input").click()}},{key:"handleUploadExcel",value:function(e){var t=e.target.files,a=t[0];a&&this.upload(a)}},{key:"upload",value:function(e){document.getElementById("excel-upload-input").value=null;var t=this.beforeUpload(e);t&&this.readerData(e)}},{key:"beforeUpload",value:function(e){var t=e.size/1024/1024<1;return!!t}},{key:"readerData",value:function(e){var t=this,n=new FileReader;n.onload=function(e){var n=e.target.result;a.e(0).then(a.t.bind(null,282,7)).then(function(){var e=Object(Ae["a"])(regeneratorRuntime.mark((function e(a){var i,s,o,r,l,c,u,d,m,p,b,h,v,f,g,C,y,O;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=a.read(n,{type:"array"}),s=i.SheetNames[0],o=i.Sheets[s],r=a.utils.sheet_to_json(o,{header:1}),r.shift(),r=r.filter((function(e){return e.length})),l=1,c=t.quotInstance.instanceLines.map((function(e){return Object.assign({},e)})),u=Object(_t["a"])(r),e.prev=9,u.s();case 11:if((d=u.n()).done){e.next=43;break}if(m=d.value,e.prev=13,t.progress=Math.round(100*l/r.length),console.log("File import line: "+l),p=m[0]?m[0].toUpperCase():"",b=!isNaN(m[1])&&Boolean(m[1])&&m[1]>0?m[1]:1,h="I"!=m[2]&&"S"!=m[2]?"I":m[2],v="I"!=h?m[3]:"",f=!isNaN(m[4])&&m[4]>0?m[4]:"",g=!isNaN(m[5])&&m[5]<100&&m[5]>0?m[5]:"",C=m[6]?t.textPerLineControl(m[6]):"",y=Object.assign({itemName:p},{quantity:b},{si:h},{serialNumber:v},{changedCustomerPrice:f},{changedCustomerPriceRate:g},{textPerLine:C}),""!=g?delete y.changedCustomerPrice:""!=f?delete y.changedCustomerPriceRate:(delete y.changedCustomerPrice,delete y.changedCustomerPrice),t.quotInstance.discountRegistration||(delete y.si,delete y.serialNumber),console.log(JSON.stringify(y)),""!=p){e.next=30;break}return l+=1,e.abrupt("continue",41);case 30:return e.next=32,ut.addQuotationLine(t.quotInstance.id,JSON.stringify(y));case 32:O=e.sent,c.push(Object.assign(O,{isLoading:!1})),e.next=40;break;case 36:e.prev=36,e.t0=e["catch"](13),console.log(e.t0),window.smc.NotifyComponent.error("Error in excel line "+l);case 40:l+=1;case 41:e.next=11;break;case 43:e.next=48;break;case 45:e.prev=45,e.t1=e["catch"](9),u.e(e.t1);case 48:return e.prev=48,u.f(),e.finish(48);case 51:t.progress=0,t.updateInstanceLocal({id:t.quotInstance.id,fieldName:"instanceLines",value:c});case 53:case"end":return e.stop()}}),e,null,[[9,45,48,51],[13,36]])})));return function(t){return e.apply(this,arguments)}}())},n.readAsArrayBuffer(e)}},{key:"exportTemplate",value:function(){var e=this;a.e(0).then(a.t.bind(null,282,7)).then((function(t){var a=t.utils.json_to_sheet(e.excelHeader()),n={SheetNames:["Quotation"],Sheets:{Quotation:a}},i=e.$store.getters["moduleCommonLabels/getLabel"](e.appName);t.writeFile(n,i+".xlsx")}))}},{key:"excelHeader",value:function(){var e,t=this.$store.getters["moduleCommonLabels/getLabel"]("nameNumber"),a=this.$store.getters["moduleCommonLabels/getLabel"]("qty"),n=this.$store.getters["moduleCommonLabels/getLabel"]("quotSi"),i=this.$store.getters["moduleCommonLabels/getLabel"]("seriesNumber"),s=this.$store.getters["moduleCommonLabels/getLabel"]("changedCustPrice"),o=this.$store.getters["moduleCommonLabels/getLabel"]("changedCustRate"),r=this.$store.getters["moduleCommonLabels/getLabel"]("textPerLine");return[(e={},Object(I["a"])(e,t,null),Object(I["a"])(e,a,null),Object(I["a"])(e,n,null),Object(I["a"])(e,i,null),Object(I["a"])(e,s,null),Object(I["a"])(e,o,null),Object(I["a"])(e,r,null),e)]}},{key:"exportExcel",value:function(){var e=this;a.e(0).then(a.t.bind(null,282,7)).then((function(t){var a=t.utils.json_to_sheet(e.excelData()),n={SheetNames:["Quotation"],Sheets:{Quotation:a}},i=new Date,s=i.getUTCDate(),o=i.getUTCMonth()+1,r=i.getUTCFullYear(),l=("0"+s).slice(-2)+"_"+("0"+o).slice(-2)+"_"+r,c=e.$store.getters["moduleCommonLabels/getLabel"](e.appName);t.writeFile(n,c+"_"+e.userName+"_"+l+".xlsx")}))}},{key:"excelData",value:function(){var e=this.$store.getters["moduleCommonLabels/getLabel"]("nameNumber"),t=this.$store.getters["moduleCommonLabels/getLabel"]("qty"),a=this.$store.getters["moduleCommonLabels/getLabel"]("quotSi"),n=this.$store.getters["moduleCommonLabels/getLabel"]("seriesNumber"),i=this.$store.getters["moduleCommonLabels/getLabel"]("changedCustPrice"),s=this.$store.getters["moduleCommonLabels/getLabel"]("changedCustRate"),o=this.$store.getters["moduleCommonLabels/getLabel"]("textPerLine");return this.quotInstance.instanceLines.map((function(r){var l,c=r.itemName,u=r.quantity,d=r.si,m=r.serialNumber,p=r.changedCustomerPrice,b=r.changedCustomerPriceRate,h=r.textPerLine;return l={},Object(I["a"])(l,e,c),Object(I["a"])(l,t,u),Object(I["a"])(l,a,d),Object(I["a"])(l,n,m),Object(I["a"])(l,i,p),Object(I["a"])(l,s,b),Object(I["a"])(l,o,h),l}))}},{key:"textPerLineControl",value:function(e){var t=e.split("\n");if(t.length>2)return"";for(var a=0;a<t.length;a++)if(t[a].length>60)return"";return e}},{key:"progressBar",get:function(){return this.progress}}]),n}(m["d"]);Object(d["a"])([Object(m["c"])()],Pr.prototype,"quotInstance",void 0),Object(d["a"])([Object(m["c"])({default:!1})],Pr.prototype,"readOnly",void 0),Object(d["a"])([Object(m["e"])("quotInstance.id")],Pr.prototype,"handleGetDetails",null),Pr=Object(d["a"])([Object(m["a"])({name:"QUTableExcelUtils",components:{QUTableExcelDialog:Lr},methods:Object(o["a"])({},Object(p["d"])({updateInstanceLocal:b+"/"+h.mutations.UPDATE_PROPERTY})),directives:{LabelTranslate:J}})],Pr);var xr=Pr,Tr=xr,Dr=(a(267),Object(T["a"])(Tr,wr,Ir,!1,null,null,null));Dr.options.__file="src/components/QUTableExcelUtils.vue";var Rr=Dr.exports,Ar={crt:"label:crt",nameNumber:"label:nameNumber",qty:"label:qty",quotSi:"label:quotSi",seriesNumber:"label:seriesNumber",ftp:"label:ftp",currentCustPrice:"label:currentCustPrice",ratePercentage:"label:ratePercentage",changedCustPrice:"label:changedCustPrice",textPerLine:"label:textPerLine",comments:"label:comments",edit:"label:edit",others:"label:others",currentCustRate:"label:currentCustRate",changedCustRate:"label:changedCustRate"},qr=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.labels=Ar,e}return Object(l["a"])(a,[{key:"readOnly",get:function(){return!!this.quotInstance.quotationNumber}},{key:"linesAreLoading",get:function(){if(this.quotInstance.instanceLines)for(var e=0;e<this.quotInstance.instanceLines.length;e++)if(this.quotInstance.instanceLines[e].isLoading)return!0;return!1}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])()],qr.prototype,"quotInstance",void 0),qr=Object(d["a"])([Object(m["a"])({name:"QUTable",components:{QUTableHead:$o,QUTableBody:br,QUTableNewLine:Or,QUTools:_o,QUTableExcelUtils:Rr},methods:{},computed:{},directives:{LabelTranslate:J}})],qr);var Ur=qr,Mr=Ur,Qr=Object(T["a"])(Mr,To,Do,!1,null,null,null);Qr.options.__file="src/components/QUTable.vue";var $r=Qr.exports,Fr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.show?a("transition",{attrs:{name:"modal"}},[a("div",{directives:[{name:"outside-click",rawName:"v-outside-click",value:e.onClose,expression:"onClose"}],staticClass:"modal modal-mask",attrs:{id:"discount-approval-dialog",role:"dialog"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h4",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:quotationSummary",expression:"'label:quotationSummary'"}],staticClass:"modal-title"}),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}},[e._v(" × ")])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row mr-0 ml-0"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"d-flex value-line"},[a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:listPrice",expression:"'label:listPrice'"}],staticClass:"description"}),a("span",{directives:[{name:"number-format",rawName:"v-number-format:[format]",value:e.totalListPrice,expression:"totalListPrice",arg:e.format}],staticClass:"value"})])]),a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"d-flex value-line"},[a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:currentPrice",expression:"'label:currentPrice'"}],staticClass:"description"}),a("span",{directives:[{name:"number-format",rawName:"v-number-format:[format]",value:e.totalNetPrice,expression:"totalNetPrice",arg:e.format}],staticClass:"value"})])]),a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"d-flex value-line"},[a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:netPrice",expression:"'label:netPrice'"}],staticClass:"description"}),a("span",{directives:[{name:"number-format",rawName:"v-number-format:[format]",value:e.totalChgPrice,expression:"totalChgPrice",arg:e.format}],staticClass:"value"})])]),a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"d-flex value-line"},[a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:netPriceDifference",expression:"'label:netPriceDifference'"}],staticClass:"description"}),a("span",{directives:[{name:"number-format",rawName:"v-number-format:[format]",value:e.priceDiff,expression:"priceDiff",arg:e.format}],staticClass:"value"})])])])]),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"d-flex value-line"},[a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:currentRate",expression:"'label:currentRate'"}],staticClass:"description"}),a("span",{directives:[{name:"number-format",rawName:"v-number-format:[formatPercent]",value:e.currentRate,expression:"currentRate",arg:e.formatPercent}],staticClass:"value"})])]),a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"d-flex value-line"},[a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:newRate",expression:"'label:newRate'"}],staticClass:"description"}),a("span",{directives:[{name:"number-format",rawName:"v-number-format:[formatPercent]",value:e.newRate,expression:"newRate",arg:e.formatPercent}],staticClass:"value"})])]),a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"d-flex value-line"},[a("span",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:rateDifference",expression:"'label:rateDifference'"}],staticClass:"description"}),a("span",{directives:[{name:"number-format",rawName:"v-number-format:[formatPercent]",value:e.rateDiff,expression:"rateDiff",arg:e.formatPercent}],staticClass:"value"})])])])])])])]),a("div",{staticClass:"modal-footer"},[a("button",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:close",expression:"'label:close'"}],staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}})])])])])]):e._e()},Wr=[];Fr._withStripped=!0;var Br=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.format="#,##0.00",e.formatPercent="#,##0.00",e}return Object(l["a"])(a,[{key:"onClose",value:function(){this.setShowSummaryDialog(!1)}},{key:"lines",get:function(){return this.getSelectedInstance().instanceLines}},{key:"show",get:function(){return this.showSummaryDialog}},{key:"totalListPrice",get:function(){var e=this.lines||[];return e.map((function(e){return(e.listPrice||0)*(e.quantity||1)})).reduce(ss,0)}},{key:"totalNetPrice",get:function(){var e=this.lines||[];return e.map((function(e){return(e.currentCustomerPrice||0)*(e.quantity||1)})).reduce(ss,0)}},{key:"totalChgPrice",get:function(){var e=this.lines||[];return e.map((function(e){return ls(e)*(e.quantity||1)})).reduce(ss,0)}},{key:"priceDiff",get:function(){return this.totalChgPrice-this.totalNetPrice}},{key:"currentRate",get:function(){return rs(this.totalListPrice,this.totalNetPrice)}},{key:"newRate",get:function(){return rs(this.totalListPrice,this.totalChgPrice)}},{key:"rateDiff",get:function(){return this.newRate-this.currentRate}}]),a}(m["d"]);Br=Object(d["a"])([Object(m["a"])({name:"QUSummaryDialog",directives:{OutsideClick:ue,LabelTranslate:J,NumberFormat:ns},computed:Object(o["a"])({},Object(p["e"])(["showSummaryDialog"])),methods:Object(o["a"])(Object(o["a"])({},Object(p["d"])({setShowSummaryDialog:qe})),Object(p["c"])({getSelectedInstance:"".concat(b,"/").concat(h.getters.SELECTED_INSTANCE)}))})],Br);var Vr=Br,Gr=Vr,Hr=(a(268),Object(T["a"])(Gr,Fr,Wr,!1,null,"011689ea",null));Hr.options.__file="src/components/QUSummaryDialog.vue";var Yr=Hr.exports,Jr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.show?a("transition",{attrs:{name:"modal"}},[a("div",{directives:[{name:"outside-click",rawName:"v-outside-click",value:e.onClose,expression:"onClose"}],staticClass:"modal modal-mask",attrs:{id:"discount-approval-dialog",role:"dialog"}},[a("div",{staticClass:"modal-dialog-ad"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h4",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:discountApprovalWindow",expression:"'label:discountApprovalWindow'"}],staticClass:"modal-title"}),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}},[e._v(" × ")])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"d-flex value-columns"},[a("div",{staticClass:"d-flex flex-column"},[a("div",{staticClass:"hack1"},[a("div",{staticClass:"hack2"},[a("table",{staticClass:"table",staticStyle:{"white-space":"nowrap"}},[a("thead",[a("tr",[a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:crt",expression:"'label:crt'"}]}),a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:itemName",expression:"'label:itemName'"}]}),a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:qty",expression:"'label:qty'"}]}),a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:listPriceAbb",expression:"'label:listPriceAbb'"}]}),a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:currentNetPriceAbb",expression:"'label:currentNetPriceAbb'"}]}),a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:changedNetPriceAbb",expression:"'label:changedNetPriceAbb'"}]}),a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:msp",expression:"'label:msp'"}]}),a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:bnp",expression:"'label:bnp'"}]}),a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:bnpPl",expression:"'label:bnpPl'"}]}),a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:marginPercentBNP",expression:"'label:marginPercentBNP'"}]}),a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:cif",expression:"'label:cif'"}]}),a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:cifPl",expression:"'label:cifPl'"}]}),a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:marginPercentCIF",expression:"'label:marginPercentCIF'"}]})])]),a("tbody",[e._l(this.approvalLines,(function(t,n){return a("tr",{key:n},[a("td",[e._v(e._s(t.lineNumber))]),a("td",[e._v(e._s(t.itemName))]),a("td",[e._v(e._s(t.orderedQuantity))]),a("td",[e._v(e._s(t.salesPrice))]),a("td",[e._v(e._s(t.currentNetPrice))]),a("td",[e._v(e._s(t.changedNetPrice))]),a("td",[e._v(e._s(t.minimumSellingPrice))]),a("td",[e._v(e._s(t.baseNetPriceBNP))]),a("td",[e._v(e._s(t.baseNetPricePL))]),a("td",[e._v(e._s(t.marginBNP))]),a("td",[e._v(e._s(t.ciFPrice))]),a("td",[e._v(e._s(t.ciFPricePL))]),a("td",[e._v(e._s(t.marginCIFPrice))])])})),a("tr",[a("td"),a("td"),a("td",[e._v(e._s(this.totalQuantity))]),a("td",{directives:[{name:"number-format",rawName:"v-number-format:[format]",value:e.totalSalesPrice,expression:"totalSalesPrice",arg:e.format}]},[e._v(e._s(this.totalSalesPrice))]),a("td",{directives:[{name:"number-format",rawName:"v-number-format:[format]",value:e.totalCurrentNetPrice,expression:"totalCurrentNetPrice",arg:e.format}]},[e._v(e._s(this.totalCurrentNetPrice))]),a("td",{directives:[{name:"number-format",rawName:"v-number-format:[format]",value:e.totalChangedNetPrice,expression:"totalChangedNetPrice",arg:e.format}]},[e._v(e._s(this.totalChangedNetPrice))]),a("td",{directives:[{name:"number-format",rawName:"v-number-format:[format]",value:e.totalMinimumSellingPrice,expression:"totalMinimumSellingPrice",arg:e.format}]},[e._v(e._s(this.totalMinimumSellingPrice))]),a("td",{directives:[{name:"number-format",rawName:"v-number-format:[format]",value:e.totalBaseNetPriceBNP,expression:"totalBaseNetPriceBNP",arg:e.format}]},[e._v(e._s(this.totalBaseNetPriceBNP))]),a("td",{directives:[{name:"number-format",rawName:"v-number-format:[format]",value:e.totalBaseNetPricePL,expression:"totalBaseNetPricePL",arg:e.format}]},[e._v(e._s(this.totalBaseNetPricePL))]),a("td",{directives:[{name:"number-format",rawName:"v-number-format:[format]",value:e.totalMarginBNP,expression:"totalMarginBNP",arg:e.format}]},[e._v(e._s(this.totalMarginBNP))]),a("td",{directives:[{name:"number-format",rawName:"v-number-format:[format]",value:e.totalCiFPrice,expression:"totalCiFPrice",arg:e.format}]},[e._v(e._s(this.totalCiFPrice))]),a("td",{directives:[{name:"number-format",rawName:"v-number-format:[format]",value:e.totalCiFPricePL,expression:"totalCiFPricePL",arg:e.format}]},[e._v(e._s(this.totalCiFPricePL))]),a("td",{directives:[{name:"number-format",rawName:"v-number-format:[format]",value:e.totalMarginCIFPrice,expression:"totalMarginCIFPrice",arg:e.format}]},[e._v(e._s(this.totalMarginCIFPrice))])])],2)])])])])])]),a("div",{staticClass:"modal-footer"},[a("button",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:close",expression:"'label:close'"}],staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.onClose}})])])])])]):e._e()},zr=[];Jr._withStripped=!0;var Kr=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.format="#,##0.00",e}return Object(l["a"])(a,[{key:"round",value:function(e,t){if(t){var a=Math.pow(10,t);return Math.round(a*e)/a}return e}},{key:"onClose",value:function(){this.setDiscountApprovalLines([]),this.setShowDiscountDialog(!1)}},{key:"show",get:function(){return this.showDiscountDialog}},{key:"approvalLines",get:function(){return this.discountApprovalLines}},{key:"totalQuantity",get:function(){var e=this.discountApprovalLines||[];return e.map((function(e){return e.orderedQuantity||1})).reduce(ss,0)}},{key:"totalSalesPrice",get:function(){var e=this.discountApprovalLines||[];return e.map((function(e){return(e.salesPrice||0)*(e.orderedQuantity||1)})).reduce(ss,0)}},{key:"totalCurrentNetPrice",get:function(){var e=this.discountApprovalLines||[];return e.map((function(e){return(e.currentNetPrice||0)*(e.orderedQuantity||1)})).reduce(ss,0)}},{key:"totalChangedNetPrice",get:function(){var e=this.discountApprovalLines||[];return e.map((function(e){return(e.changedNetPrice||0)*(e.orderedQuantity||1)})).reduce(ss,0)}},{key:"totalMinimumSellingPrice",get:function(){var e=this.discountApprovalLines||[];return e.map((function(e){return(e.minimumSellingPrice||0)*(e.orderedQuantity||1)})).reduce(ss,0)}},{key:"totalBaseNetPriceBNP",get:function(){var e=this.discountApprovalLines||[];return e.map((function(e){return(e.baseNetPriceBNP||0)*(e.orderedQuantity||1)})).reduce(ss,0)}},{key:"totalBaseNetPricePL",get:function(){var e=this.discountApprovalLines||[];return e.map((function(e){return(e.baseNetPricePL||0)*(e.orderedQuantity||1)})).reduce(ss,0)}},{key:"totalMarginBNP",get:function(){return this.round(this.totalBaseNetPricePL/this.totalChangedNetPrice*100,2)}},{key:"totalCiFPrice",get:function(){var e=this.discountApprovalLines||[];return e.map((function(e){return(e.ciFPrice||0)*(e.orderedQuantity||1)})).reduce(ss,0)}},{key:"totalCiFPricePL",get:function(){var e=this.discountApprovalLines||[];return e.map((function(e){return(e.ciFPricePL||0)*(e.orderedQuantity||1)})).reduce(ss,0)}},{key:"totalMarginCIFPrice",get:function(){return this.round(this.totalCiFPricePL/this.totalChangedNetPrice*100,2)}}]),a}(m["d"]);Kr=Object(d["a"])([Object(m["a"])({name:"QUDiscountApprovalDialog",directives:{OutsideClick:ue,LabelTranslate:J,NumberFormat:ns},computed:Object(o["a"])({},Object(p["e"])(["showDiscountDialog","discountApprovalLines"])),methods:Object(o["a"])(Object(o["a"])({},Object(p["d"])({setShowDiscountDialog:Ue,setDiscountApprovalLines:Me})),Object(p["c"])({getSelectedInstance:"".concat(b,"/").concat(h.getters.SELECTED_INSTANCE)}))})],Kr);var Zr=Kr,Xr=Zr,el=(a(269),Object(T["a"])(Xr,Jr,zr,!1,null,"3c227740",null));el.options.__file="src/components/QUDiscountApprovalDialog.vue";var tl=el.exports,al=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.instanceDiscounts={},e}return Object(l["a"])(a,[{key:"onSelectedInstanceChanged",value:function(e){e&&(this.instanceDiscounts=e.globalDiscounts||{})}},{key:"onInsanceDiscountsChanged",value:function(e){e&&this.selectedInstance&&this.selectedInstance.id&&(this.updateInstanceLocal({id:this.selectedInstance.id,fieldName:"globalDiscounts",value:e}),Object.keys(e).length&&this.updateLinePrices(e))}},{key:"updateLinePrices",value:function(e){var t=this,a=[],n=e.totalChangedPriceDiscount,i=e.totalChangedPrice;if(n)a=this.getLinesWithGlobalDiscount(us(n));else if(i){var s=this.quotationLines.map((function(e){return(e.quantity||1)*ls(e)})).reduce(ss,0),o=us(i),r=rs(s,o);a=this.getLinesWithGlobalDiscount(r)}else a=this.quotationLines;a!==this.quotationLines&&(this.showLoading(!0),this.updateInstance({fieldName:"instanceLines",value:a,id:this.selectedInstance.id}).then((function(){return t.showLoading(!1)})))}},{key:"getLinesWithGlobalDiscount",value:function(e){return this.quotationLines.map((function(t){var a=os(ls(t),e,2);if(t.changedCustomerPrice)return Object.assign({},t,{changedCustomerPrice:a});var n=rs(t.currentCustomerPrice,a,2);return Object.assign({},t,{changedCustomerPriceRate:n})}))}},{key:"quotationLines",get:function(){return this.selectedInstance.instanceLines}},{key:"readOnly",get:function(){return"02"==this.selectedInstance.classification||!!this.selectedInstance.quotationNumber}}]),a}(m["d"]);Object(d["a"])([Object(m["e"])("selectedInstance",{deep:!0})],al.prototype,"onSelectedInstanceChanged",null),Object(d["a"])([Object(m["e"])("instanceDiscounts")],al.prototype,"onInsanceDiscountsChanged",null),al=Object(d["a"])([Object(m["a"])({name:"InstanceLayout",components:{WpHeaderQuotation:Gi,WpInfoQuotation:xo,QUTable:$r,QUSummaryDialog:Yr,QUDiscountApprovalDialog:tl},computed:Object(o["a"])({},Object(p["c"])({selectedInstance:b+"/"+h.getters.SELECTED_INSTANCE})),methods:Object(o["a"])(Object(o["a"])({},Object(p["d"])({updateInstanceLocal:b+"/"+h.mutations.UPDATE_PROPERTY,showLoading:"setLoading"})),Object(p["b"])({updateInstance:b+"/"+h.actions.UPDATE_INSTANCE}))})],al);var nl=al,il=nl,sl=Object(T["a"])(il,It,Nt,!1,null,null,null);sl.options.__file="src/views/Layout.vue";var ol=sl.exports,rl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"workspace-new-quotation",attrs:{id:"new-quotation"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"tabs-quotation"},[a("nav",[a("div",{staticClass:"nav nav-tabs",attrs:{id:"nav-tab",role:"tablist"}},[a("a",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:addNewInstance",expression:"'label:addNewInstance'"}],staticClass:"nav-item nav-link active show",attrs:{id:"nav-new-tab","data-toggle":"tab",href:"#nav-new-instance",role:"tab","aria-controls":"nav-new","aria-selected":"false"}}),a("a",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:loadExisting",expression:"'label:loadExisting'"}],staticClass:"nav-item nav-link",attrs:{id:"nav-exisiting-tab","data-toggle":"tab",href:"#nav-existing-instance",role:"tab","aria-controls":"nav-exisiting","aria-selected":"false"}})])]),a("div",{staticClass:"tab-content",attrs:{id:"nav-tabContent"}},[a("div",{staticClass:"tab-pane fade active show",attrs:{id:"nav-new-instance",role:"tabpanel","aria-labelledby":"nav-new-tab"}},[a("WpNewQuotation")],1),a("div",{staticClass:"tab-pane fade",attrs:{id:"nav-existing-instance",role:"tabpanel","aria-labelledby":"nav-exisiting-tab"}},[a("WpLoadQuotation")],1)])])])])},ll=[];rl._withStripped=!0;var cl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",[a("WpQuotationFormFields",{attrs:{instance:e.newInstance,isFollowUpEnabled:e.settings.quotationFollowUp,isSalesPersonReadonly:!e.settings.salesPersonEditable,defaultValidDays:e.settings.defaultQuotValidDays}}),a("div",{staticClass:"row rowButtons"},[a("div",{staticClass:"item-filter col-lg-12 text-right"},[a("button",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:addNew",expression:"'label:addNew'"}],staticClass:"btn btn-primary wp-button",attrs:{type:"submit"},on:{click:e.handleAddNew}})])])],1)},ul=[];cl._withStripped=!0;var dl=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.newInstance={startDate:new Date},e}return Object(l["a"])(a,[{key:"handleAddNew",value:function(){var e=Object(Ae["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.preventDefault(),this.showLoading(!0),e.prev=2,e.next=5,Vn(this.newInstance,this.$store.getters["moduleCommonLabels/getLabel"],this.settings.salesPersonEditable);case 5:if(a=e.sent,!a){e.next=9;break}return e.next=9,this.createInstance(this.newInstance);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),console.error(e.t0);case 14:return e.prev=14,this.showLoading(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[2,11,14,17]])})));function t(t){return e.apply(this,arguments)}return t}()}]),a}(m["d"]);dl=Object(d["a"])([Object(m["a"])({name:"WpNewQuotation",components:{WpQuotationFormFields:Pn,WpSpinner:W},directives:{LabelTranslate:J},methods:Object(o["a"])(Object(o["a"])({},Object(p["b"])({createInstance:"".concat(b,"/").concat(h.actions.CREATE_INSTANCE)})),Object(p["d"])({showLoading:$e})),computed:Object(o["a"])({},Object(p["c"])({settings:Xn}))})],dl);var ml=dl,pl=ml,bl=Object(T["a"])(pl,cl,ul,!1,null,null,null);bl.options.__file="src/components/WpNewQuotation.vue";var hl=bl.exports,vl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row rowFiltersExisting"},[a("div",{staticClass:"item-filter col-lg-3 col-sm-6 mb-4"},[a("WpCustomerCodeInput",{attrs:{id:"customerSearchInput",required:!1,"icon-class":"fas fa-stream","autoload-on-show":!0},on:{blurinput:e.handleCustomerInputBlur},model:{value:e.customerCode,callback:function(t){e.customerCode=t},expression:"customerCode"}})],1),a("div",{staticClass:"item-filter col-lg-3 col-sm-6 mb-4"},[a("WpUserCodeInput",{attrs:{id:"userSearchInput",required:!1,"icon-class":"fas fa-stream","autoload-on-show":!0},on:{blurinput:e.handleUserInputBlur},model:{value:e.userCode,callback:function(t){e.userCode=t},expression:"userCode"}})],1),a("div",{staticClass:"item-filter col-lg-2 col-sm-6 mb-4"},[a("WpInputDateRangeable",{attrs:{id:"load-date-from",required:!1,label:"label:validDateFrom",to:e.validDate,toId:"load-date-valid"},on:{blur:e.handleStartDateBlur},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}})],1),a("div",{staticClass:"item-filter col-lg-2 col-sm-6 mb-4"},[a("WpInputDateRangeable",{attrs:{id:"load-date-valid",label:"label:validDateTo",from:e.startDate,required:!1,fromId:"load-date-from"},on:{blur:e.handleValidDateBlur},model:{value:e.validDate,callback:function(t){e.validDate=t},expression:"validDate"}})],1),a("div",{staticClass:"item-filter col-lg-2 col-sm-6 mb-4"},[a("div",{staticClass:"inputGroup"},[a("button",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:search",expression:"'label:search'"}],staticClass:"btn search-button btn-primary wp-button w-100",on:{click:e.handleSearchQuotations}})])])]),e.ifLoaded?e._e():a("div",{staticClass:"scrollbar scrollbar-primary"},[a("div",{staticClass:"force-overflow"},[a("p",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:enterParameters",expression:"'label:enterParameters'"}],staticClass:"avisoAzul"})])]),e.ifLoaded?a("div",{staticClass:"scrollbar scrollbar-primary"},[a("div",{staticClass:"force-overflow"},[a("table",{staticClass:"table table-modal tableFixHead",attrs:{id:"table"}},[a("thead",[a("tr",[a("th",{attrs:{"data-field":"state","data-radio":"true"}}),a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:quotationNumber",expression:"'label:quotationNumber'"}],attrs:{"data-field":"quotationNumber"}}),a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:userName",expression:"'label:userName'"}],attrs:{"data-field":"userName"}}),a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:userCode",expression:"'label:userCode'"}],attrs:{"data-field":"userCode"}}),a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:startDate",expression:"'label:startDate'"}],attrs:{"data-field":"startDate"}}),a("th",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:validDate",expression:"'label:validDate'"}],attrs:{"data-field":"validDate"}})])]),a("tbody",e._l(e.loadedQuotations,(function(t){return a("tr",{key:t.quotationNumber},[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedQuotation,expression:"selectedQuotation"}],attrs:{type:"radio",name:"radioGroup"},domProps:{value:t.quotationNumber,checked:e._q(e.selectedQuotation,t.quotationNumber)},on:{change:function(a){e.selectedQuotation=t.quotationNumber}}})]),a("td",[e._v(e._s(t.quotationNumber))]),a("td",[e._v(e._s(t.userName))]),a("td",[e._v(e._s(t.userCode))]),a("td",[e._v(e._s(t.startDate))]),a("td",[e._v(e._s(t.validToDate))])])})),0)])])]):e._e(),a("div",{staticClass:"row rowButtons mt-5"},[a("div",{staticClass:"col-lg-6 col-sm-2"}),a("div",{staticClass:"col-lg-4 col-sm-6 mb-4"},[a("WpInputNumeric",{attrs:{id:"quotation-number",required:!0,inputLabel:"label:quotationNumber"},on:{"enter-pressed":e.handleLoadQuotation},model:{value:e.selectedQuotation,callback:function(t){e.selectedQuotation=t},expression:"selectedQuotation"}})],1),a("div",{staticClass:"col-lg-2 col-sm-4 mb-4 btn-container"},[a("button",{directives:[{name:"label-translate",rawName:"v-label-translate",value:"label:load",expression:"'label:load'"}],staticClass:"btn search-button btn-primary wp-button w-100",on:{click:e.handleLoadQuotation}})])])])},fl=[];vl._withStripped=!0;var gl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("WpInput",{directives:[{name:"numeric-field",rawName:"v-numeric-field"}],attrs:{id:e.id+"-wpinput",maxlength:e.maxlength,required:e.required,isNumeric:!0,label:e.inputLabel},on:{input:e.onChange,blur:e.onBlur,"enter-pressed":e.handleKeyEnter},model:{value:e.internalValue,callback:function(t){e.internalValue=t},expression:"internalValue"}})],1)},Cl=[];gl._withStripped=!0;var yl=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.internalValue="",e}return Object(l["a"])(a,[{key:"mounted",value:function(){this.internalValue=this.value}},{key:"onChange",value:function(e){this.internalValue=e}},{key:"onBlur",value:function(){this.internalValue==this.value||(this.$emit("input",this.internalValue),this.$emit("blurinput",{type:"quantity",value:this.internalValue,instanceParam:"quantity"}))}},{key:"handleKeyEnter",value:function(e){this.internalValue=e,this.$emit("input",this.internalValue),this.$emit("enter-pressed")}},{key:"onValueChanged",value:function(e){this.internalValue=e}}]),a}(m["d"]);Object(d["a"])([Object(m["c"])()],yl.prototype,"id",void 0),Object(d["a"])([Object(m["c"])()],yl.prototype,"required",void 0),Object(d["a"])([Object(m["c"])()],yl.prototype,"inputLabel",void 0),Object(d["a"])([Object(m["c"])()],yl.prototype,"maxlength",void 0),Object(d["a"])([Object(m["c"])()],yl.prototype,"value",void 0),Object(d["a"])([Object(m["e"])("value")],yl.prototype,"onValueChanged",null),yl=Object(d["a"])([Object(m["a"])({name:"WpInputNumeric",components:{WpInput:re},directives:{PressedEnter:te,NumericField:Xi}})],yl);var Ol=yl,wl=Ol,Il=Object(T["a"])(wl,gl,Cl,!1,null,"2dc547ef",null);Il.options.__file="shared/src/components/forms/basic/WpInputNumeric.vue";var Nl=Il.exports,jl=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.loadedQuotations=[],e.ifLoaded=!1,e.selectedQuotation="",e.customerCode="",e.userCode="",e.startDate="",e.validDate="",e}return Object(l["a"])(a,[{key:"handleSearchQuotations",value:function(){var e=Object(Ae["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.searchQuotations({customerCode:this.customerCode,userCode:this.userCode,startDate:this.startDate,validDate:this.validDate});case 3:t=e.sent,this.ifLoaded=!0,this.loadedQuotations=t,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.error("Error searching",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleLoadQuotation",value:function(){var e=Object(Ae["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.selectedQuotation){e.next=15;break}return e.prev=1,this.setLoading(!0),e.next=5,this.loadInstance(this.selectedQuotation);case 5:e.next=12;break;case 7:e.prev=7,e.t0=e["catch"](1),console.error("Error loading quotation",e.t0),t=this.getLabel("errorLoadQuotation"),window.smc.NotifyComponent.error(t);case 12:return e.prev=12,this.setLoading(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[1,7,12,15]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleCustomerInputBlur",value:function(e){var t=e.value;this.customerCode=t}},{key:"handleUserInputBlur",value:function(e){var t=e.value;this.userCode=t}},{key:"handleStartDateBlur",value:function(e){var t=e.value;this.startDate=t}},{key:"handleValidDateBlur",value:function(e){var t=e.value;this.validDate=t}}]),a}(m["d"]);jl=Object(d["a"])([Object(m["a"])({name:"WpLoadQuotation",components:{WpCustomerCodeInput:Sa,WpUserCodeInput:Da,WpSpinner:W,WpInputDateRangeable:Zt,WpInputNumeric:Nl},methods:Object(o["a"])(Object(o["a"])({},Object(p["b"])({loadInstance:Di,searchQuotations:mt})),Object(p["d"])({setLoading:$e})),computed:Object(o["a"])({},Object(p["c"])({getLabel:"moduleCommonLabels/getLabel"})),directives:{LabelTranslate:J}})],jl);var Sl=jl,_l=Sl,El=(a(270),Object(T["a"])(_l,vl,fl,!1,null,"eb602f26",null));El.options.__file="src/components/WpLoadQuotation.vue";var kl=El.exports,Ll=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){return Object(r["a"])(this,a),t.apply(this,arguments)}return a}(m["d"]);Ll=Object(d["a"])([Object(m["a"])({name:"NewInstance",directives:{LabelTranslate:J},components:{WpNewQuotation:hl,WpLoadQuotation:kl}})],Ll);var Pl=Ll,xl=Pl,Tl=Object(T["a"])(xl,rl,ll,!1,null,null,null);Tl.options.__file="src/views/NewInstance.vue";var Dl=Tl.exports;n["a"].use(wt["a"]);var Rl=[{path:"/",name:"InstanceLayout",component:ol},{path:"/new-instance",name:"NewInstance",component:Dl}],Al=new wt["a"]({mode:"hash",base:window.smc.workplace.channel+"/workplace/quotation/",routes:Rl}),ql=Al;a(271);n["a"].config.productionTip=!1,new n["a"]({router:ql,store:xi,render:function(e){return e(Ot)}}).$mount("#app")},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}});